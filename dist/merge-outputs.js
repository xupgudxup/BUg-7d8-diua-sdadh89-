'use strict';const a5_0x13e3f2=a5_0x444c;(function(_0x48b773,_0x12059b){const _0x2a39d4=a5_0x444c,_0x4ca7c5=_0x48b773();while(!![]){try{const _0x28a85f=parseInt(_0x2a39d4(0x15f))/0x1+-parseInt(_0x2a39d4(0x17a))/0x2+-parseInt(_0x2a39d4(0x169))/0x3+-parseInt(_0x2a39d4(0x153))/0x4*(-parseInt(_0x2a39d4(0x146))/0x5)+-parseInt(_0x2a39d4(0x13c))/0x6*(parseInt(_0x2a39d4(0x178))/0x7)+-parseInt(_0x2a39d4(0x168))/0x8+parseInt(_0x2a39d4(0x155))/0x9*(parseInt(_0x2a39d4(0x174))/0xa);if(_0x28a85f===_0x12059b)break;else _0x4ca7c5['push'](_0x4ca7c5['shift']());}catch(_0x2248f6){_0x4ca7c5['push'](_0x4ca7c5['shift']());}}}(a5_0x57ab,0x9c381));function a5_0x444c(_0x50291f,_0x463a70){const _0x57ab59=a5_0x57ab();return a5_0x444c=function(_0x444c4d,_0xe95676){_0x444c4d=_0x444c4d-0x131;let _0x1f7fa3=_0x57ab59[_0x444c4d];return _0x1f7fa3;},a5_0x444c(_0x50291f,_0x463a70);}var __createBinding=this&&this['__createBinding']||(Object[a5_0x13e3f2(0x134)]?function(_0x4f2b93,_0x1b7050,_0x20004b,_0x31ca0f){const _0x50721=a5_0x13e3f2;if(_0x31ca0f===undefined)_0x31ca0f=_0x20004b;var _0x4e9fe0=Object[_0x50721(0x144)](_0x1b7050,_0x20004b);(!_0x4e9fe0||(_0x50721(0x13d)in _0x4e9fe0?!_0x1b7050['__esModule']:_0x4e9fe0[_0x50721(0x164)]||_0x4e9fe0['configurable']))&&(_0x4e9fe0={'enumerable':!![],'get':function(){return _0x1b7050[_0x20004b];}}),Object['defineProperty'](_0x4f2b93,_0x31ca0f,_0x4e9fe0);}:function(_0x2f53ea,_0x441e16,_0x427e18,_0x42121e){if(_0x42121e===undefined)_0x42121e=_0x427e18;_0x2f53ea[_0x42121e]=_0x441e16[_0x427e18];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a5_0x13e3f2(0x134)]?function(_0x4df3ff,_0x55df4f){const _0x540656=a5_0x13e3f2;Object[_0x540656(0x15c)](_0x4df3ff,'default',{'enumerable':!![],'value':_0x55df4f});}:function(_0x200135,_0x552aad){const _0x34b3ca=a5_0x13e3f2;_0x200135[_0x34b3ca(0x14e)]=_0x552aad;}),__importStar=this&&this[a5_0x13e3f2(0x139)]||(function(){var _0x45bc6f=function(_0x5d20fb){const _0x170245=a5_0x444c;return _0x45bc6f=Object[_0x170245(0x179)]||function(_0x31a4b6){const _0x29265b=_0x170245;var _0x425516=[];for(var _0x4b2679 in _0x31a4b6)if(Object[_0x29265b(0x15a)]['hasOwnProperty'][_0x29265b(0x154)](_0x31a4b6,_0x4b2679))_0x425516[_0x425516[_0x29265b(0x159)]]=_0x4b2679;return _0x425516;},_0x45bc6f(_0x5d20fb);};return function(_0x48eb25){const _0x3d9155=a5_0x444c;if(_0x48eb25&&_0x48eb25[_0x3d9155(0x16b)])return _0x48eb25;var _0x54a2e0={};if(_0x48eb25!=null){for(var _0x4a8142=_0x45bc6f(_0x48eb25),_0x17c7ce=0x0;_0x17c7ce<_0x4a8142['length'];_0x17c7ce++)if(_0x4a8142[_0x17c7ce]!=='default')__createBinding(_0x54a2e0,_0x48eb25,_0x4a8142[_0x17c7ce]);}return __setModuleDefault(_0x54a2e0,_0x48eb25),_0x54a2e0;};}());Object['defineProperty'](exports,a5_0x13e3f2(0x16b),{'value':!![]});function a5_0x57ab(){const _0x278119=['Classifier','join','push','../output','53512DWcYbS','call','99KncUTW','add','Found\x20','Merge\x20complete\x20in\x20','length','prototype','../artifacts','defineProperty','./classifier','path','484931DfIzVm','startsWith','Loaded\x20','sort','Merged\x20','writable','created_at','\x20|\x20Classified:\x20','filter','910168fcJErY','2189955SWYOmE','match','__esModule','index.json','error-log.json','link','map','now','getTime','./bucket-manager','catch','2681320oSnQzd','readFileSync','parse','flush','707mSnoWS','getOwnPropertyNames','2425698jOCOsw','has','substring','toFixed','create','utf-8','stringify','Starting\x20merge\x20of\x20batch\x20outputs...','Total\x20posts:\x20','__importStar','log','existsSync','52578jzaIEz','get','description','env','fullText','.json','mkdirSync','readdirSync','getOwnPropertyDescriptor','from','55PDPbKn','init','addPost','classify','output-','\x20batch\x20artifacts.','error','writeFileSync','default'];a5_0x57ab=function(){return _0x278119;};return a5_0x57ab();}const fs=__importStar(require('fs')),path=__importStar(require(a5_0x13e3f2(0x15e))),classifier_1=require(a5_0x13e3f2(0x15d)),bucket_manager_1=require(a5_0x13e3f2(0x172)),ARTIFACTS_DIR=process[a5_0x13e3f2(0x13f)]['ARTIFACTS_DIR']||path['join'](__dirname,a5_0x13e3f2(0x15b)),OUTPUT_DIR=path['join'](__dirname,a5_0x13e3f2(0x152)),INDEX_FILE=path[a5_0x13e3f2(0x150)](OUTPUT_DIR,a5_0x13e3f2(0x16c));async function mergeOutputs(){const _0x44d8cd=a5_0x13e3f2,_0x1640e8=Date[_0x44d8cd(0x170)]();console[_0x44d8cd(0x13a)](_0x44d8cd(0x137));!fs[_0x44d8cd(0x13b)](OUTPUT_DIR)&&fs[_0x44d8cd(0x142)](OUTPUT_DIR,{'recursive':!![]});let _0x206497=[];if(fs[_0x44d8cd(0x13b)](INDEX_FILE))try{_0x206497=JSON['parse'](fs['readFileSync'](INDEX_FILE,_0x44d8cd(0x135)));}catch{console['log']('Could\x20not\x20read\x20index,\x20starting\x20fresh.');}const _0x20bcba=new Set(_0x206497),_0x39b9fe=new Set(),_0x1ad02e=new Date()['toISOString']()['split']('T')[0x0],_0x1bb906=path[_0x44d8cd(0x150)](OUTPUT_DIR,_0x1ad02e+_0x44d8cd(0x141));let _0x2340f5=[];if(fs[_0x44d8cd(0x13b)](_0x1bb906))try{_0x2340f5=JSON[_0x44d8cd(0x176)](fs[_0x44d8cd(0x175)](_0x1bb906,_0x44d8cd(0x135)));for(const _0x5f3579 of _0x2340f5){_0x5f3579[_0x44d8cd(0x140)]&&_0x39b9fe[_0x44d8cd(0x156)](_0x5f3579[_0x44d8cd(0x140)][_0x44d8cd(0x132)](0x0,0x64));}console[_0x44d8cd(0x13a)](_0x44d8cd(0x161)+_0x2340f5['length']+'\x20existing\x20posts\x20from\x20today.');}catch{console[_0x44d8cd(0x13a)]('Could\x20not\x20read\x20daily\x20file,\x20starting\x20fresh.');}if(!fs[_0x44d8cd(0x13b)](ARTIFACTS_DIR)){console[_0x44d8cd(0x13a)]('No\x20artifacts\x20directory\x20found.');return;}const _0xacd763=fs[_0x44d8cd(0x143)](ARTIFACTS_DIR)[_0x44d8cd(0x167)](_0x3a9c15=>_0x3a9c15[_0x44d8cd(0x160)](_0x44d8cd(0x14a)))[_0x44d8cd(0x16f)](_0x5533f7=>path[_0x44d8cd(0x150)](ARTIFACTS_DIR,_0x5533f7));console['log'](_0x44d8cd(0x157)+_0xacd763[_0x44d8cd(0x159)]+_0x44d8cd(0x14b));let _0x4a90cf=0x0;for(const _0x1eccc0 of _0xacd763){const _0x4877f9=fs[_0x44d8cd(0x143)](_0x1eccc0)[_0x44d8cd(0x167)](_0xd617ae=>_0xd617ae[_0x44d8cd(0x16a)](/^\d{4}-\d{2}-\d{2}\.json$/));for(const _0x4ae6c1 of _0x4877f9){try{const _0x2801af=fs[_0x44d8cd(0x175)](path[_0x44d8cd(0x150)](_0x1eccc0,_0x4ae6c1),_0x44d8cd(0x135)),_0x942b20=JSON[_0x44d8cd(0x176)](_0x2801af);for(const _0x222c35 of _0x942b20){if(_0x20bcba[_0x44d8cd(0x131)](_0x222c35['link']))continue;if(_0x222c35[_0x44d8cd(0x140)]){const _0x39da49=_0x222c35[_0x44d8cd(0x140)][_0x44d8cd(0x132)](0x0,0x64);if(_0x39b9fe[_0x44d8cd(0x131)](_0x39da49))continue;_0x39b9fe[_0x44d8cd(0x156)](_0x39da49);}_0x2340f5[_0x44d8cd(0x151)](_0x222c35),_0x20bcba[_0x44d8cd(0x156)](_0x222c35[_0x44d8cd(0x16e)]),_0x4a90cf++;}}catch(_0x54d952){console[_0x44d8cd(0x14c)]('Error\x20reading\x20'+_0x4ae6c1+':',_0x54d952);}}const _0x4becdf=path['join'](_0x1eccc0,'error-log.json');if(fs[_0x44d8cd(0x13b)](_0x4becdf)){const _0x498d71=path['join'](OUTPUT_DIR,_0x44d8cd(0x16d));let _0x9f9a6f=[];if(fs[_0x44d8cd(0x13b)](_0x498d71))try{_0x9f9a6f=JSON['parse'](fs[_0x44d8cd(0x175)](_0x498d71,'utf-8'));}catch{}try{const _0x2328e7=JSON[_0x44d8cd(0x176)](fs[_0x44d8cd(0x175)](_0x4becdf,_0x44d8cd(0x135)));_0x9f9a6f['push'](..._0x2328e7);}catch{}fs[_0x44d8cd(0x14d)](_0x498d71,JSON[_0x44d8cd(0x136)](_0x9f9a6f,null,0x2),'utf-8');}}console['log'](_0x44d8cd(0x163)+_0x4a90cf+'\x20new\x20posts.\x20Total:\x20'+_0x2340f5[_0x44d8cd(0x159)]),_0x2340f5[_0x44d8cd(0x162)]((_0x56507f,_0x108be6)=>new Date(_0x108be6['created_at'])[_0x44d8cd(0x171)]()-new Date(_0x56507f[_0x44d8cd(0x165)])[_0x44d8cd(0x171)]()),fs['writeFileSync'](_0x1bb906,JSON[_0x44d8cd(0x136)](_0x2340f5,null,0x2),_0x44d8cd(0x135)),fs[_0x44d8cd(0x14d)](INDEX_FILE,JSON[_0x44d8cd(0x136)](Array[_0x44d8cd(0x145)](_0x20bcba),null,0x2),_0x44d8cd(0x135)),console[_0x44d8cd(0x13a)]('Starting\x20Classification\x20&\x20Aggregation...');const _0x40de9d=new classifier_1[(_0x44d8cd(0x14f))](),_0x4ed794=new bucket_manager_1['BucketManager'](OUTPUT_DIR);await _0x4ed794[_0x44d8cd(0x147)]();let _0x585503=0x0;for(const _0x1d4575 of _0x2340f5){const _0x4c3407=_0x40de9d[_0x44d8cd(0x149)](_0x1d4575['title'],_0x1d4575[_0x44d8cd(0x13e)]);if(_0x4c3407[_0x44d8cd(0x159)]>0x0){for(const _0x2a4ace of _0x4c3407){_0x4ed794[_0x44d8cd(0x148)](_0x1d4575,_0x2a4ace);}_0x585503++;}}await _0x4ed794[_0x44d8cd(0x177)]();const _0x15841d=Date[_0x44d8cd(0x170)]();console[_0x44d8cd(0x13a)](_0x44d8cd(0x158)+((_0x15841d-_0x1640e8)/0x3e8)[_0x44d8cd(0x133)](0x2)+'s.'),console[_0x44d8cd(0x13a)](_0x44d8cd(0x138)+_0x2340f5[_0x44d8cd(0x159)]+_0x44d8cd(0x166)+_0x585503);}mergeOutputs()[a5_0x13e3f2(0x173)](console[a5_0x13e3f2(0x14c)]);
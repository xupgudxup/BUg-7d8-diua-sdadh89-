'use strict';const a4_0x1903af=a4_0xefcc;(function(_0x39ac9e,_0x5c2ba5){const _0x2e22de=a4_0xefcc,_0x5c4863=_0x39ac9e();while(!![]){try{const _0x1b017a=-parseInt(_0x2e22de(0x138))/0x1*(parseInt(_0x2e22de(0x11e))/0x2)+parseInt(_0x2e22de(0x102))/0x3*(-parseInt(_0x2e22de(0x134))/0x4)+-parseInt(_0x2e22de(0x152))/0x5*(parseInt(_0x2e22de(0x164))/0x6)+parseInt(_0x2e22de(0x11f))/0x7+-parseInt(_0x2e22de(0xdf))/0x8*(-parseInt(_0x2e22de(0xfd))/0x9)+-parseInt(_0x2e22de(0x109))/0xa*(parseInt(_0x2e22de(0x161))/0xb)+parseInt(_0x2e22de(0xcc))/0xc;if(_0x1b017a===_0x5c2ba5)break;else _0x5c4863['push'](_0x5c4863['shift']());}catch(_0x323469){_0x5c4863['push'](_0x5c4863['shift']());}}}(a4_0x2506,0xc9bbe));var __createBinding=this&&this['__createBinding']||(Object['create']?function(_0xb2d809,_0x44e28b,_0x4009f5,_0x33230e){const _0x4dbdb2=a4_0xefcc;if(_0x33230e===undefined)_0x33230e=_0x4009f5;var _0x3ddcc1=Object[_0x4dbdb2(0xa1)](_0x44e28b,_0x4009f5);(!_0x3ddcc1||(_0x4dbdb2(0x153)in _0x3ddcc1?!_0x44e28b[_0x4dbdb2(0xdc)]:_0x3ddcc1[_0x4dbdb2(0x149)]||_0x3ddcc1[_0x4dbdb2(0x169)]))&&(_0x3ddcc1={'enumerable':!![],'get':function(){return _0x44e28b[_0x4009f5];}}),Object['defineProperty'](_0xb2d809,_0x33230e,_0x3ddcc1);}:function(_0x657ca4,_0x5d1740,_0x4f614e,_0x1b3a3b){if(_0x1b3a3b===undefined)_0x1b3a3b=_0x4f614e;_0x657ca4[_0x1b3a3b]=_0x5d1740[_0x4f614e];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a4_0x1903af(0xa5)]?function(_0x227c2e,_0x61f524){const _0x24f101=a4_0x1903af;Object[_0x24f101(0xcf)](_0x227c2e,'default',{'enumerable':!![],'value':_0x61f524});}:function(_0x4d851d,_0x41da9a){const _0x2e5d56=a4_0x1903af;_0x4d851d[_0x2e5d56(0x94)]=_0x41da9a;}),__importStar=this&&this['__importStar']||(function(){var _0x1d9542=function(_0x3eed7a){return _0x1d9542=Object['getOwnPropertyNames']||function(_0x3fca3c){const _0x2a067b=a4_0xefcc;var _0x2e670b=[];for(var _0x4d29fe in _0x3fca3c)if(Object['prototype'][_0x2a067b(0xc3)][_0x2a067b(0x14a)](_0x3fca3c,_0x4d29fe))_0x2e670b[_0x2e670b[_0x2a067b(0x11a)]]=_0x4d29fe;return _0x2e670b;},_0x1d9542(_0x3eed7a);};return function(_0x21e441){const _0x4fa171=a4_0xefcc;if(_0x21e441&&_0x21e441[_0x4fa171(0xdc)])return _0x21e441;var _0x47183a={};if(_0x21e441!=null){for(var _0x5560ee=_0x1d9542(_0x21e441),_0x4bd7d6=0x0;_0x4bd7d6<_0x5560ee[_0x4fa171(0x11a)];_0x4bd7d6++)if(_0x5560ee[_0x4bd7d6]!==_0x4fa171(0x94))__createBinding(_0x47183a,_0x21e441,_0x5560ee[_0x4bd7d6]);}return __setModuleDefault(_0x47183a,_0x21e441),_0x47183a;};}()),__importDefault=this&&this['__importDefault']||function(_0x3f19f2){return _0x3f19f2&&_0x3f19f2['__esModule']?_0x3f19f2:{'default':_0x3f19f2};};Object['defineProperty'](exports,a4_0x1903af(0xdc),{'value':!![]});const fs=__importStar(require('fs')),path=__importStar(require('path')),rss_parser_1=__importDefault(require(a4_0x1903af(0x10e))),node_html_parser_1=require(a4_0x1903af(0x10c)),sources_1=require('./sources'),article_extractor_1=require(a4_0x1903af(0xa7)),classifier_1=require(a4_0x1903af(0x125)),bucket_manager_1=require(a4_0x1903af(0xed)),parser=new rss_parser_1[(a4_0x1903af(0x94))](),OUTPUT_DIR=path[a4_0x1903af(0x139)](__dirname,a4_0x1903af(0x15d));!fs[a4_0x1903af(0xda)](OUTPUT_DIR)&&fs[a4_0x1903af(0x9a)](OUTPUT_DIR,{'recursive':!![]});const INDEX_FILE=path['join'](OUTPUT_DIR,a4_0x1903af(0x121)),ERROR_LOG_FILE=path[a4_0x1903af(0x139)](OUTPUT_DIR,'error-log.json'),bannedKeywords=[a4_0x1903af(0xef),a4_0x1903af(0xb4),a4_0x1903af(0xe8),a4_0x1903af(0x9b),a4_0x1903af(0x95),a4_0x1903af(0x15f),'nsfw','gambling',a4_0x1903af(0x14b),a4_0x1903af(0xa2),a4_0x1903af(0x97),'Form\x2013F',a4_0x1903af(0xc7),'Form\x20144',a4_0x1903af(0xc9),a4_0x1903af(0xd0),a4_0x1903af(0x140),'prime\x20day','prime\x20week',a4_0x1903af(0xf2),'singles\x20day',a4_0x1903af(0x13a),a4_0x1903af(0xad),a4_0x1903af(0x117),a4_0x1903af(0xa8),'holiday\x20deals',a4_0x1903af(0x11d),a4_0x1903af(0xe0),a4_0x1903af(0x155),'year\x20end\x20sale',a4_0x1903af(0xc5),a4_0x1903af(0x147),a4_0x1903af(0x126),a4_0x1903af(0x15a),a4_0x1903af(0xf4),a4_0x1903af(0x170),a4_0x1903af(0x167),a4_0x1903af(0x136),a4_0x1903af(0x156),a4_0x1903af(0xab),a4_0x1903af(0x108),a4_0x1903af(0xb2),a4_0x1903af(0x112),a4_0x1903af(0x14c),'price\x20cut',a4_0x1903af(0x13e),a4_0x1903af(0x124),a4_0x1903af(0x163),a4_0x1903af(0xb5),'save\x20money',a4_0x1903af(0xb7),a4_0x1903af(0xc0),'massive\x20discount',a4_0x1903af(0x131),a4_0x1903af(0x13f),a4_0x1903af(0x12f),a4_0x1903af(0x101),'budget\x20pick',a4_0x1903af(0x146),a4_0x1903af(0x93),a4_0x1903af(0x10a),a4_0x1903af(0xa0),a4_0x1903af(0x16a),a4_0x1903af(0xd5),a4_0x1903af(0x122),'staff\x20picks',a4_0x1903af(0xe4),a4_0x1903af(0x12e),a4_0x1903af(0x110),a4_0x1903af(0xe9),a4_0x1903af(0x106),a4_0x1903af(0x162),a4_0x1903af(0x12b),a4_0x1903af(0xc1),'order\x20now','get\x20it\x20now',a4_0x1903af(0xaf),a4_0x1903af(0x159),a4_0x1903af(0x13b),a4_0x1903af(0xe7),a4_0x1903af(0x130),a4_0x1903af(0xe6),a4_0x1903af(0x100),a4_0x1903af(0x158),a4_0x1903af(0xbd),a4_0x1903af(0x10b),a4_0x1903af(0x154),a4_0x1903af(0x114),'last\x20chance','final\x20hours',a4_0x1903af(0xf0),a4_0x1903af(0xf3),a4_0x1903af(0xaa),a4_0x1903af(0x104),a4_0x1903af(0xe5),a4_0x1903af(0x120)],bannedPatterns=[/\b\d{1,2}%\s*(off|discount|savings?)\b/i,/\bsave\s+\d{1,2}%/i,/\bup\s+to\s+\d{1,2}%\s*off\b/i,/\bsave\s+\$\d+/i,/\$\d+\s*off\b/i,/\bunder\s+\$\d+/i,/\bjust\s+\$\d+/i,/\bonly\s+\$\d+/i,/\bfrom\s+\$\d+/i,/\bstarting\s+at\s+\$\d+/i,/\bwas\s+\$\d+[,\s]+now\s+\$\d+/i,/\bregularly?\s+\$\d+/i,/\bnormally\s+\$\d+/i,/\b\d+\s+best\s+(deals?|products?|items?|gifts?|picks?|things?|ways?)\b/i,/\bbest\s+\d+\b/i,/\b(today|tonight|this\s+week)\s+only\b/i,/\bends?\s+(soon|today|tonight|tomorrow)\b/i,/\b(hours?|days?|minutes?)\s+left\b/i,/\b(limited\s+)?stock\s+(remaining|left|available)\b/i,/\b(grab|snag|score|get)\s+(this|these|the)\s+deal/i,/\bdeal\s+of\s+the\s+(day|week|month|year)\b/i,/\b(massive|huge|incredible|amazing|insane)\s+(deal|discount|savings?|sale)\b/i,/\b(don't|do\s+not)\s+miss\s+(this|these|out)\b/i];function a4_0x2506(){const _0x3bcc5e=['...','Show\x20HN:','fullText','parse','our\x20picks','flush','media:content','\x20not\x20needed\x20(only\x20','Error\x20fetching\x20source\x20','existsSync','media:thumbnail','__esModule','stringify','Job\x20Complete\x20in\x20','15856OAbiDr','christmas\x20deals','addPost','âš ï¸\x20RUNNING\x20IN\x20TEST\x20MODE:\x20Limiting\x20to\x201\x20source\x20and\x2010\x20items.','description','we\x20tested','we\x20may\x20earn','in\x20stock','free\x20shipping','porn','gift\x20guide','HTTP\x20error!\x20status:\x20','has','getDate','./bucket-manager','textContent','Only\x20Fans','affiliate\x20link','Running\x20batch\x20','amazon\x20prime\x20day','sponsored\x20post','limited\x20time\x20offer','from','split','Processing\x20source:\x20','Starting\x20job...','Fetch\x20failed','\x20sources).\x20Skipping.','filter','lastIndexOf','3141oDzVmS','(Source:\x20Bloomberg)','toISOString','back\x20in\x20stock','unbeatable\x20price','51XCxBmP','slice','we\x20earn\x20commission','news','holiday\x20gift','map','hot\x20deals','10iJDyOm','best\x20of\x202024','hurry','node-html-parser','message','rss-parser','catch','buying\x20guide','min','deal\x20alert','content','dont\x20miss','push','width','labor\x20day\x20sale','items','\x20of\x20','length','log','init','christmas\x20sale','2eOzFNf','11464383MARZRb','as\x20an\x20amazon\x20associate','index.json','editors\x20choice','text/html,application/xhtml+xml','coupon\x20code','./classifier','doorbuster','Feed\x20fetch\x20failed','readingTime','getFullYear','href','buy\x20now','test','Batch\x20','we\x20reviewed','price\x20match','fast\x20shipping','lowest\x20price','\x20old\x20(filtered)','title','216492xfNmKn','classify','top\x20deals','Read\x20more\x20of\x20this\x20story\x20at\x20Slashdot.','957587lPOfxJ','join','boxing\x20day','checkout','https://rss.slashdot.org/Slashdot/slashdot','thumbnail_url','discount\x20code','best\x20price','cyber\x20monday','status','Error\x20reading\x20daily\x20file,\x20starting\x20fresh.','parseURL','content-length','hnrss.org','budget\x20friendly','flash\x20sale','\x20batches\x20required\x20for\x20','writable','call','casino','price\x20drop','content:encoded','--batch=','\x20|\x20Processing\x20sources\x20','contentSnippet','includes','395viUdlr','get','act\x20fast','end\x20of\x20year\x20sale','deals\x20today','error','selling\x20fast','add\x20to\x20cart','door\x20buster','isArray','meta[property=\x22og:image\x22]','../output','endsWith','sex\x20tape','meta[name=\x22description\x22]','2452384uZhvew','gift\x20ideas','promo\x20code','111486EUFpDp','now','url','best\x20deals','startsWith','configurable','top\x20picks','Scrape\x20finished.\x20Added\x20','\x20complete\x20in\x20','s.\x20Classification\x20will\x20run\x20in\x20merge\x20step.','argv','trim','limited\x20time\x20deal','\x20new\x20|\x20','topic','--total-batches=','name','ceil','querySelector','affordable\x20pick','default','xxx','then','sports\x20betting','replace','meta[name=\x22twitter:description\x22]','mkdirSync','pornography','isoDate','ðŸ”„\x20Batch\x20','extractArticle','Mozilla/5.0\x20(compatible;\x20NewsBot/1.0)','best\x20of\x202025','getOwnPropertyDescriptor','slot\x20machine','getAttribute','link','create','getMonth','./article-extractor','holiday\x20sale','text','paid\x20partnership','daily\x20deals','sort','memorial\x20day\x20sale','s.\x20Classified\x20','grab\x20it\x20now','\x20cached\x20|\x20','some','deal\x20of\x20the\x20day','sourcesData','onlyfans','voucher\x20code','toLowerCase','save\x20big','toFixed','headers','.json','Error\x20reading\x20index\x20file,\x20starting\x20fresh.','Starting\x20Aggregation\x20&\x20Classification...','selling\x20out','\x20items.','fulfilled','huge\x20savings','shop\x20now','readFileSync','hasOwnProperty','pubDate','clearance\x20sale','match','Form\x2013G','utf-8','SEC\x20filing','add','substring','24784032IaZXBK','html','enclosure','defineProperty','black\x20friday'];a4_0x2506=function(){return _0x3bcc5e;};return a4_0x2506();}function isPromotionalContent(_0x2f7194){const _0x224bf2=a4_0x1903af,_0x55f70b=_0x2f7194[_0x224bf2(0xb6)]();if(bannedKeywords[_0x224bf2(0xb1)](_0xa35b88=>_0x55f70b[_0x224bf2(0x151)](_0xa35b88[_0x224bf2(0xb6)]())))return!![];if(bannedPatterns[_0x224bf2(0xb1)](_0x2fa158=>_0x2fa158['test'](_0x2f7194)))return!![];return![];}const bannedThumbnails=['https://s.yimg.com/cv/apiv2/social/images/yahoo_default_logo-1200x1200.png'],phrasesToRemoveFromDescription=[a4_0x1903af(0xfe),a4_0x1903af(0x137)],descriptionBylinePatterns=[/^By\s+[A-Z][a-z]+\s+[A-Z][a-z]+(\s+and\s+[A-Z][a-z]+\s+[A-Z][a-z]+)?\s+[A-Z]{2,}.*?\(Reuters\)\s*-?\s*/i,/^By\s+[A-Z][a-z]+\s+[A-Z][a-z]+(\s+and\s+[A-Z][a-z]+\s+[A-Z][a-z]+)?\s+[A-Z]{2,}.*?\(AP\)\s*-?\s*/i,/^By\s+[A-Z][a-z]+\s+[A-Z][a-z]+(\s+and\s+[A-Z][a-z]+\s+[A-Z][a-z]+)?\s+[A-Z]{2,}.*?\(AFP\)\s*-?\s*/i,/^By\s+[A-Z][a-z]+\s+[A-Z][a-z]+\s*/i,/^[A-Z]{2,}[A-Z\s,]+\(Reuters\)\s*-?\s*/i,/^[A-Z]{2,}[A-Z\s,]+\(AP\)\s*-?\s*/i,/^[A-Z]{2,}[A-Z\s,]+\(AFP\)\s*-?\s*/i,/^[A-Z]{3,},?\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d{1,2}\s+\([^)]+\)\s*-?\s*/i,/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d{1,2}\s+\([^)]+\)\s*-?\s*/i];function cleanDescriptionBylines(_0x5920c4){const _0x19735a=a4_0x1903af;if(!_0x5920c4)return null;let _0x3a0278=_0x5920c4;for(const _0x53d516 of descriptionBylinePatterns){_0x3a0278=_0x3a0278['replace'](_0x53d516,'');}return _0x3a0278[_0x19735a(0x16f)]();}function a4_0xefcc(_0x45a143,_0x2d27b1){const _0x250673=a4_0x2506();return a4_0xefcc=function(_0xefcc96,_0x57ca5f){_0xefcc96=_0xefcc96-0x8f;let _0x46432e=_0x250673[_0xefcc96];return _0x46432e;},a4_0xefcc(_0x45a143,_0x2d27b1);}const phrasesToRemoveFromTitle=['Tell\x20HN:',a4_0x1903af(0xd2)],MAX_CONCURRENT_FETCHES=0x5,MAX_ITEMS_PER_SOURCE=0x64;function isRecentItem(_0x5278d4){const _0xf70f6d=a4_0x1903af;if(!_0x5278d4[_0xf70f6d(0xc4)]&&!_0x5278d4['isoDate'])return!![];try{const _0x38383d=new Date(_0x5278d4[_0xf70f6d(0xc4)]||_0x5278d4[_0xf70f6d(0x9c)]),_0x3ff2cf=new Date(),_0x27330c=new Date(_0x3ff2cf[_0xf70f6d(0x129)](),_0x3ff2cf[_0xf70f6d(0xa6)](),_0x3ff2cf[_0xf70f6d(0xec)]()),_0x24bb78=new Date(_0x27330c);return _0x24bb78['setDate'](_0x24bb78[_0xf70f6d(0xec)]()-0x1),_0x38383d>=_0x24bb78;}catch{return!![];}}function parseArgs(){const _0x50dc9b=a4_0x1903af,_0x19a078=process[_0x50dc9b(0x16e)][_0x50dc9b(0x103)](0x2);let _0x24f915=null,_0x3bc0d5=null,_0x24cd97=![];for(const _0x3ee606 of _0x19a078){if(_0x3ee606[_0x50dc9b(0x168)](_0x50dc9b(0x14e)))_0x24f915=parseInt(_0x3ee606[_0x50dc9b(0xf6)]('=')[0x1],0xa);else{if(_0x3ee606['startsWith'](_0x50dc9b(0x8f)))_0x3bc0d5=parseInt(_0x3ee606[_0x50dc9b(0xf6)]('=')[0x1],0xa);else _0x3ee606==='--test'&&(_0x24cd97=!![]);}}return{'batch':_0x24f915,'totalBatches':_0x3bc0d5,'test':_0x24cd97};}function cleanCdata(_0x17e6dc){const _0x45b8dc=a4_0x1903af;return _0x17e6dc[_0x45b8dc(0x98)](/<!\[CDATA\[|\]\]>/g,'')[_0x45b8dc(0x16f)]();}function stripHtml(_0x4cc5f1){const _0x174e67=a4_0x1903af;return(0x0,node_html_parser_1['parse'])(_0x4cc5f1)[_0x174e67(0xee)]||'';}function removePhrases(_0x64791c,_0x52fc13){const _0x2c0a3d=a4_0x1903af;if(!_0x64791c)return null;let _0x424149=_0x64791c;for(const _0xf70e2a of _0x52fc13){_0x424149=_0x424149[_0x2c0a3d(0x98)](_0xf70e2a,'')[_0x2c0a3d(0x16f)]();}return _0x424149;}function truncateDescription(_0x110cc5){const _0x583291=a4_0x1903af;if(!_0x110cc5)return null;const _0x48cbbf=_0x110cc5[_0x583291(0xf6)](/\n\s*\n/);let _0x140ea8=_0x48cbbf[0x0]||'';const _0x133628=_0x140ea8[_0x583291(0xc6)](/[^.!?]+[.!?]+|[^.!?]+$/g)||[];_0x133628['length']>0x5?_0x140ea8=_0x133628[_0x583291(0x103)](0x0,0x5)[_0x583291(0x139)]('')[_0x583291(0x16f)]():_0x140ea8=_0x133628['join']('')[_0x583291(0x16f)]();if(_0x140ea8[_0x583291(0x11a)]<_0x110cc5[_0x583291(0x11a)]&&!/[.!?]$/[_0x583291(0x12c)](_0x140ea8)){const _0x26426b=_0x140ea8[_0x583291(0xfc)]('\x20');_0x26426b>-0x1?_0x140ea8=_0x140ea8[_0x583291(0xcb)](0x0,_0x26426b)+_0x583291(0xd1):_0x140ea8=_0x140ea8+'...';}return _0x140ea8[_0x583291(0x11a)]>0x0?_0x140ea8:null;}async function isImageLargeEnough(_0x63985b){const _0x40bfec=a4_0x1903af;try{const _0x52d27b=await fetch(_0x63985b,{'method':'HEAD','signal':AbortSignal['timeout'](0x7d0)});if(!_0x52d27b['ok']){if(_0x52d27b['status']===0x194)return![];return!![];}const _0x368b20=_0x52d27b[_0x40bfec(0xb9)]['get'](_0x40bfec(0x144));if(_0x368b20){const _0x4cda98=parseInt(_0x368b20,0xa);if(_0x4cda98<0x3a98)return![];}return!![];}catch{return!![];}}async function fetchArticleMetadata(_0x24d4eb){const _0x3def91=a4_0x1903af;try{const _0x2eab5f=await fetch(_0x24d4eb,{'signal':AbortSignal['timeout'](0x3a98),'headers':{'User-Agent':_0x3def91(0x9f),'Accept':_0x3def91(0x123)}});if(!_0x2eab5f['ok'])throw new Error(_0x3def91(0xea)+_0x2eab5f['status']);const _0x26a545=await _0x2eab5f[_0x3def91(0xa9)](),_0x1256b0=(0x0,node_html_parser_1[_0x3def91(0xd4)])(_0x26a545);let _0x2b289b=null;const _0x57d1e9=['meta[property=\x22og:description\x22]',_0x3def91(0x99),_0x3def91(0x160)];for(const _0x4fd5ac of _0x57d1e9){const _0x5233ff=_0x1256b0[_0x3def91(0x92)](_0x4fd5ac);if(_0x5233ff&&_0x5233ff['getAttribute']('content')){_0x2b289b=stripHtml(_0x5233ff[_0x3def91(0xa3)]('content'))||null,_0x2b289b=removePhrases(_0x2b289b,phrasesToRemoveFromDescription),_0x2b289b=cleanDescriptionBylines(_0x2b289b),_0x2b289b=truncateDescription(_0x2b289b);break;}}let _0xd06da=null;const _0x56e0d6=[_0x3def91(0x15c),'meta[name=\x22twitter:image\x22]'];for(const _0x3927e5 of _0x56e0d6){const _0x167ca2=_0x1256b0[_0x3def91(0x92)](_0x3927e5);if(_0x167ca2&&_0x167ca2['getAttribute'](_0x3def91(0x113))){_0xd06da=_0x167ca2[_0x3def91(0xa3)](_0x3def91(0x113));break;}}return{'description':_0x2b289b,'thumbnail_url':_0xd06da,'html':_0x26a545};}catch{return{'description':null,'thumbnail_url':null,'html':null};}}let errorLog=[];function logError(_0x151e77,_0x2979ae,_0x250ba6){const _0x26a56d=a4_0x1903af;errorLog[_0x26a56d(0x115)]({'source':_0x151e77,'url':_0x2979ae,'error':_0x250ba6,'timestamp':new Date()[_0x26a56d(0xff)]()});}function saveErrorLog(){const _0x42d857=a4_0x1903af;if(errorLog[_0x42d857(0x11a)]===0x0)return;let _0x3d89dd=[];if(fs[_0x42d857(0xda)](ERROR_LOG_FILE))try{_0x3d89dd=JSON[_0x42d857(0xd4)](fs['readFileSync'](ERROR_LOG_FILE,_0x42d857(0xc8)));}catch{}const _0x140722=[..._0x3d89dd,...errorLog]['slice'](-0x64);fs['writeFileSync'](ERROR_LOG_FILE,JSON[_0x42d857(0xdd)](_0x140722,null,0x2),_0x42d857(0xc8));}async function processItem(_0x2c0c42,_0x3070c7){const _0xf385fa=a4_0x1903af;let _0x1b8826=_0x2c0c42[_0xf385fa(0x133)]?stripHtml(cleanCdata(_0x2c0c42[_0xf385fa(0x133)])):null;_0x1b8826=removePhrases(_0x1b8826,phrasesToRemoveFromTitle);let _0x53c31a=_0x2c0c42[_0xf385fa(0xa4)],_0x471c0d=null;if(_0x3070c7['url'][_0xf385fa(0x151)](_0xf385fa(0x145))){if(_0x2c0c42[_0xf385fa(0x113)]){const _0x1ec1ca=(0x0,node_html_parser_1[_0xf385fa(0xd4)])(_0x2c0c42[_0xf385fa(0x113)]),_0x11bdec=_0x1ec1ca['querySelector']('p\x20a');_0x11bdec&&_0x11bdec[_0xf385fa(0xa9)][_0xf385fa(0x168)]('Article\x20URL:')&&(_0x53c31a=_0x11bdec[_0xf385fa(0xa3)](_0xf385fa(0x12a)));}_0x471c0d=null;}else _0x2c0c42[_0xf385fa(0x150)]&&(_0x471c0d=stripHtml(cleanCdata(_0x2c0c42[_0xf385fa(0x150)]))||null,_0x471c0d=removePhrases(_0x471c0d,phrasesToRemoveFromDescription),_0x471c0d=cleanDescriptionBylines(_0x471c0d),_0x471c0d=truncateDescription(_0x471c0d));!_0x471c0d&&_0x2c0c42[_0xf385fa(0x14d)]&&(_0x471c0d=stripHtml(cleanCdata(_0x2c0c42[_0xf385fa(0x14d)]))||null,_0x471c0d=removePhrases(_0x471c0d,phrasesToRemoveFromDescription),_0x471c0d=cleanDescriptionBylines(_0x471c0d),_0x471c0d=truncateDescription(_0x471c0d));_0x3070c7[_0xf385fa(0x166)]==='https://rss.slashdot.org/Slashdot/slashdot'&&_0x2c0c42[_0xf385fa(0xe3)]&&(_0x471c0d=stripHtml(cleanCdata(_0x2c0c42[_0xf385fa(0xe3)]))||null,_0x471c0d=removePhrases(_0x471c0d,phrasesToRemoveFromDescription),_0x471c0d=cleanDescriptionBylines(_0x471c0d),_0x471c0d=truncateDescription(_0x471c0d));if(!_0x1b8826||!_0x53c31a)return null;const _0x188d76=_0x1b8826+'\x20'+(_0x2c0c42['contentSnippet']?stripHtml(_0x2c0c42['contentSnippet']):'')+'\x20'+(_0x2c0c42['description']?stripHtml(_0x2c0c42[_0xf385fa(0xe3)]):'');if(isPromotionalContent(_0x188d76))return null;let _0x2fa768=_0x2c0c42[_0xf385fa(0xce)]?_0x2c0c42[_0xf385fa(0xce)]['url']:null;if(_0x2c0c42[_0xf385fa(0xd7)]){if(Array[_0xf385fa(0x15b)](_0x2c0c42['media:content'])){const _0x169b5e=_0x2c0c42['media:content'][_0xf385fa(0xac)]((_0x475d09,_0x5c942c)=>{const _0x582c79=_0xf385fa,_0x1b0453=_0x475d09['$']&&_0x475d09['$'][_0x582c79(0x116)]?parseInt(_0x475d09['$'][_0x582c79(0x116)],0xa):0x0,_0x38c4a0=_0x5c942c['$']&&_0x5c942c['$'][_0x582c79(0x116)]?parseInt(_0x5c942c['$'][_0x582c79(0x116)],0xa):0x0;return _0x38c4a0-_0x1b0453;}),_0x1a4a14=_0x169b5e[0x0];if(_0x1a4a14){const _0x25b856=_0x1a4a14['$']&&_0x1a4a14['$']['width']?parseInt(_0x1a4a14['$'][_0xf385fa(0x116)],0xa):0x0;if(_0x25b856===0x0||_0x25b856>=0x12c){if(_0x1a4a14['$']&&_0x1a4a14['$'][_0xf385fa(0x166)])_0x2fa768=_0x1a4a14['$'][_0xf385fa(0x166)];else{if(_0x1a4a14[_0xf385fa(0x166)])_0x2fa768=_0x1a4a14['url'];}}}}else{const _0x1d9321=_0x2c0c42[_0xf385fa(0xd7)],_0x2e1ade=_0x1d9321['$']&&_0x1d9321['$'][_0xf385fa(0x116)]?parseInt(_0x1d9321['$'][_0xf385fa(0x116)],0xa):_0x1d9321[_0xf385fa(0x116)]?parseInt(_0x1d9321['width'],0xa):0x0;if(_0x2e1ade===0x0||_0x2e1ade>=0x12c){if(_0x1d9321['$']&&_0x1d9321['$'][_0xf385fa(0x166)])_0x2fa768=_0x1d9321['$'][_0xf385fa(0x166)];else{if(_0x1d9321[_0xf385fa(0x166)])_0x2fa768=_0x1d9321[_0xf385fa(0x166)];}}}}if(!_0x2fa768&&_0x2c0c42[_0xf385fa(0xdb)]){if(_0x2c0c42[_0xf385fa(0xdb)]['$']&&_0x2c0c42[_0xf385fa(0xdb)]['$'][_0xf385fa(0x166)])_0x2fa768=_0x2c0c42[_0xf385fa(0xdb)]['$']['url'];else _0x2c0c42[_0xf385fa(0xdb)][_0xf385fa(0x166)]&&(_0x2fa768=_0x2c0c42[_0xf385fa(0xdb)][_0xf385fa(0x166)]);}_0x2fa768&&bannedThumbnails[_0xf385fa(0x151)](_0x2fa768)&&(_0x2fa768=null);let _0x288ea5=null,_0x8f5809={'fullText':null,'readingTime':0x0,'keywords':[],'qualityScore':0x0};const _0x77c7ed=!_0x471c0d||!_0x2fa768||_0x3070c7[_0xf385fa(0x166)][_0xf385fa(0x151)](_0xf385fa(0x145))||_0x3070c7[_0xf385fa(0x166)]===_0xf385fa(0x13c)||_0x3070c7[_0xf385fa(0x166)]==='https://www.investing.com/rss/news.rss';try{const _0x129d5c=await fetchArticleMetadata(_0x53c31a);_0x288ea5=_0x129d5c[_0xf385fa(0xcd)],!_0x471c0d&&(_0x471c0d=_0x129d5c[_0xf385fa(0xe3)]),!_0x2fa768&&(_0x2fa768=_0x129d5c[_0xf385fa(0x13d)]);}catch(_0x52909a){logError(_0x3070c7[_0xf385fa(0x90)],_0x53c31a,_0x52909a['message']||_0xf385fa(0xf9));}if(_0x288ea5){_0x8f5809=(0x0,article_extractor_1[_0xf385fa(0x9e)])(_0x288ea5,_0x53c31a);if(_0x8f5809['fullText']&&isPromotionalContent(_0x8f5809['fullText']))return console[_0xf385fa(0x11b)]('[Filter]\x20Blocked\x20by\x20content\x20check:\x20'+_0x1b8826),null;}_0x2fa768&&bannedThumbnails[_0xf385fa(0x151)](_0x2fa768)&&(_0x2fa768=null);if(_0x2fa768){const _0x23ccc5=await isImageLargeEnough(_0x2fa768);!_0x23ccc5&&(_0x2fa768=null);}if(!_0x2fa768)return null;const _0x28bc73=_0x1b8826[_0xf385fa(0xb6)]()[_0xf385fa(0x98)](/[^a-z0-9\s]/g,'')[_0xf385fa(0x16f)]()['replace'](/\s+/g,'-');let _0x5a76b0=_0x28bc73[_0xf385fa(0xcb)](0x0,0x3c);_0x5a76b0[_0xf385fa(0x15e)]('-')&&(_0x5a76b0=_0x5a76b0['slice'](0x0,-0x1));!_0x5a76b0&&(_0x5a76b0='post-'+Date[_0xf385fa(0x165)]());const _0x59fbd3=(0x0,sources_1['resolveTopicFromUrl'])(_0x53c31a,_0x3070c7[_0xf385fa(0x90)],_0x3070c7[_0xf385fa(0x172)]||_0xf385fa(0x105));return{'slug':_0x5a76b0,'title':_0x1b8826,'description':_0x471c0d,'fullText':_0x8f5809[_0xf385fa(0xd3)],'readingTime':_0x8f5809[_0xf385fa(0x128)],'keywords':_0x8f5809['keywords'],'qualityScore':_0x8f5809['qualityScore'],'link':_0x53c31a,'thumbnail_url':_0x2fa768,'created_at':new Date()['toISOString'](),'topic':_0x59fbd3};}async function processInParallel(_0x27d928,_0xc871df,_0x476f9c){const _0x452bd7=a4_0x1903af,_0x1216e9=[],_0x1bfc75=[];for(const _0x191f03 of _0x27d928){const _0x2597a1=_0xc871df(_0x191f03)[_0x452bd7(0x96)](_0x1f11e0=>{_0x1216e9['push'](_0x1f11e0);})[_0x452bd7(0x10f)](()=>{_0x1216e9['push'](null);});_0x1bfc75[_0x452bd7(0x115)](_0x2597a1);if(_0x1bfc75[_0x452bd7(0x11a)]>=_0x476f9c){await Promise['race'](_0x1bfc75);const _0x5a583f=_0x1bfc75['filter'](_0x3c6e75=>{let _0x1cc705=![];return _0x3c6e75['then'](()=>{_0x1cc705=!![];})['catch'](()=>{_0x1cc705=!![];}),!_0x1cc705;});_0x1bfc75[_0x452bd7(0x11a)]=0x0,_0x1bfc75[_0x452bd7(0x115)](..._0x5a583f);}}return await Promise['all'](_0x1bfc75),_0x1216e9;}async function processBatch(_0xe86a3,_0x1bbad3,_0x5f10fe=MAX_CONCURRENT_FETCHES){const _0x5dfe9e=a4_0x1903af,_0x1b5403=[];for(let _0x5b983c=0x0;_0x5b983c<_0xe86a3[_0x5dfe9e(0x11a)];_0x5b983c+=_0x5f10fe){const _0x462fda=_0xe86a3[_0x5dfe9e(0x103)](_0x5b983c,_0x5b983c+_0x5f10fe),_0x594fa6=await Promise['allSettled'](_0x462fda[_0x5dfe9e(0x107)](_0x4b5d39=>_0x1bbad3(_0x4b5d39)));for(const _0x4a6a76 of _0x594fa6){_0x4a6a76[_0x5dfe9e(0x141)]===_0x5dfe9e(0xbf)?_0x1b5403['push'](_0x4a6a76['value']):_0x1b5403[_0x5dfe9e(0x115)](null);}}return _0x1b5403;}async function run(){const _0x37ec18=a4_0x1903af,{batch:_0x430736,totalBatches:_0x2305bf,test:_0x202848}=parseArgs();console[_0x37ec18(0x11b)](_0x37ec18(0xf8));_0x430736!==null&&_0x2305bf!==null&&console[_0x37ec18(0x11b)](_0x37ec18(0xf1)+(_0x430736+0x1)+_0x37ec18(0x119)+_0x2305bf);const _0x1e696b=Date[_0x37ec18(0x165)](),_0x39e8c8=new Date()['toISOString']()[_0x37ec18(0xf6)]('T')[0x0],_0x30b49c=path[_0x37ec18(0x139)](OUTPUT_DIR,_0x39e8c8+_0x37ec18(0xba));let _0xdf3c07=[];if(fs[_0x37ec18(0xda)](INDEX_FILE))try{_0xdf3c07=JSON['parse'](fs[_0x37ec18(0xc2)](INDEX_FILE,'utf-8'));}catch{console['error'](_0x37ec18(0xbb));}const _0x201337=new Set(_0xdf3c07),_0x4ac053=new Set();let _0x36f548=[];if(fs[_0x37ec18(0xda)](_0x30b49c))try{_0x36f548=JSON[_0x37ec18(0xd4)](fs[_0x37ec18(0xc2)](_0x30b49c,_0x37ec18(0xc8)));for(const _0x144819 of _0x36f548){_0x144819['fullText']&&_0x4ac053[_0x37ec18(0xca)](_0x144819['fullText'][_0x37ec18(0xcb)](0x0,0x64));}}catch{console[_0x37ec18(0x157)](_0x37ec18(0x142));}let _0xe20df8=[...sources_1[_0x37ec18(0xb3)]],_0x3b73f1=null;if(_0x202848)console[_0x37ec18(0x11b)](_0x37ec18(0xe2)),_0xe20df8=sources_1[_0x37ec18(0xb3)][_0x37ec18(0x103)](0x0,0x1),_0x3b73f1=0xa;else{if(_0x430736!==null&&_0x2305bf!==null){const _0x26f938=0x5,_0x51e432=Math[_0x37ec18(0x111)](_0x2305bf,Math['max'](0x1,Math[_0x37ec18(0x91)](sources_1['sourcesData'][_0x37ec18(0x11a)]/_0x26f938)));if(_0x430736>=_0x51e432){console[_0x37ec18(0x11b)]('â­ï¸\x20Batch\x20'+(_0x430736+0x1)+_0x37ec18(0xd8)+_0x51e432+_0x37ec18(0x148)+sources_1[_0x37ec18(0xb3)][_0x37ec18(0x11a)]+_0x37ec18(0xfa));return;}const _0x1efaf4=Math[_0x37ec18(0x91)](sources_1[_0x37ec18(0xb3)][_0x37ec18(0x11a)]/_0x51e432),_0x15a83d=_0x430736*_0x1efaf4,_0x506022=Math[_0x37ec18(0x111)](_0x15a83d+_0x1efaf4,sources_1[_0x37ec18(0xb3)][_0x37ec18(0x11a)]);_0xe20df8=sources_1[_0x37ec18(0xb3)][_0x37ec18(0x103)](_0x15a83d,_0x506022),console[_0x37ec18(0x11b)](_0x37ec18(0x9d)+(_0x430736+0x1)+'/'+_0x51e432+_0x37ec18(0x14f)+(_0x15a83d+0x1)+'-'+_0x506022+_0x37ec18(0x119)+sources_1['sourcesData']['length']);}}let _0x4067b5=0x0;for(const _0x50026c of _0xe20df8){console[_0x37ec18(0x11b)](_0x37ec18(0xf7)+_0x50026c['name']);try{const _0x4730fa=await parser[_0x37ec18(0x143)](_0x50026c[_0x37ec18(0x166)]),_0x34150e=_0x3b73f1||MAX_ITEMS_PER_SOURCE,_0x11abc9=_0x4730fa['items'][_0x37ec18(0xfb)](isRecentItem)['slice'](0x0,_0x34150e),_0x3f0424=_0x4730fa[_0x37ec18(0x118)][_0x37ec18(0x11a)]-_0x11abc9[_0x37ec18(0x11a)]-(_0x4730fa[_0x37ec18(0x118)][_0x37ec18(0x11a)]>_0x34150e?_0x4730fa[_0x37ec18(0x118)][_0x37ec18(0x11a)]-_0x34150e:0x0),_0x2fdba8=_0x11abc9[_0x37ec18(0xfb)](_0x34bcc5=>{const _0x273086=_0x37ec18,_0x5671b6=_0x34bcc5[_0x273086(0xa4)];return _0x5671b6&&!_0x201337[_0x273086(0xeb)](_0x5671b6);}),_0x25bf0b=_0x11abc9['length']-_0x2fdba8['length'];console[_0x37ec18(0x11b)]('\x20\x20'+_0x2fdba8['length']+_0x37ec18(0x171)+_0x25bf0b+_0x37ec18(0xb0)+_0x3f0424+_0x37ec18(0x132));const _0x34d127=await processBatch(_0x2fdba8,_0x1d3d40=>processItem(_0x1d3d40,_0x50026c),MAX_CONCURRENT_FETCHES);for(const _0x4d2721 of _0x34d127){if(_0x4d2721&&_0x4d2721[_0x37ec18(0xa4)]){if(_0x4d2721['fullText']){const _0x46ce1e=_0x4d2721[_0x37ec18(0xd3)][_0x37ec18(0xcb)](0x0,0x64);if(_0x4ac053['has'](_0x46ce1e)){console[_0x37ec18(0x11b)]('\x20\x20Skipped\x20duplicate:\x20'+_0x4d2721[_0x37ec18(0x133)][_0x37ec18(0xcb)](0x0,0x28)+_0x37ec18(0xd1));continue;}_0x4ac053[_0x37ec18(0xca)](_0x46ce1e);}_0x36f548[_0x37ec18(0x115)](_0x4d2721),_0x201337[_0x37ec18(0xca)](_0x4d2721[_0x37ec18(0xa4)]),_0x4067b5++;}}}catch(_0x135356){console['error'](_0x37ec18(0xd9)+_0x50026c[_0x37ec18(0x90)]+':',_0x135356[_0x37ec18(0x10d)]),logError(_0x50026c['name'],_0x50026c[_0x37ec18(0x166)],_0x135356['message']||_0x37ec18(0x127));}}fs['writeFileSync'](_0x30b49c,JSON[_0x37ec18(0xdd)](_0x36f548,null,0x2),_0x37ec18(0xc8)),fs['writeFileSync'](INDEX_FILE,JSON['stringify'](Array[_0x37ec18(0xf5)](_0x201337),null,0x2),'utf-8'),saveErrorLog(),console[_0x37ec18(0x11b)](_0x37ec18(0x16b)+_0x4067b5+_0x37ec18(0xbe));if(_0x430736===null){console[_0x37ec18(0x11b)](_0x37ec18(0xbc));const _0x3e7657=new classifier_1['Classifier'](),_0x16a640=new bucket_manager_1['BucketManager'](OUTPUT_DIR);await _0x16a640[_0x37ec18(0x11c)]();let _0x10c497=0x0;for(const _0x24616a of _0x36f548){const _0x4a7ce3=_0x3e7657[_0x37ec18(0x135)](_0x24616a[_0x37ec18(0x133)],_0x24616a[_0x37ec18(0xe3)]);if(_0x4a7ce3[_0x37ec18(0x11a)]>0x0){for(const _0xb4a642 of _0x4a7ce3){_0x16a640[_0x37ec18(0xe1)](_0x24616a,_0xb4a642);}_0x10c497++;}}await _0x16a640[_0x37ec18(0xd6)]();const _0x116bea=Date[_0x37ec18(0x165)]();console[_0x37ec18(0x11b)](_0x37ec18(0xde)+((_0x116bea-_0x1e696b)/0x3e8)['toFixed'](0x2)+_0x37ec18(0xae)+_0x10c497+'\x20posts.');}else{const _0x469b05=Date[_0x37ec18(0x165)]();console['log'](_0x37ec18(0x12d)+_0x430736+_0x37ec18(0x16c)+((_0x469b05-_0x1e696b)/0x3e8)[_0x37ec18(0xb8)](0x2)+_0x37ec18(0x16d));}}run()['catch'](console[a4_0x1903af(0x157)]);
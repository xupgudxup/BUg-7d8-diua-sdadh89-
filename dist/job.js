'use strict';const a0_0x23f015=a0_0x4bc9;(function(_0x5ae9d3,_0x4d27d3){const _0x300f27=a0_0x4bc9,_0x221ea9=_0x5ae9d3();while(!![]){try{const _0x4d9e3d=-parseInt(_0x300f27(0x24d))/0x1*(-parseInt(_0x300f27(0x209))/0x2)+parseInt(_0x300f27(0x1f0))/0x3+parseInt(_0x300f27(0x24b))/0x4*(-parseInt(_0x300f27(0x1ee))/0x5)+parseInt(_0x300f27(0x21b))/0x6+parseInt(_0x300f27(0x23e))/0x7*(parseInt(_0x300f27(0x211))/0x8)+parseInt(_0x300f27(0x220))/0x9*(-parseInt(_0x300f27(0x1e8))/0xa)+-parseInt(_0x300f27(0x205))/0xb;if(_0x4d9e3d===_0x4d27d3)break;else _0x221ea9['push'](_0x221ea9['shift']());}catch(_0x1de239){_0x221ea9['push'](_0x221ea9['shift']());}}}(a0_0x4a3f,0x8f150));var __createBinding=this&&this['__createBinding']||(Object[a0_0x23f015(0x213)]?function(_0x19e064,_0x495695,_0x36c8d6,_0x21e189){const _0x29d477=a0_0x23f015;if(_0x21e189===undefined)_0x21e189=_0x36c8d6;var _0x449c08=Object[_0x29d477(0x253)](_0x495695,_0x36c8d6);(!_0x449c08||('get'in _0x449c08?!_0x495695[_0x29d477(0x25c)]:_0x449c08[_0x29d477(0x236)]||_0x449c08[_0x29d477(0x203)]))&&(_0x449c08={'enumerable':!![],'get':function(){return _0x495695[_0x36c8d6];}}),Object[_0x29d477(0x224)](_0x19e064,_0x21e189,_0x449c08);}:function(_0x4d2e44,_0x3f09ad,_0x254674,_0x540eee){if(_0x540eee===undefined)_0x540eee=_0x254674;_0x4d2e44[_0x540eee]=_0x3f09ad[_0x254674];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a0_0x23f015(0x213)]?function(_0x58ce20,_0x3899e1){const _0x5f10a1=a0_0x23f015;Object[_0x5f10a1(0x224)](_0x58ce20,_0x5f10a1(0x1ed),{'enumerable':!![],'value':_0x3899e1});}:function(_0x387f53,_0x2a2bf1){const _0x35e8a5=a0_0x23f015;_0x387f53[_0x35e8a5(0x1ed)]=_0x2a2bf1;}),__importStar=this&&this[a0_0x23f015(0x25d)]||(function(){var _0x1a8b9b=function(_0x27e025){return _0x1a8b9b=Object['getOwnPropertyNames']||function(_0x4cfa3b){const _0x349ca6=a0_0x4bc9;var _0x345f4e=[];for(var _0x5d8566 in _0x4cfa3b)if(Object[_0x349ca6(0x1e9)][_0x349ca6(0x227)][_0x349ca6(0x216)](_0x4cfa3b,_0x5d8566))_0x345f4e[_0x345f4e[_0x349ca6(0x210)]]=_0x5d8566;return _0x345f4e;},_0x1a8b9b(_0x27e025);};return function(_0x2d3412){const _0x23dd6d=a0_0x4bc9;if(_0x2d3412&&_0x2d3412[_0x23dd6d(0x25c)])return _0x2d3412;var _0x5746f6={};if(_0x2d3412!=null){for(var _0x19c19b=_0x1a8b9b(_0x2d3412),_0x2a5306=0x0;_0x2a5306<_0x19c19b[_0x23dd6d(0x210)];_0x2a5306++)if(_0x19c19b[_0x2a5306]!==_0x23dd6d(0x1ed))__createBinding(_0x5746f6,_0x2d3412,_0x19c19b[_0x2a5306]);}return __setModuleDefault(_0x5746f6,_0x2d3412),_0x5746f6;};}()),__awaiter=this&&this[a0_0x23f015(0x221)]||function(_0x478c96,_0x1684e9,_0x1dfac1,_0x6e12f){function _0x4c196c(_0x3ffc48){return _0x3ffc48 instanceof _0x1dfac1?_0x3ffc48:new _0x1dfac1(function(_0x348a30){_0x348a30(_0x3ffc48);});}return new(_0x1dfac1||(_0x1dfac1=Promise))(function(_0x52771d,_0x34b624){const _0x4600ce=a0_0x4bc9;function _0xba2229(_0x5ba427){try{_0x5a6c8b(_0x6e12f['next'](_0x5ba427));}catch(_0x561dde){_0x34b624(_0x561dde);}}function _0x2f5588(_0x3d22cf){const _0x1a0b56=a0_0x4bc9;try{_0x5a6c8b(_0x6e12f[_0x1a0b56(0x22e)](_0x3d22cf));}catch(_0x8c234d){_0x34b624(_0x8c234d);}}function _0x5a6c8b(_0x1258c3){const _0x16d65d=a0_0x4bc9;_0x1258c3[_0x16d65d(0x233)]?_0x52771d(_0x1258c3[_0x16d65d(0x1fd)]):_0x4c196c(_0x1258c3[_0x16d65d(0x1fd)])[_0x16d65d(0x21d)](_0xba2229,_0x2f5588);}_0x5a6c8b((_0x6e12f=_0x6e12f[_0x4600ce(0x215)](_0x478c96,_0x1684e9||[]))[_0x4600ce(0x25a)]());});},__importDefault=this&&this['__importDefault']||function(_0x144c6a){const _0x2da802=a0_0x23f015;return _0x144c6a&&_0x144c6a[_0x2da802(0x25c)]?_0x144c6a:{'default':_0x144c6a};};function a0_0x4a3f(){const _0x14d802=['items','20Jycals','prototype','toISOString','(Source:\x20Bloomberg)','topic','default','1175GXgbkT','tech.yahoo.com','1771638SVpZZQ','add','title','existsSync','autos.yahoo.com','gaming','test','substring','now','mkdirSync','error','https://www.investing.com/rss/news.rss','getAttribute','value','utf-8','path','Form\x2013F','meta[property=\x22og:image\x22]','textContent','configurable','push','8536275ymyLbu','tech','Processing\x20source:\x20','meta[name=\x22description\x22]','166qyjyzP','https://hnrss.org/frontpage.atom','meta[name=\x22twitter:image\x22]','games','parse','gambling','Tell\x20HN:','length','2161256pAqBoi','sourcesData','create','startsWith','apply','call','sex','trim','Article\x20URL:','max_items','3452514GMZopU','replace','then','../output','pubDate','4141161bIpcji','__awaiter','join','yro','defineProperty','split','url','hasOwnProperty','description','from','includes','contentSnippet','science','slice','throw','readFileSync','some','porn','querySelector','done','writeFileSync','\x20new\x20items.\x20Saved\x20to\x20','writable','link','name','news','content','Read\x20more\x20of\x20this\x20story\x20at\x20Slashdot.','Only\x20Fans','Starting\x20job...','14SnCubb','index.json','Error\x20processing\x20item\x20from\x20','text','enclosure','catch','status','Form\x20144','lastIndexOf','endsWith','Job\x20finished.\x20Added\x20','...','post-','2148XTMxos','log','8461iVaVkG','Error\x20reading\x20daily\x20file,\x20starting\x20fresh.','HTTP\x20error!\x20status:\x20','href','./sources','Form\x2013G','getOwnPropertyDescriptor','stringify','thumbnail_url','Show\x20HN:','https://rss.slashdot.org/Slashdot/slashdot','match','health','next','p\x20a','__esModule','__importStar','media:content','rss-parser','toLowerCase','timeout'];a0_0x4a3f=function(){return _0x14d802;};return a0_0x4a3f();}Object['defineProperty'](exports,a0_0x23f015(0x25c),{'value':!![]});const fs=__importStar(require('fs')),path=__importStar(require(a0_0x23f015(0x1ff))),rss_parser_1=__importDefault(require(a0_0x23f015(0x1e4))),node_html_parser_1=require('node-html-parser'),sources_1=require(a0_0x23f015(0x251)),parser=new rss_parser_1[(a0_0x23f015(0x1ed))](),OUTPUT_DIR=path[a0_0x23f015(0x222)](__dirname,a0_0x23f015(0x21e));!fs[a0_0x23f015(0x1f3)](OUTPUT_DIR)&&fs[a0_0x23f015(0x1f9)](OUTPUT_DIR,{'recursive':!![]});const INDEX_FILE=path[a0_0x23f015(0x222)](OUTPUT_DIR,a0_0x23f015(0x23f)),bannedKeywords=[a0_0x23f015(0x23c),a0_0x23f015(0x231),a0_0x23f015(0x217),a0_0x23f015(0x20e),a0_0x23f015(0x200),a0_0x23f015(0x252),a0_0x23f015(0x245)],phrasesToRemoveFromDescription=[a0_0x23f015(0x1eb),a0_0x23f015(0x23b)],phrasesToRemoveFromTitle=[a0_0x23f015(0x20f),a0_0x23f015(0x256)];function cleanCdata(_0x55ac19){const _0x5e8380=a0_0x23f015;return _0x55ac19[_0x5e8380(0x21c)](/<!\[CDATA\[|\]\]>/g,'')[_0x5e8380(0x218)]();}function stripHtml(_0x3d50d8){const _0x375437=a0_0x23f015;return(0x0,node_html_parser_1[_0x375437(0x20d)])(_0x3d50d8)[_0x375437(0x202)]||'';}function removePhrases(_0x511d46,_0x161a97){const _0x571e60=a0_0x23f015;if(!_0x511d46)return null;let _0x608141=_0x511d46;for(const _0x16839e of _0x161a97){_0x608141=_0x608141[_0x571e60(0x21c)](_0x16839e,'')['trim']();}return _0x608141;}function truncateDescription(_0x4cb0e8){const _0x331ade=a0_0x23f015;if(!_0x4cb0e8)return null;const _0x35478e=_0x4cb0e8[_0x331ade(0x225)](/\n\s*\n/);let _0x2021c3=_0x35478e[0x0]||'';const _0xbe40ec=_0x2021c3['match'](/[^.!?]+[.!?]+|[^.!?]+$/g)||[];_0xbe40ec[_0x331ade(0x210)]>0x5?_0x2021c3=_0xbe40ec[_0x331ade(0x22d)](0x0,0x5)['join']('')[_0x331ade(0x218)]():_0x2021c3=_0xbe40ec[_0x331ade(0x222)]('')[_0x331ade(0x218)]();if(_0x2021c3[_0x331ade(0x210)]<_0x4cb0e8[_0x331ade(0x210)]&&!/[.!?]$/[_0x331ade(0x1f6)](_0x2021c3)){const _0x2630d9=_0x2021c3[_0x331ade(0x246)]('\x20');_0x2630d9>-0x1?_0x2021c3=_0x2021c3[_0x331ade(0x1f7)](0x0,_0x2630d9)+_0x331ade(0x249):_0x2021c3=_0x2021c3+_0x331ade(0x249);}return _0x2021c3[_0x331ade(0x210)]>0x0?_0x2021c3:null;}function fetchArticleMetadata(_0x5c215a){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x580001=a0_0x4bc9;try{const _0x5e134a=yield fetch(_0x5c215a,{'signal':AbortSignal[_0x580001(0x1e6)](0x3a98)});if(!_0x5e134a['ok'])throw new Error(_0x580001(0x24f)+_0x5e134a[_0x580001(0x244)]);const _0x858ed4=yield _0x5e134a[_0x580001(0x241)](),_0x4255d0=(0x0,node_html_parser_1[_0x580001(0x20d)])(_0x858ed4);let _0x516e7a=null;const _0x27b8b8=['meta[property=\x22og:description\x22]','meta[name=\x22twitter:description\x22]',_0x580001(0x208)];for(const _0x4b76f5 of _0x27b8b8){const _0x16af3e=_0x4255d0[_0x580001(0x232)](_0x4b76f5);if(_0x16af3e&&_0x16af3e[_0x580001(0x1fc)](_0x580001(0x23a))){_0x516e7a=stripHtml(_0x16af3e[_0x580001(0x1fc)](_0x580001(0x23a)))||null,_0x516e7a=removePhrases(_0x516e7a,phrasesToRemoveFromDescription),_0x516e7a=truncateDescription(_0x516e7a);break;}}let _0x22fe7a=null;const _0x2dbb0c=[_0x580001(0x201),_0x580001(0x20b)];for(const _0x300242 of _0x2dbb0c){const _0x456df0=_0x4255d0['querySelector'](_0x300242);if(_0x456df0&&_0x456df0[_0x580001(0x1fc)]('content')){_0x22fe7a=_0x456df0[_0x580001(0x1fc)](_0x580001(0x23a));break;}}return{'description':_0x516e7a,'thumbnail_url':_0x22fe7a};}catch(_0x20a9d2){return{'description':null,'thumbnail_url':null};}});}function processItem(_0x25df5f,_0x3cc6d1){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x31761d=a0_0x4bc9;let _0x2f212e=_0x25df5f[_0x31761d(0x1f2)]?cleanCdata(_0x25df5f[_0x31761d(0x1f2)]):null;_0x2f212e=removePhrases(_0x2f212e,phrasesToRemoveFromTitle);let _0x22ff18=_0x25df5f[_0x31761d(0x237)],_0x439924=null;if(_0x3cc6d1[_0x31761d(0x226)]===_0x31761d(0x20a)){if(_0x25df5f[_0x31761d(0x23a)]){const _0x437ba2=(0x0,node_html_parser_1[_0x31761d(0x20d)])(_0x25df5f[_0x31761d(0x23a)]),_0x28d4a6=_0x437ba2[_0x31761d(0x232)](_0x31761d(0x25b));_0x28d4a6&&_0x28d4a6[_0x31761d(0x241)][_0x31761d(0x214)](_0x31761d(0x219))&&(_0x22ff18=_0x28d4a6[_0x31761d(0x1fc)](_0x31761d(0x250)));}_0x439924=null;}else _0x25df5f[_0x31761d(0x22b)]&&(_0x439924=stripHtml(cleanCdata(_0x25df5f[_0x31761d(0x22b)]))||null,_0x439924=removePhrases(_0x439924,phrasesToRemoveFromDescription),_0x439924=truncateDescription(_0x439924));_0x3cc6d1[_0x31761d(0x226)]===_0x31761d(0x257)&&_0x25df5f[_0x31761d(0x228)]&&(_0x439924=stripHtml(cleanCdata(_0x25df5f['description']))||null,_0x439924=removePhrases(_0x439924,phrasesToRemoveFromDescription),_0x439924=truncateDescription(_0x439924));if(!_0x2f212e||!_0x22ff18)return null;const _0x49a62f=(_0x2f212e+'\x20'+(_0x25df5f['contentSnippet']?stripHtml(_0x25df5f[_0x31761d(0x22b)]):'')+'\x20'+(_0x25df5f[_0x31761d(0x228)]?stripHtml(_0x25df5f[_0x31761d(0x228)]):''))[_0x31761d(0x1e5)]();if(bannedKeywords[_0x31761d(0x230)](_0x3e4854=>_0x49a62f['includes'](_0x3e4854['toLowerCase']())))return null;const _0x1bfffd=_0x25df5f[_0x31761d(0x21f)]?new Date(_0x25df5f[_0x31761d(0x21f)])[_0x31761d(0x1ea)]():new Date()['toISOString']();let _0x577f44=_0x25df5f[_0x31761d(0x242)]?_0x25df5f[_0x31761d(0x242)][_0x31761d(0x226)]:null;_0x25df5f['media:content']&&_0x25df5f['media:content']['$']&&_0x25df5f[_0x31761d(0x25e)]['$']['url']&&(_0x577f44=_0x25df5f[_0x31761d(0x25e)]['$']['url']);if(!_0x439924||!_0x577f44||_0x3cc6d1[_0x31761d(0x226)]===_0x31761d(0x20a)||_0x3cc6d1[_0x31761d(0x226)]==='https://rss.slashdot.org/Slashdot/slashdot'||_0x3cc6d1[_0x31761d(0x226)]===_0x31761d(0x1fb)){const _0x5c99a5=yield fetchArticleMetadata(_0x22ff18);!_0x439924&&(_0x439924=_0x5c99a5[_0x31761d(0x228)]),!_0x577f44&&(_0x577f44=_0x5c99a5[_0x31761d(0x255)]);}if(!_0x577f44)return null;const _0x2f6b80=_0x2f212e[_0x31761d(0x1e5)]()[_0x31761d(0x21c)](/[^a-z0-9\s]/g,'')['trim']()['replace'](/\s+/g,'-');let _0x18d94e=_0x2f6b80[_0x31761d(0x1f7)](0x0,0x3c);_0x18d94e[_0x31761d(0x247)]('-')&&(_0x18d94e=_0x18d94e[_0x31761d(0x22d)](0x0,-0x1));!_0x18d94e&&(_0x18d94e=_0x31761d(0x24a)+Date[_0x31761d(0x1f8)]());let _0x3b8d3e=_0x3cc6d1[_0x31761d(0x1ec)]||_0x31761d(0x239);if(_0x3cc6d1[_0x31761d(0x238)]==='Yahoo\x20News'&&_0x22ff18){if(_0x22ff18[_0x31761d(0x22a)]('finance.yahoo.com'))_0x3b8d3e='finance';else{if(_0x22ff18['includes'](_0x31761d(0x1f4)))_0x3b8d3e='auto';else{if(_0x22ff18['includes'](_0x31761d(0x1ef)))_0x3b8d3e=_0x31761d(0x206);else _0x22ff18['includes']('health.yahoo.com')&&(_0x3b8d3e=_0x31761d(0x259));}}}else{if(_0x3cc6d1['url']===_0x31761d(0x257)&&_0x22ff18){const _0x3ea379=_0x22ff18[_0x31761d(0x258)](/https:\/\/([a-z]+)\.slashdot\.org/);if(_0x3ea379&&_0x3ea379[0x1]){const _0x4eb8d3=_0x3ea379[0x1];switch(_0x4eb8d3){case'it':case _0x31761d(0x206):case'hardware':case'developers':_0x3b8d3e=_0x31761d(0x206);break;case _0x31761d(0x22c):_0x3b8d3e='science';break;case _0x31761d(0x20c):_0x3b8d3e=_0x31761d(0x1f5);break;case _0x31761d(0x239):case _0x31761d(0x223):case'books':default:_0x3b8d3e=_0x31761d(0x239);break;}}else _0x3b8d3e='news';}}return{'slug':_0x18d94e,'title':_0x2f212e,'description':_0x439924,'link':_0x22ff18,'thumbnail_url':_0x577f44,'created_at':new Date()[_0x31761d(0x1ea)](),'topic':_0x3b8d3e};});}function a0_0x4bc9(_0x157b7a,_0x235631){const _0x4a3f5c=a0_0x4a3f();return a0_0x4bc9=function(_0x4bc99f,_0x85760b){_0x4bc99f=_0x4bc99f-0x1e4;let _0x4fedd2=_0x4a3f5c[_0x4bc99f];return _0x4fedd2;},a0_0x4bc9(_0x157b7a,_0x235631);}function run(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3c82c8=a0_0x4bc9;console['log'](_0x3c82c8(0x23d));const _0x1d6cd8=new Date()[_0x3c82c8(0x1ea)]()[_0x3c82c8(0x225)]('T')[0x0],_0x3f74a5=path[_0x3c82c8(0x222)](OUTPUT_DIR,_0x1d6cd8+'.json');let _0x3f4cad=[];if(fs['existsSync'](INDEX_FILE))try{_0x3f4cad=JSON[_0x3c82c8(0x20d)](fs['readFileSync'](INDEX_FILE,_0x3c82c8(0x1fe)));}catch(_0x7cb02b){console[_0x3c82c8(0x1fa)]('Error\x20reading\x20index\x20file,\x20starting\x20fresh.');}const _0x41d579=new Set(_0x3f4cad);let _0x3678fa=[];if(fs[_0x3c82c8(0x1f3)](_0x3f74a5))try{_0x3678fa=JSON['parse'](fs[_0x3c82c8(0x22f)](_0x3f74a5,_0x3c82c8(0x1fe)));}catch(_0x5a8859){console['error'](_0x3c82c8(0x24e));}let _0x3ea2dc=0x0;for(const _0x54d9a6 of sources_1[_0x3c82c8(0x212)]){console[_0x3c82c8(0x24c)](_0x3c82c8(0x207)+_0x54d9a6[_0x3c82c8(0x238)]);try{const _0x3db2c6=yield parser['parseURL'](_0x54d9a6[_0x3c82c8(0x226)]),_0x249550=_0x3db2c6[_0x3c82c8(0x1e7)][_0x3c82c8(0x22d)](0x0,_0x54d9a6[_0x3c82c8(0x21a)]||_0x3db2c6[_0x3c82c8(0x1e7)][_0x3c82c8(0x210)]);for(const _0x1c3576 of _0x249550){try{const _0xed1508=yield processItem(_0x1c3576,_0x54d9a6);_0xed1508&&_0xed1508[_0x3c82c8(0x237)]&&(!_0x41d579['has'](_0xed1508[_0x3c82c8(0x237)])&&(_0x3678fa[_0x3c82c8(0x204)](_0xed1508),_0x41d579[_0x3c82c8(0x1f1)](_0xed1508[_0x3c82c8(0x237)]),_0x3ea2dc++));}catch(_0x367e53){console[_0x3c82c8(0x1fa)](_0x3c82c8(0x240)+_0x54d9a6[_0x3c82c8(0x238)]+':',_0x367e53);}}}catch(_0x54431c){console[_0x3c82c8(0x1fa)]('Error\x20fetching\x20source\x20'+_0x54d9a6[_0x3c82c8(0x238)]+':',_0x54431c);}}fs[_0x3c82c8(0x234)](_0x3f74a5,JSON[_0x3c82c8(0x254)](_0x3678fa,null,0x2)),fs[_0x3c82c8(0x234)](INDEX_FILE,JSON['stringify'](Array[_0x3c82c8(0x229)](_0x41d579),null,0x2)),console['log'](_0x3c82c8(0x248)+_0x3ea2dc+_0x3c82c8(0x235)+_0x3f74a5);});}run()[a0_0x23f015(0x243)](console[a0_0x23f015(0x1fa)]);
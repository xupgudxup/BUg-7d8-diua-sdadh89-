'use strict';const a5_0xdd4eb5=a5_0x41a1;function a5_0x41a1(_0x486526,_0x44c760){const _0x10d6b2=a5_0x10d6();return a5_0x41a1=function(_0x41a11c,_0x593744){_0x41a11c=_0x41a11c-0xa9;let _0x33b940=_0x10d6b2[_0x41a11c];return _0x33b940;},a5_0x41a1(_0x486526,_0x44c760);}(function(_0xf2febb,_0xbbb2cc){const _0x31650b=a5_0x41a1,_0x33b33c=_0xf2febb();while(!![]){try{const _0x19d264=-parseInt(_0x31650b(0x181))/0x1+-parseInt(_0x31650b(0x13e))/0x2+parseInt(_0x31650b(0x105))/0x3+parseInt(_0x31650b(0x159))/0x4*(parseInt(_0x31650b(0xad))/0x5)+parseInt(_0x31650b(0x10c))/0x6+parseInt(_0x31650b(0xc3))/0x7+-parseInt(_0x31650b(0x161))/0x8;if(_0x19d264===_0xbbb2cc)break;else _0x33b33c['push'](_0x33b33c['shift']());}catch(_0x1809ba){_0x33b33c['push'](_0x33b33c['shift']());}}}(a5_0x10d6,0x742b8));var __createBinding=this&&this[a5_0xdd4eb5(0xd1)]||(Object['create']?function(_0x14910d,_0x1aec24,_0xa54b69,_0x3d3d27){const _0x41105e=a5_0xdd4eb5;if(_0x3d3d27===undefined)_0x3d3d27=_0xa54b69;var _0x5d383f=Object[_0x41105e(0xb7)](_0x1aec24,_0xa54b69);(!_0x5d383f||(_0x41105e(0x119)in _0x5d383f?!_0x1aec24[_0x41105e(0x121)]:_0x5d383f['writable']||_0x5d383f['configurable']))&&(_0x5d383f={'enumerable':!![],'get':function(){return _0x1aec24[_0xa54b69];}}),Object[_0x41105e(0x103)](_0x14910d,_0x3d3d27,_0x5d383f);}:function(_0x4b498d,_0x577ee0,_0x139f53,_0x4d4d7a){if(_0x4d4d7a===undefined)_0x4d4d7a=_0x139f53;_0x4b498d[_0x4d4d7a]=_0x577ee0[_0x139f53];}),__setModuleDefault=this&&this[a5_0xdd4eb5(0xc4)]||(Object[a5_0xdd4eb5(0xfb)]?function(_0x56fe09,_0x5d7915){const _0x5ceacb=a5_0xdd4eb5;Object[_0x5ceacb(0x103)](_0x56fe09,'default',{'enumerable':!![],'value':_0x5d7915});}:function(_0x33a0cb,_0x8accbe){const _0x28eb49=a5_0xdd4eb5;_0x33a0cb[_0x28eb49(0x170)]=_0x8accbe;}),__importStar=this&&this['__importStar']||(function(){var _0x4f05b5=function(_0x36244a){const _0x5ac8bd=a5_0x41a1;return _0x4f05b5=Object[_0x5ac8bd(0xf2)]||function(_0xdbbff0){const _0x13be4d=_0x5ac8bd;var _0x309ced=[];for(var _0x5371e2 in _0xdbbff0)if(Object['prototype'][_0x13be4d(0x175)][_0x13be4d(0x174)](_0xdbbff0,_0x5371e2))_0x309ced[_0x309ced[_0x13be4d(0x101)]]=_0x5371e2;return _0x309ced;},_0x4f05b5(_0x36244a);};return function(_0x338479){const _0x59a9ab=a5_0x41a1;if(_0x338479&&_0x338479[_0x59a9ab(0x121)])return _0x338479;var _0x5b3c42={};if(_0x338479!=null){for(var _0x5ace2a=_0x4f05b5(_0x338479),_0x43595e=0x0;_0x43595e<_0x5ace2a[_0x59a9ab(0x101)];_0x43595e++)if(_0x5ace2a[_0x43595e]!==_0x59a9ab(0x170))__createBinding(_0x5b3c42,_0x338479,_0x5ace2a[_0x43595e]);}return __setModuleDefault(_0x5b3c42,_0x338479),_0x5b3c42;};}()),__importDefault=this&&this['__importDefault']||function(_0x50ee25){const _0x2f38ca=a5_0xdd4eb5;return _0x50ee25&&_0x50ee25[_0x2f38ca(0x121)]?_0x50ee25:{'default':_0x50ee25};};Object[a5_0xdd4eb5(0x103)](exports,a5_0xdd4eb5(0x121),{'value':!![]});const fs=__importStar(require('fs')),path=__importStar(require(a5_0xdd4eb5(0xf4))),rss_parser_1=__importDefault(require(a5_0xdd4eb5(0xd0))),node_html_parser_1=require(a5_0xdd4eb5(0xe2)),sources_1=require(a5_0xdd4eb5(0xe7)),article_extractor_1=require(a5_0xdd4eb5(0x15a)),classifier_1=require(a5_0xdd4eb5(0x14b)),bucket_manager_1=require(a5_0xdd4eb5(0x117)),parser=new rss_parser_1[(a5_0xdd4eb5(0x170))](),OUTPUT_DIR=path[a5_0xdd4eb5(0xaa)](__dirname,'../output');!fs[a5_0xdd4eb5(0xcb)](OUTPUT_DIR)&&fs[a5_0xdd4eb5(0xf5)](OUTPUT_DIR,{'recursive':!![]});const INDEX_FILE=path['join'](OUTPUT_DIR,a5_0xdd4eb5(0x118)),ERROR_LOG_FILE=path[a5_0xdd4eb5(0xaa)](OUTPUT_DIR,a5_0xdd4eb5(0xdf)),bannedKeywords=['Only\x20Fans',a5_0xdd4eb5(0x155),a5_0xdd4eb5(0x16a),a5_0xdd4eb5(0xcd),a5_0xdd4eb5(0x137),a5_0xdd4eb5(0x141),a5_0xdd4eb5(0x148),a5_0xdd4eb5(0xed),a5_0xdd4eb5(0xfc),a5_0xdd4eb5(0xb5),a5_0xdd4eb5(0x124),'Form\x2013F','Form\x2013G',a5_0xdd4eb5(0x13c),a5_0xdd4eb5(0x125),a5_0xdd4eb5(0x177),a5_0xdd4eb5(0xac),'prime\x20day','prime\x20week','amazon\x20prime\x20day',a5_0xdd4eb5(0xb2),a5_0xdd4eb5(0xe6),a5_0xdd4eb5(0x14e),a5_0xdd4eb5(0xb6),a5_0xdd4eb5(0xf7),a5_0xdd4eb5(0x12a),a5_0xdd4eb5(0x13f),'christmas\x20deals','end\x20of\x20year\x20sale',a5_0xdd4eb5(0xdb),'clearance\x20sale',a5_0xdd4eb5(0x12e),a5_0xdd4eb5(0x185),a5_0xdd4eb5(0x14f),'limited\x20time\x20offer',a5_0xdd4eb5(0x14c),'best\x20deals',a5_0xdd4eb5(0xb3),a5_0xdd4eb5(0x126),a5_0xdd4eb5(0xef),a5_0xdd4eb5(0xee),'deal\x20of\x20the\x20day',a5_0xdd4eb5(0x164),a5_0xdd4eb5(0x114),a5_0xdd4eb5(0xeb),a5_0xdd4eb5(0x165),a5_0xdd4eb5(0x15b),'promo\x20code','voucher\x20code',a5_0xdd4eb5(0xff),'save\x20big','huge\x20savings','massive\x20discount',a5_0xdd4eb5(0x150),a5_0xdd4eb5(0xe5),a5_0xdd4eb5(0xfe),a5_0xdd4eb5(0x12f),a5_0xdd4eb5(0xd3),a5_0xdd4eb5(0x182),a5_0xdd4eb5(0x158),a5_0xdd4eb5(0xe0),a5_0xdd4eb5(0x15f),'top\x20picks',a5_0xdd4eb5(0x110),a5_0xdd4eb5(0xe3),a5_0xdd4eb5(0x16b),a5_0xdd4eb5(0x10a),a5_0xdd4eb5(0xc8),a5_0xdd4eb5(0x151),a5_0xdd4eb5(0xe4),a5_0xdd4eb5(0x131),a5_0xdd4eb5(0x128),a5_0xdd4eb5(0xd4),'shop\x20now','order\x20now',a5_0xdd4eb5(0x122),'grab\x20it\x20now','add\x20to\x20cart',a5_0xdd4eb5(0x136),'free\x20shipping',a5_0xdd4eb5(0x149),'in\x20stock',a5_0xdd4eb5(0x139),a5_0xdd4eb5(0x142),a5_0xdd4eb5(0xea),'hurry','act\x20fast',a5_0xdd4eb5(0x160),'last\x20chance','final\x20hours','affiliate\x20link','sponsored\x20post',a5_0xdd4eb5(0x129),a5_0xdd4eb5(0x16e),a5_0xdd4eb5(0xcf),a5_0xdd4eb5(0x15d)],bannedPatterns=[/\b\d{1,2}%\s*(off|discount|savings?)\b/i,/\bsave\s+\d{1,2}%/i,/\bup\s+to\s+\d{1,2}%\s*off\b/i,/\bsave\s+\$\d+/i,/\$\d+\s*off\b/i,/\bunder\s+\$\d+/i,/\bjust\s+\$\d+/i,/\bonly\s+\$\d+/i,/\bfrom\s+\$\d+/i,/\bstarting\s+at\s+\$\d+/i,/\bwas\s+\$\d+[,\s]+now\s+\$\d+/i,/\bregularly?\s+\$\d+/i,/\bnormally\s+\$\d+/i,/\b\d+\s+best\s+(deals?|products?|items?|gifts?|picks?|things?|ways?)\b/i,/\bbest\s+\d+\b/i,/\b(today|tonight|this\s+week)\s+only\b/i,/\bends?\s+(soon|today|tonight|tomorrow)\b/i,/\b(hours?|days?|minutes?)\s+left\b/i,/\b(limited\s+)?stock\s+(remaining|left|available)\b/i,/\b(grab|snag|score|get)\s+(this|these|the)\s+deal/i,/\bdeal\s+of\s+the\s+(day|week|month|year)\b/i,/\b(massive|huge|incredible|amazing|insane)\s+(deal|discount|savings?|sale)\b/i,/\b(don't|do\s+not)\s+miss\s+(this|these|out)\b/i];function a5_0x10d6(){const _0x2858fc=['add','Mozilla/5.0\x20(compatible;\x20NewsBot/1.0)','3750838NPDVeU','__setModuleDefault','toFixed','[Filter]\x20Blocked\x20by\x20content\x20check:\x20','--test','we\x20reviewed','trim','value','existsSync','(Source:\x20Bloomberg)','pornography','argv','we\x20may\x20earn','rss-parser','__createBinding','Scrape\x20finished.\x20Added\x20','budget\x20pick','buy\x20now','content','href','sourcesData','media:content','Fetch\x20failed','Error\x20reading\x20index\x20file,\x20starting\x20fresh.','year\x20end\x20sale','message','push','ceil','error-log.json','best\x20of\x202024','url','node-html-parser','editors\x20choice','gift\x20guide','best\x20price','boxing\x20day','./sources','enclosure','hnrss.org','selling\x20out','price\x20cut','substring','gambling','hot\x20deals','daily\x20deals','match','https://s.yimg.com/cv/apiv2/social/images/yahoo_default_logo-1200x1200.png','getOwnPropertyNames','Processing\x20source:\x20','path','mkdirSync','\x20complete\x20in\x20','holiday\x20sale','\x20sources).\x20Skipping.','content:encoded','replace','create','casino','allSettled','price\x20match','save\x20money','âš ï¸\x20RUNNING\x20IN\x20TEST\x20MODE:\x20Limiting\x20to\x201\x20source\x20and\x2010\x20items.','length','from','defineProperty','startsWith','2630178LkBXiW','thumbnail_url','getAttribute','then','.json','we\x20tested','s.\x20Classification\x20will\x20run\x20in\x20merge\x20step.','571062rYMMZd','some','\x20|\x20Processing\x20sources\x20','meta[property=\x22og:image\x22]','our\x20picks','querySelector','Classifier','Starting\x20Aggregation\x20&\x20Classification...','price\x20drop','title','\x20batches\x20required\x20for\x20','./bucket-manager','index.json','get','description','items','meta[name=\x22description\x22]','width','https://rss.slashdot.org/Slashdot/slashdot','media:thumbnail','Job\x20Complete\x20in\x20','__esModule','get\x20it\x20now','status','sports\x20betting','SEC\x20filing','deals\x20today','news','gift\x20ideas','paid\x20partnership','holiday\x20deals','slice','Tell\x20HN:','error','flash\x20sale','unbeatable\x20price','includes','holiday\x20gift','test','max','utf-8','isoDate','checkout','xxx','text','back\x20in\x20stock','\x20items.','toISOString','Form\x20144','parse','1360212OiZAtb','christmas\x20sale','headers','sex\x20tape','selling\x20fast','Batch\x20','min','now','filter','s.\x20Classified\x20','nsfw','fast\x20shipping','timeout','./classifier','limited\x20time\x20deal','HTTP\x20error!\x20status:\x20','memorial\x20day\x20sale','door\x20buster','lowest\x20price','buying\x20guide','writeFileSync','init','text/html,application/xhtml+xml','onlyfans','post-','html','affordable\x20pick','718032crgyOC','./article-extractor','coupon\x20code','meta[name=\x22twitter:description\x22]','as\x20an\x20amazon\x20associate','fullText','best\x20of\x202025','dont\x20miss','1854120AAfRvs','Show\x20HN:','addPost','deal\x20alert','discount\x20code','split','meta[property=\x22og:description\x22]','lastIndexOf','link','porn','staff\x20picks','stringify','catch','we\x20earn\x20commission','pubDate','default','classify','https://www.investing.com/rss/news.rss','\x20not\x20needed\x20(only\x20','call','hasOwnProperty','\x20\x20Skipped\x20duplicate:\x20','black\x20friday','â­ï¸\x20Batch\x20','keywords','isArray','textContent','p\x20a','contentSnippet','readFileSync','log','toLowerCase','658558rUSfjK','budget\x20friendly','Read\x20more\x20of\x20this\x20story\x20at\x20Slashdot.','\x20of\x20','doorbuster','name','...','Error\x20reading\x20daily\x20file,\x20starting\x20fresh.','join','\x20old\x20(filtered)','cyber\x20monday','15wJKwrb','Article\x20URL:','BucketManager','Starting\x20job...','\x20new\x20|\x20','singles\x20day','top\x20deals','Error\x20fetching\x20source\x20','slot\x20machine','labor\x20day\x20sale','getOwnPropertyDescriptor','meta[name=\x22twitter:image\x22]','\x20posts.','map','resolveTopicFromUrl','race','setDate','has','getDate','fulfilled'];a5_0x10d6=function(){return _0x2858fc;};return a5_0x10d6();}function isPromotionalContent(_0x2ce6ee){const _0x3417f0=a5_0xdd4eb5,_0x5c4ad4=_0x2ce6ee['toLowerCase']();if(bannedKeywords[_0x3417f0(0x10d)](_0x56b350=>_0x5c4ad4[_0x3417f0(0x130)](_0x56b350[_0x3417f0(0x180)]())))return!![];if(bannedPatterns['some'](_0x49a295=>_0x49a295[_0x3417f0(0x132)](_0x2ce6ee)))return!![];return![];}const bannedThumbnails=[a5_0xdd4eb5(0xf1)],phrasesToRemoveFromDescription=[a5_0xdd4eb5(0xcc),a5_0xdd4eb5(0x183)],descriptionBylinePatterns=[/^By\s+[A-Z][a-z]+\s+[A-Z][a-z]+(\s+and\s+[A-Z][a-z]+\s+[A-Z][a-z]+)?\s+[A-Z]{2,}.*?\(Reuters\)\s*-?\s*/i,/^By\s+[A-Z][a-z]+\s+[A-Z][a-z]+(\s+and\s+[A-Z][a-z]+\s+[A-Z][a-z]+)?\s+[A-Z]{2,}.*?\(AP\)\s*-?\s*/i,/^By\s+[A-Z][a-z]+\s+[A-Z][a-z]+(\s+and\s+[A-Z][a-z]+\s+[A-Z][a-z]+)?\s+[A-Z]{2,}.*?\(AFP\)\s*-?\s*/i,/^By\s+[A-Z][a-z]+\s+[A-Z][a-z]+\s*/i,/^[A-Z]{2,}[A-Z\s,]+\(Reuters\)\s*-?\s*/i,/^[A-Z]{2,}[A-Z\s,]+\(AP\)\s*-?\s*/i,/^[A-Z]{2,}[A-Z\s,]+\(AFP\)\s*-?\s*/i,/^[A-Z]{3,},?\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d{1,2}\s+\([^)]+\)\s*-?\s*/i,/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d{1,2}\s+\([^)]+\)\s*-?\s*/i];function cleanDescriptionBylines(_0x54531d){const _0x5d5420=a5_0xdd4eb5;if(!_0x54531d)return null;let _0x16bbbd=_0x54531d;for(const _0x659abd of descriptionBylinePatterns){_0x16bbbd=_0x16bbbd[_0x5d5420(0xfa)](_0x659abd,'');}return _0x16bbbd[_0x5d5420(0xc9)]();}const phrasesToRemoveFromTitle=[a5_0xdd4eb5(0x12c),a5_0xdd4eb5(0x162)],MAX_CONCURRENT_FETCHES=0x5,MAX_ITEMS_PER_SOURCE=0x64;function isRecentItem(_0x56346a){const _0x25b15d=a5_0xdd4eb5;if(!_0x56346a[_0x25b15d(0x16f)]&&!_0x56346a[_0x25b15d(0x135)])return!![];try{const _0x4d1da6=new Date(_0x56346a[_0x25b15d(0x16f)]||_0x56346a[_0x25b15d(0x135)]),_0x12fa5d=new Date(),_0x513f39=new Date(_0x12fa5d['getFullYear'](),_0x12fa5d['getMonth'](),_0x12fa5d['getDate']()),_0x3567b9=new Date(_0x513f39);return _0x3567b9[_0x25b15d(0xbd)](_0x3567b9[_0x25b15d(0xbf)]()-0x1),_0x4d1da6>=_0x3567b9;}catch{return!![];}}function parseArgs(){const _0x528c3b=a5_0xdd4eb5,_0x12c32c=process[_0x528c3b(0xce)][_0x528c3b(0x12b)](0x2);let _0x42f23e=null,_0x215913=null,_0x5cca22=![];for(const _0x1e9450 of _0x12c32c){if(_0x1e9450[_0x528c3b(0x104)]('--batch='))_0x42f23e=parseInt(_0x1e9450[_0x528c3b(0x166)]('=')[0x1],0xa);else{if(_0x1e9450[_0x528c3b(0x104)]('--total-batches='))_0x215913=parseInt(_0x1e9450[_0x528c3b(0x166)]('=')[0x1],0xa);else _0x1e9450===_0x528c3b(0xc7)&&(_0x5cca22=!![]);}}return{'batch':_0x42f23e,'totalBatches':_0x215913,'test':_0x5cca22};}function cleanCdata(_0x4caeab){const _0x17df28=a5_0xdd4eb5;return _0x4caeab[_0x17df28(0xfa)](/<!\[CDATA\[|\]\]>/g,'')[_0x17df28(0xc9)]();}function stripHtml(_0x376bc0){const _0x3d671d=a5_0xdd4eb5;return(0x0,node_html_parser_1['parse'])(_0x376bc0)[_0x3d671d(0x17b)]||'';}function removePhrases(_0x26a23a,_0x29ea92){const _0x531ecf=a5_0xdd4eb5;if(!_0x26a23a)return null;let _0x2441bf=_0x26a23a;for(const _0x1acbce of _0x29ea92){_0x2441bf=_0x2441bf[_0x531ecf(0xfa)](_0x1acbce,'')[_0x531ecf(0xc9)]();}return _0x2441bf;}function truncateDescription(_0x39b24e){const _0x42c16c=a5_0xdd4eb5;if(!_0x39b24e)return null;const _0x315845=_0x39b24e['split'](/\n\s*\n/);let _0x2d3801=_0x315845[0x0]||'';const _0x262fc7=_0x2d3801[_0x42c16c(0xf0)](/[^.!?]+[.!?]+|[^.!?]+$/g)||[];_0x262fc7[_0x42c16c(0x101)]>0x5?_0x2d3801=_0x262fc7[_0x42c16c(0x12b)](0x0,0x5)['join']('')[_0x42c16c(0xc9)]():_0x2d3801=_0x262fc7['join']('')['trim']();if(_0x2d3801['length']<_0x39b24e[_0x42c16c(0x101)]&&!/[.!?]$/['test'](_0x2d3801)){const _0x48e708=_0x2d3801['lastIndexOf']('\x20');_0x48e708>-0x1?_0x2d3801=_0x2d3801[_0x42c16c(0xec)](0x0,_0x48e708)+_0x42c16c(0x187):_0x2d3801=_0x2d3801+_0x42c16c(0x187);}return _0x2d3801[_0x42c16c(0x101)]>0x0?_0x2d3801:null;}async function isImageLargeEnough(_0x149f85){const _0x1c88e2=a5_0xdd4eb5;try{const _0x4b629b=await fetch(_0x149f85,{'method':'HEAD','signal':AbortSignal[_0x1c88e2(0x14a)](0x7d0)});if(!_0x4b629b['ok']){if(_0x4b629b['status']===0x194)return![];return!![];}const _0x229711=_0x4b629b[_0x1c88e2(0x140)][_0x1c88e2(0x119)]('content-length');if(_0x229711){const _0x4c8827=parseInt(_0x229711,0xa);if(_0x4c8827<0x3a98)return![];}return!![];}catch{return!![];}}async function fetchArticleMetadata(_0x28b928){const _0x223324=a5_0xdd4eb5;try{const _0x600c69=await fetch(_0x28b928,{'signal':AbortSignal['timeout'](0x3a98),'headers':{'User-Agent':_0x223324(0xc2),'Accept':_0x223324(0x154)}});if(!_0x600c69['ok'])throw new Error(_0x223324(0x14d)+_0x600c69[_0x223324(0x123)]);const _0x8185ce=await _0x600c69['text'](),_0x5c9ee7=(0x0,node_html_parser_1['parse'])(_0x8185ce);let _0x1e7180=null;const _0x168068=[_0x223324(0x167),_0x223324(0x15c),_0x223324(0x11c)];for(const _0x1dc2fc of _0x168068){const _0x450119=_0x5c9ee7[_0x223324(0x111)](_0x1dc2fc);if(_0x450119&&_0x450119[_0x223324(0x107)](_0x223324(0xd5))){_0x1e7180=stripHtml(_0x450119[_0x223324(0x107)](_0x223324(0xd5)))||null,_0x1e7180=removePhrases(_0x1e7180,phrasesToRemoveFromDescription),_0x1e7180=cleanDescriptionBylines(_0x1e7180),_0x1e7180=truncateDescription(_0x1e7180);break;}}let _0x44b22c=null;const _0x54e564=[_0x223324(0x10f),_0x223324(0xb8)];for(const _0x8a9936 of _0x54e564){const _0x7c1bbc=_0x5c9ee7[_0x223324(0x111)](_0x8a9936);if(_0x7c1bbc&&_0x7c1bbc[_0x223324(0x107)](_0x223324(0xd5))){_0x44b22c=_0x7c1bbc['getAttribute'](_0x223324(0xd5));break;}}return{'description':_0x1e7180,'thumbnail_url':_0x44b22c,'html':_0x8185ce};}catch{return{'description':null,'thumbnail_url':null,'html':null};}}let errorLog=[];function logError(_0x5735db,_0x30b528,_0x4c102b){errorLog['push']({'source':_0x5735db,'url':_0x30b528,'error':_0x4c102b,'timestamp':new Date()['toISOString']()});}function saveErrorLog(){const _0x5195db=a5_0xdd4eb5;if(errorLog['length']===0x0)return;let _0x5cf156=[];if(fs[_0x5195db(0xcb)](ERROR_LOG_FILE))try{_0x5cf156=JSON[_0x5195db(0x13d)](fs[_0x5195db(0x17e)](ERROR_LOG_FILE,_0x5195db(0x134)));}catch{}const _0x11f33a=[..._0x5cf156,...errorLog][_0x5195db(0x12b)](-0x64);fs[_0x5195db(0x152)](ERROR_LOG_FILE,JSON[_0x5195db(0x16c)](_0x11f33a,null,0x2),_0x5195db(0x134));}async function processItem(_0x5f1e66,_0x559a63){const _0x573bde=a5_0xdd4eb5;let _0xc3a05=_0x5f1e66['title']?stripHtml(cleanCdata(_0x5f1e66[_0x573bde(0x115)])):null;_0xc3a05=removePhrases(_0xc3a05,phrasesToRemoveFromTitle);let _0x479565=_0x5f1e66[_0x573bde(0x169)],_0x4bf126=null;if(_0x559a63['url']['includes'](_0x573bde(0xe9))){if(_0x5f1e66['content']){const _0xaa11cf=(0x0,node_html_parser_1[_0x573bde(0x13d)])(_0x5f1e66[_0x573bde(0xd5)]),_0x566ac4=_0xaa11cf[_0x573bde(0x111)](_0x573bde(0x17c));_0x566ac4&&_0x566ac4[_0x573bde(0x138)]['startsWith'](_0x573bde(0xae))&&(_0x479565=_0x566ac4[_0x573bde(0x107)](_0x573bde(0xd6)));}_0x4bf126=null;}else _0x5f1e66[_0x573bde(0x17d)]&&(_0x4bf126=stripHtml(cleanCdata(_0x5f1e66['contentSnippet']))||null,_0x4bf126=removePhrases(_0x4bf126,phrasesToRemoveFromDescription),_0x4bf126=cleanDescriptionBylines(_0x4bf126),_0x4bf126=truncateDescription(_0x4bf126));!_0x4bf126&&_0x5f1e66[_0x573bde(0xf9)]&&(_0x4bf126=stripHtml(cleanCdata(_0x5f1e66['content:encoded']))||null,_0x4bf126=removePhrases(_0x4bf126,phrasesToRemoveFromDescription),_0x4bf126=cleanDescriptionBylines(_0x4bf126),_0x4bf126=truncateDescription(_0x4bf126));_0x559a63['url']==='https://rss.slashdot.org/Slashdot/slashdot'&&_0x5f1e66[_0x573bde(0x11a)]&&(_0x4bf126=stripHtml(cleanCdata(_0x5f1e66[_0x573bde(0x11a)]))||null,_0x4bf126=removePhrases(_0x4bf126,phrasesToRemoveFromDescription),_0x4bf126=cleanDescriptionBylines(_0x4bf126),_0x4bf126=truncateDescription(_0x4bf126));if(!_0xc3a05||!_0x479565)return null;const _0xea48eb=_0xc3a05+'\x20'+(_0x5f1e66[_0x573bde(0x17d)]?stripHtml(_0x5f1e66[_0x573bde(0x17d)]):'')+'\x20'+(_0x5f1e66[_0x573bde(0x11a)]?stripHtml(_0x5f1e66[_0x573bde(0x11a)]):'');if(isPromotionalContent(_0xea48eb))return null;let _0x10627a=_0x5f1e66[_0x573bde(0xe8)]?_0x5f1e66[_0x573bde(0xe8)][_0x573bde(0xe1)]:null;if(_0x5f1e66['media:content']){if(Array[_0x573bde(0x17a)](_0x5f1e66['media:content'])){const _0x4d3d4d=_0x5f1e66[_0x573bde(0xd8)]['sort']((_0x1a4fe9,_0x569f70)=>{const _0x14a23a=_0x573bde,_0x2b9d8f=_0x1a4fe9['$']&&_0x1a4fe9['$'][_0x14a23a(0x11d)]?parseInt(_0x1a4fe9['$'][_0x14a23a(0x11d)],0xa):0x0,_0x53623c=_0x569f70['$']&&_0x569f70['$'][_0x14a23a(0x11d)]?parseInt(_0x569f70['$'][_0x14a23a(0x11d)],0xa):0x0;return _0x53623c-_0x2b9d8f;}),_0x3f01e0=_0x4d3d4d[0x0];if(_0x3f01e0){const _0x2e6a1f=_0x3f01e0['$']&&_0x3f01e0['$']['width']?parseInt(_0x3f01e0['$'][_0x573bde(0x11d)],0xa):0x0;if(_0x2e6a1f===0x0||_0x2e6a1f>=0x12c){if(_0x3f01e0['$']&&_0x3f01e0['$']['url'])_0x10627a=_0x3f01e0['$']['url'];else{if(_0x3f01e0[_0x573bde(0xe1)])_0x10627a=_0x3f01e0[_0x573bde(0xe1)];}}}}else{const _0xf1bea1=_0x5f1e66[_0x573bde(0xd8)],_0x1830a1=_0xf1bea1['$']&&_0xf1bea1['$'][_0x573bde(0x11d)]?parseInt(_0xf1bea1['$'][_0x573bde(0x11d)],0xa):_0xf1bea1[_0x573bde(0x11d)]?parseInt(_0xf1bea1['width'],0xa):0x0;if(_0x1830a1===0x0||_0x1830a1>=0x12c){if(_0xf1bea1['$']&&_0xf1bea1['$']['url'])_0x10627a=_0xf1bea1['$']['url'];else{if(_0xf1bea1[_0x573bde(0xe1)])_0x10627a=_0xf1bea1['url'];}}}}if(!_0x10627a&&_0x5f1e66[_0x573bde(0x11f)]){if(_0x5f1e66[_0x573bde(0x11f)]['$']&&_0x5f1e66['media:thumbnail']['$'][_0x573bde(0xe1)])_0x10627a=_0x5f1e66[_0x573bde(0x11f)]['$']['url'];else _0x5f1e66[_0x573bde(0x11f)][_0x573bde(0xe1)]&&(_0x10627a=_0x5f1e66[_0x573bde(0x11f)][_0x573bde(0xe1)]);}_0x10627a&&bannedThumbnails[_0x573bde(0x130)](_0x10627a)&&(_0x10627a=null);let _0x31a876=null,_0x3f46bd={'fullText':null,'readingTime':0x0,'keywords':[],'qualityScore':0x0};const _0x47c089=!_0x4bf126||!_0x10627a||_0x559a63['url']['includes']('hnrss.org')||_0x559a63['url']===_0x573bde(0x11e)||_0x559a63[_0x573bde(0xe1)]===_0x573bde(0x172);try{const _0x91598=await fetchArticleMetadata(_0x479565);_0x31a876=_0x91598[_0x573bde(0x157)],!_0x4bf126&&(_0x4bf126=_0x91598[_0x573bde(0x11a)]),!_0x10627a&&(_0x10627a=_0x91598[_0x573bde(0x106)]);}catch(_0x42919d){logError(_0x559a63[_0x573bde(0x186)],_0x479565,_0x42919d[_0x573bde(0xdc)]||_0x573bde(0xd9));}if(_0x31a876){_0x3f46bd=(0x0,article_extractor_1['extractArticle'])(_0x31a876,_0x479565);if(_0x3f46bd[_0x573bde(0x15e)]&&isPromotionalContent(_0x3f46bd[_0x573bde(0x15e)]))return console[_0x573bde(0x17f)](_0x573bde(0xc6)+_0xc3a05),null;}_0x10627a&&bannedThumbnails[_0x573bde(0x130)](_0x10627a)&&(_0x10627a=null);if(_0x10627a){const _0x28d131=await isImageLargeEnough(_0x10627a);!_0x28d131&&(_0x10627a=null);}if(!_0x10627a)return null;const _0x5525d8=_0xc3a05[_0x573bde(0x180)]()[_0x573bde(0xfa)](/[^a-z0-9\s]/g,'')['trim']()[_0x573bde(0xfa)](/\s+/g,'-');let _0x27f006=_0x5525d8[_0x573bde(0xec)](0x0,0x78);if(_0x5525d8[_0x573bde(0x101)]>0x78){const _0x1a2d1e=_0x27f006[_0x573bde(0x168)]('-');_0x1a2d1e>0x0&&(_0x27f006=_0x27f006[_0x573bde(0xec)](0x0,_0x1a2d1e));}_0x27f006=_0x27f006['replace'](/-+$/,'');!_0x27f006&&(_0x27f006=_0x573bde(0x156)+Date['now']());const _0x18bcd8=(0x0,sources_1[_0x573bde(0xbb)])(_0x479565,_0x559a63['name'],_0x559a63['topic']||_0x573bde(0x127));return{'slug':_0x27f006,'title':_0xc3a05,'description':_0x4bf126,'fullText':_0x3f46bd[_0x573bde(0x15e)],'readingTime':_0x3f46bd['readingTime'],'keywords':_0x3f46bd[_0x573bde(0x179)],'qualityScore':_0x3f46bd['qualityScore'],'link':_0x479565,'thumbnail_url':_0x10627a,'created_at':new Date()[_0x573bde(0x13b)](),'topic':_0x18bcd8};}async function processInParallel(_0x4f068c,_0x2ecb93,_0x42fe3b){const _0x42424b=a5_0xdd4eb5,_0x339453=[],_0x283d19=[];for(const _0x586d20 of _0x4f068c){const _0x396b1e=_0x2ecb93(_0x586d20)['then'](_0x2e0d3a=>{_0x339453['push'](_0x2e0d3a);})[_0x42424b(0x16d)](()=>{_0x339453['push'](null);});_0x283d19[_0x42424b(0xdd)](_0x396b1e);if(_0x283d19['length']>=_0x42fe3b){await Promise[_0x42424b(0xbc)](_0x283d19);const _0x52ca52=_0x283d19[_0x42424b(0x146)](_0x1a31c3=>{const _0x10c470=_0x42424b;let _0x52e4bd=![];return _0x1a31c3[_0x10c470(0x108)](()=>{_0x52e4bd=!![];})[_0x10c470(0x16d)](()=>{_0x52e4bd=!![];}),!_0x52e4bd;});_0x283d19[_0x42424b(0x101)]=0x0,_0x283d19[_0x42424b(0xdd)](..._0x52ca52);}}return await Promise['all'](_0x283d19),_0x339453;}async function processBatch(_0x14e262,_0x19964d,_0x2bfea8=MAX_CONCURRENT_FETCHES){const _0x4e29ad=a5_0xdd4eb5,_0x22d280=[];for(let _0x16e665=0x0;_0x16e665<_0x14e262[_0x4e29ad(0x101)];_0x16e665+=_0x2bfea8){const _0x2c4064=_0x14e262[_0x4e29ad(0x12b)](_0x16e665,_0x16e665+_0x2bfea8),_0x104fe7=await Promise[_0x4e29ad(0xfd)](_0x2c4064[_0x4e29ad(0xba)](_0xf0492d=>_0x19964d(_0xf0492d)));for(const _0x5484f9 of _0x104fe7){_0x5484f9[_0x4e29ad(0x123)]===_0x4e29ad(0xc0)?_0x22d280['push'](_0x5484f9[_0x4e29ad(0xca)]):_0x22d280[_0x4e29ad(0xdd)](null);}}return _0x22d280;}async function run(){const _0x5aa232=a5_0xdd4eb5,{batch:_0x2b9f87,totalBatches:_0x3c2315,test:_0xb64a0e}=parseArgs();console['log'](_0x5aa232(0xb0));_0x2b9f87!==null&&_0x3c2315!==null&&console[_0x5aa232(0x17f)]('Running\x20batch\x20'+(_0x2b9f87+0x1)+'\x20of\x20'+_0x3c2315);const _0x453b42=Date[_0x5aa232(0x145)](),_0xe19bb0=new Date()[_0x5aa232(0x13b)]()[_0x5aa232(0x166)]('T')[0x0],_0x416a01=path[_0x5aa232(0xaa)](OUTPUT_DIR,_0xe19bb0+_0x5aa232(0x109));let _0x5acf71=[];if(fs[_0x5aa232(0xcb)](INDEX_FILE))try{_0x5acf71=JSON[_0x5aa232(0x13d)](fs[_0x5aa232(0x17e)](INDEX_FILE,_0x5aa232(0x134)));}catch{console[_0x5aa232(0x12d)](_0x5aa232(0xda));}const _0x5aa1b1=new Set(_0x5acf71),_0x172c4d=new Set();let _0x25767a=[];if(fs[_0x5aa232(0xcb)](_0x416a01))try{_0x25767a=JSON[_0x5aa232(0x13d)](fs[_0x5aa232(0x17e)](_0x416a01,_0x5aa232(0x134)));for(const _0x519264 of _0x25767a){_0x519264[_0x5aa232(0x15e)]&&_0x172c4d['add'](_0x519264['fullText'][_0x5aa232(0xec)](0x0,0x64));}}catch{console[_0x5aa232(0x12d)](_0x5aa232(0xa9));}let _0x43839c=[...sources_1['sourcesData']],_0x51e7a5=null;if(_0xb64a0e)console[_0x5aa232(0x17f)](_0x5aa232(0x100)),_0x43839c=sources_1[_0x5aa232(0xd7)][_0x5aa232(0x12b)](0x0,0x1),_0x51e7a5=0xa;else{if(_0x2b9f87!==null&&_0x3c2315!==null){const _0x4f4b5f=0x5,_0x61cbd4=Math[_0x5aa232(0x144)](_0x3c2315,Math[_0x5aa232(0x133)](0x1,Math[_0x5aa232(0xde)](sources_1[_0x5aa232(0xd7)]['length']/_0x4f4b5f)));if(_0x2b9f87>=_0x61cbd4){console[_0x5aa232(0x17f)](_0x5aa232(0x178)+(_0x2b9f87+0x1)+_0x5aa232(0x173)+_0x61cbd4+_0x5aa232(0x116)+sources_1[_0x5aa232(0xd7)][_0x5aa232(0x101)]+_0x5aa232(0xf8));return;}const _0x514d4d=Math[_0x5aa232(0xde)](sources_1[_0x5aa232(0xd7)]['length']/_0x61cbd4),_0x99ab7f=_0x2b9f87*_0x514d4d,_0x23b116=Math['min'](_0x99ab7f+_0x514d4d,sources_1[_0x5aa232(0xd7)]['length']);_0x43839c=sources_1[_0x5aa232(0xd7)]['slice'](_0x99ab7f,_0x23b116),console[_0x5aa232(0x17f)]('ðŸ”„\x20Batch\x20'+(_0x2b9f87+0x1)+'/'+_0x61cbd4+_0x5aa232(0x10e)+(_0x99ab7f+0x1)+'-'+_0x23b116+_0x5aa232(0x184)+sources_1[_0x5aa232(0xd7)][_0x5aa232(0x101)]);}}let _0xddef33=0x0;for(const _0x14e298 of _0x43839c){console['log'](_0x5aa232(0xf3)+_0x14e298['name']);try{const _0x255b49=await parser['parseURL'](_0x14e298[_0x5aa232(0xe1)]),_0x118da1=_0x51e7a5||MAX_ITEMS_PER_SOURCE,_0x3fca7b=_0x255b49[_0x5aa232(0x11b)]['filter'](isRecentItem)['slice'](0x0,_0x118da1),_0x49d21a=_0x255b49['items'][_0x5aa232(0x101)]-_0x3fca7b['length']-(_0x255b49[_0x5aa232(0x11b)][_0x5aa232(0x101)]>_0x118da1?_0x255b49['items']['length']-_0x118da1:0x0),_0x579cd3=_0x3fca7b[_0x5aa232(0x146)](_0x3f6033=>{const _0x5e44d9=_0x5aa232,_0x6d3c57=_0x3f6033[_0x5e44d9(0x169)];return _0x6d3c57&&!_0x5aa1b1[_0x5e44d9(0xbe)](_0x6d3c57);}),_0x4d5d63=_0x3fca7b[_0x5aa232(0x101)]-_0x579cd3[_0x5aa232(0x101)];console[_0x5aa232(0x17f)]('\x20\x20'+_0x579cd3['length']+_0x5aa232(0xb1)+_0x4d5d63+'\x20cached\x20|\x20'+_0x49d21a+_0x5aa232(0xab));const _0x5b0317=await processBatch(_0x579cd3,_0x231e1a=>processItem(_0x231e1a,_0x14e298),MAX_CONCURRENT_FETCHES);for(const _0x4a172a of _0x5b0317){if(_0x4a172a&&_0x4a172a[_0x5aa232(0x169)]){if(_0x4a172a['fullText']){const _0x3c4c41=_0x4a172a[_0x5aa232(0x15e)]['substring'](0x0,0x64);if(_0x172c4d[_0x5aa232(0xbe)](_0x3c4c41)){console['log'](_0x5aa232(0x176)+_0x4a172a[_0x5aa232(0x115)][_0x5aa232(0xec)](0x0,0x28)+_0x5aa232(0x187));continue;}_0x172c4d['add'](_0x3c4c41);}_0x25767a[_0x5aa232(0xdd)](_0x4a172a),_0x5aa1b1[_0x5aa232(0xc1)](_0x4a172a[_0x5aa232(0x169)]),_0xddef33++;}}}catch(_0x459d59){console[_0x5aa232(0x12d)](_0x5aa232(0xb4)+_0x14e298[_0x5aa232(0x186)]+':',_0x459d59['message']),logError(_0x14e298[_0x5aa232(0x186)],_0x14e298[_0x5aa232(0xe1)],_0x459d59[_0x5aa232(0xdc)]||'Feed\x20fetch\x20failed');}}fs[_0x5aa232(0x152)](_0x416a01,JSON['stringify'](_0x25767a,null,0x2),_0x5aa232(0x134)),fs['writeFileSync'](INDEX_FILE,JSON['stringify'](Array[_0x5aa232(0x102)](_0x5aa1b1),null,0x2),_0x5aa232(0x134)),saveErrorLog(),console[_0x5aa232(0x17f)](_0x5aa232(0xd2)+_0xddef33+_0x5aa232(0x13a));if(_0x2b9f87===null){console[_0x5aa232(0x17f)](_0x5aa232(0x113));const _0xe19236=new classifier_1[(_0x5aa232(0x112))](),_0x1fa12b=new bucket_manager_1[(_0x5aa232(0xaf))](OUTPUT_DIR);await _0x1fa12b[_0x5aa232(0x153)]();let _0x2217ff=0x0;for(const _0x34df90 of _0x25767a){const _0x5bfe25=_0xe19236[_0x5aa232(0x171)](_0x34df90[_0x5aa232(0x115)],_0x34df90[_0x5aa232(0x11a)]);if(_0x5bfe25[_0x5aa232(0x101)]>0x0){for(const _0x4ba173 of _0x5bfe25){_0x1fa12b[_0x5aa232(0x163)](_0x34df90,_0x4ba173);}_0x2217ff++;}}await _0x1fa12b['flush']();const _0x520a3e=Date[_0x5aa232(0x145)]();console['log'](_0x5aa232(0x120)+((_0x520a3e-_0x453b42)/0x3e8)[_0x5aa232(0xc5)](0x2)+_0x5aa232(0x147)+_0x2217ff+_0x5aa232(0xb9));}else{const _0x10a85b=Date[_0x5aa232(0x145)]();console[_0x5aa232(0x17f)](_0x5aa232(0x143)+_0x2b9f87+_0x5aa232(0xf6)+((_0x10a85b-_0x453b42)/0x3e8)[_0x5aa232(0xc5)](0x2)+_0x5aa232(0x10b));}}run()[a5_0xdd4eb5(0x16d)](console['error']);
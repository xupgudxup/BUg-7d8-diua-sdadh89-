'use strict';const a0_0x321585=a0_0x422f;(function(_0x545d31,_0x322317){const _0x2170b1=a0_0x422f,_0x468b78=_0x545d31();while(!![]){try{const _0x4df8d7=parseInt(_0x2170b1(0x8b))/0x1+-parseInt(_0x2170b1(0xdb))/0x2*(-parseInt(_0x2170b1(0x92))/0x3)+-parseInt(_0x2170b1(0xb9))/0x4*(parseInt(_0x2170b1(0xb0))/0x5)+parseInt(_0x2170b1(0xfa))/0x6+-parseInt(_0x2170b1(0xf6))/0x7*(parseInt(_0x2170b1(0x86))/0x8)+-parseInt(_0x2170b1(0xf8))/0x9*(parseInt(_0x2170b1(0xc2))/0xa)+-parseInt(_0x2170b1(0xb4))/0xb*(-parseInt(_0x2170b1(0xa2))/0xc);if(_0x4df8d7===_0x322317)break;else _0x468b78['push'](_0x468b78['shift']());}catch(_0x4d1379){_0x468b78['push'](_0x468b78['shift']());}}}(a0_0x2e13,0xefc43));var __createBinding=this&&this['__createBinding']||(Object[a0_0x321585(0xb6)]?function(_0x3aec0e,_0x37b594,_0x2b3e4a,_0x1d1b29){const _0x5c6f74=a0_0x321585;if(_0x1d1b29===undefined)_0x1d1b29=_0x2b3e4a;var _0x2de44c=Object['getOwnPropertyDescriptor'](_0x37b594,_0x2b3e4a);(!_0x2de44c||(_0x5c6f74(0xc7)in _0x2de44c?!_0x37b594[_0x5c6f74(0xe8)]:_0x2de44c['writable']||_0x2de44c[_0x5c6f74(0x85)]))&&(_0x2de44c={'enumerable':!![],'get':function(){return _0x37b594[_0x2b3e4a];}}),Object['defineProperty'](_0x3aec0e,_0x1d1b29,_0x2de44c);}:function(_0x40eb09,_0x23708f,_0x3e91f7,_0x2f9aee){if(_0x2f9aee===undefined)_0x2f9aee=_0x3e91f7;_0x40eb09[_0x2f9aee]=_0x23708f[_0x3e91f7];}),__setModuleDefault=this&&this[a0_0x321585(0x81)]||(Object['create']?function(_0x577e3f,_0xc0dc17){const _0x2c840d=a0_0x321585;Object[_0x2c840d(0xcf)](_0x577e3f,'default',{'enumerable':!![],'value':_0xc0dc17});}:function(_0x1f1f4a,_0x230fa9){const _0x4a57d6=a0_0x321585;_0x1f1f4a[_0x4a57d6(0xf0)]=_0x230fa9;}),__importStar=this&&this[a0_0x321585(0xa4)]||(function(){var _0x147187=function(_0x47a395){return _0x147187=Object['getOwnPropertyNames']||function(_0x2f07c1){const _0x4e59f4=a0_0x422f;var _0x1ae8d3=[];for(var _0x1a5d39 in _0x2f07c1)if(Object[_0x4e59f4(0x82)][_0x4e59f4(0xe5)]['call'](_0x2f07c1,_0x1a5d39))_0x1ae8d3[_0x1ae8d3[_0x4e59f4(0xc5)]]=_0x1a5d39;return _0x1ae8d3;},_0x147187(_0x47a395);};return function(_0x1d0aaa){const _0x41e72e=a0_0x422f;if(_0x1d0aaa&&_0x1d0aaa[_0x41e72e(0xe8)])return _0x1d0aaa;var _0x40c500={};if(_0x1d0aaa!=null){for(var _0x31b6ba=_0x147187(_0x1d0aaa),_0x331bff=0x0;_0x331bff<_0x31b6ba[_0x41e72e(0xc5)];_0x331bff++)if(_0x31b6ba[_0x331bff]!=='default')__createBinding(_0x40c500,_0x1d0aaa,_0x31b6ba[_0x331bff]);}return __setModuleDefault(_0x40c500,_0x1d0aaa),_0x40c500;};}()),__importDefault=this&&this[a0_0x321585(0xaa)]||function(_0x367208){return _0x367208&&_0x367208['__esModule']?_0x367208:{'default':_0x367208};};Object[a0_0x321585(0xcf)](exports,a0_0x321585(0xe8),{'value':!![]});const fs=__importStar(require('fs')),path=__importStar(require(a0_0x321585(0x8a))),rss_parser_1=__importDefault(require(a0_0x321585(0xb2))),node_html_parser_1=require(a0_0x321585(0xbf)),sources_1=require(a0_0x321585(0xcd)),parser=new rss_parser_1[(a0_0x321585(0xf0))](),OUTPUT_DIR=path[a0_0x321585(0xbe)](__dirname,a0_0x321585(0x99));!fs['existsSync'](OUTPUT_DIR)&&fs['mkdirSync'](OUTPUT_DIR,{'recursive':!![]});function a0_0x2e13(){const _0x4f31c1=['catch','porn','https://www.investing.com/rss/news.rss','tech','discount','hasOwnProperty','Form\x2013F','(Source:\x20Bloomberg)','__esModule','health','meta[name=\x22twitter:description\x22]','href','content','getAttribute','Form\x20144','hnrss.org','default','now','news','Read\x20more\x20of\x20this\x20story\x20at\x20Slashdot.','substring','\x20new\x20items.\x20Saved\x20to\x20','5491416ehctiR','contentSnippet','917874GMZrTZ','Yahoo\x20News','7594602jPgkJt','content:encoded','health.yahoo.com','HTTP\x20error!\x20status:\x20','push','post-','__setModuleDefault','prototype','science','meta[name=\x22description\x22]','configurable','8GoFDWK','media:content','utf-8','Processing\x20source:\x20','path','447212UfGJfM','sort','gambling','Error\x20reading\x20index\x20file,\x20starting\x20fresh.','readFileSync','Starting\x20job...','description','12gQtkVW','add','https://s.yimg.com/cv/apiv2/social/images/yahoo_default_logo-1200x1200.png','toLowerCase','sex','https://rss.slashdot.org/Slashdot/slashdot','finance','../output','includes','Error\x20fetching\x20source\x20','Form\x2013G','match','title','width','endsWith','status','2307432YZTvLz','auto','__importStar','Article\x20URL:','pubDate','querySelector','finance.yahoo.com','deals','__importDefault','text','existsSync','gaming','link','error','15405RlTuVW','some','rss-parser','meta[name=\x22twitter:image\x22]','66OceSAP','toISOString','create','yro','name','1000MRlZcf','log','writeFileSync','Error\x20processing\x20item\x20from\x20','enclosure','join','node-html-parser','max_items','...','70TICbGQ','timeout','replace','length','meta[property=\x22og:image\x22]','get','tech.yahoo.com','split','p\x20a','developers','books','./sources','sourcesData','defineProperty','lastIndexOf','media:thumbnail','topic','thumbnail_url','trim','isArray','parse','items','Only\x20Fans','url','slice','192014YIDwhO','stringify','hardware','autos.yahoo.com','has'];a0_0x2e13=function(){return _0x4f31c1;};return a0_0x2e13();}const INDEX_FILE=path[a0_0x321585(0xbe)](OUTPUT_DIR,'index.json'),bannedKeywords=[a0_0x321585(0xd8),a0_0x321585(0xe1),a0_0x321585(0x96),a0_0x321585(0x8d),a0_0x321585(0xe6),a0_0x321585(0x9c),a0_0x321585(0xee),a0_0x321585(0xa9),'black\x20friday',a0_0x321585(0xe4),'best'],bannedThumbnails=[a0_0x321585(0x94)],phrasesToRemoveFromDescription=[a0_0x321585(0xe7),a0_0x321585(0xf3)],phrasesToRemoveFromTitle=['Tell\x20HN:','Show\x20HN:'];function cleanCdata(_0x45d829){const _0x50c63f=a0_0x321585;return _0x45d829[_0x50c63f(0xc4)](/<!\[CDATA\[|\]\]>/g,'')[_0x50c63f(0xd4)]();}function a0_0x422f(_0x1fefac,_0x266243){const _0x2e13ba=a0_0x2e13();return a0_0x422f=function(_0x422f06,_0xda22d7){_0x422f06=_0x422f06-0x81;let _0x578a99=_0x2e13ba[_0x422f06];return _0x578a99;},a0_0x422f(_0x1fefac,_0x266243);}function stripHtml(_0x1bf3b4){const _0x4120a0=a0_0x321585;return(0x0,node_html_parser_1[_0x4120a0(0xd6)])(_0x1bf3b4)['textContent']||'';}function removePhrases(_0x522214,_0x36db75){const _0x54f703=a0_0x321585;if(!_0x522214)return null;let _0x595fe1=_0x522214;for(const _0x1d1711 of _0x36db75){_0x595fe1=_0x595fe1[_0x54f703(0xc4)](_0x1d1711,'')[_0x54f703(0xd4)]();}return _0x595fe1;}function truncateDescription(_0x150cf9){const _0x28aea4=a0_0x321585;if(!_0x150cf9)return null;const _0x17ffc2=_0x150cf9[_0x28aea4(0xc9)](/\n\s*\n/);let _0x5c2ecb=_0x17ffc2[0x0]||'';const _0x500169=_0x5c2ecb[_0x28aea4(0x9d)](/[^.!?]+[.!?]+|[^.!?]+$/g)||[];_0x500169[_0x28aea4(0xc5)]>0x5?_0x5c2ecb=_0x500169['slice'](0x0,0x5)[_0x28aea4(0xbe)]('')[_0x28aea4(0xd4)]():_0x5c2ecb=_0x500169[_0x28aea4(0xbe)]('')[_0x28aea4(0xd4)]();if(_0x5c2ecb['length']<_0x150cf9[_0x28aea4(0xc5)]&&!/[.!?]$/['test'](_0x5c2ecb)){const _0x5d6f48=_0x5c2ecb[_0x28aea4(0xd0)]('\x20');_0x5d6f48>-0x1?_0x5c2ecb=_0x5c2ecb['substring'](0x0,_0x5d6f48)+_0x28aea4(0xc1):_0x5c2ecb=_0x5c2ecb+_0x28aea4(0xc1);}return _0x5c2ecb[_0x28aea4(0xc5)]>0x0?_0x5c2ecb:null;}async function isImageLargeEnough(_0x3bb723){const _0x1d3977=a0_0x321585;try{const _0x2b80d0=await fetch(_0x3bb723,{'method':'HEAD','signal':AbortSignal[_0x1d3977(0xc3)](0x7d0)});if(!_0x2b80d0['ok']){if(_0x2b80d0[_0x1d3977(0xa1)]===0x194)return![];return!![];}const _0xb67e2d=_0x2b80d0['headers']['get']('content-length');if(_0xb67e2d){const _0x30f27e=parseInt(_0xb67e2d,0xa);if(_0x30f27e<0x3a98)return![];}return!![];}catch(_0x1d29c2){return!![];}}async function fetchArticleMetadata(_0x1ca94e){const _0x315177=a0_0x321585;try{const _0x360255=await fetch(_0x1ca94e,{'signal':AbortSignal[_0x315177(0xc3)](0x3a98)});if(!_0x360255['ok'])throw new Error(_0x315177(0xfd)+_0x360255['status']);const _0x3f5f11=await _0x360255[_0x315177(0xab)](),_0xf01891=(0x0,node_html_parser_1[_0x315177(0xd6)])(_0x3f5f11);let _0x2d26b2=null;const _0x3a31e7=['meta[property=\x22og:description\x22]',_0x315177(0xea),_0x315177(0x84)];for(const _0x4fc865 of _0x3a31e7){const _0xbbfdc1=_0xf01891['querySelector'](_0x4fc865);if(_0xbbfdc1&&_0xbbfdc1[_0x315177(0xed)](_0x315177(0xec))){_0x2d26b2=stripHtml(_0xbbfdc1[_0x315177(0xed)](_0x315177(0xec)))||null,_0x2d26b2=removePhrases(_0x2d26b2,phrasesToRemoveFromDescription),_0x2d26b2=truncateDescription(_0x2d26b2);break;}}let _0x33ddfe=null;const _0x3a3f66=[_0x315177(0xc6),_0x315177(0xb3)];for(const _0xd687a1 of _0x3a3f66){const _0x2906d5=_0xf01891[_0x315177(0xa7)](_0xd687a1);if(_0x2906d5&&_0x2906d5[_0x315177(0xed)](_0x315177(0xec))){_0x33ddfe=_0x2906d5['getAttribute'](_0x315177(0xec));break;}}return{'description':_0x2d26b2,'thumbnail_url':_0x33ddfe};}catch(_0x1f8039){return{'description':null,'thumbnail_url':null};}}async function processItem(_0x124eb9,_0x2ebf25){const _0x218c2d=a0_0x321585;let _0x1e9fdc=_0x124eb9['title']?cleanCdata(_0x124eb9[_0x218c2d(0x9e)]):null;_0x1e9fdc=removePhrases(_0x1e9fdc,phrasesToRemoveFromTitle);let _0x1daa9c=_0x124eb9[_0x218c2d(0xae)],_0x2c2d5b=null;if(_0x2ebf25[_0x218c2d(0xd9)][_0x218c2d(0x9a)]('hnrss.org')){if(_0x124eb9[_0x218c2d(0xec)]){const _0x34837f=(0x0,node_html_parser_1[_0x218c2d(0xd6)])(_0x124eb9['content']),_0x185fd2=_0x34837f[_0x218c2d(0xa7)](_0x218c2d(0xca));_0x185fd2&&_0x185fd2[_0x218c2d(0xab)]['startsWith'](_0x218c2d(0xa5))&&(_0x1daa9c=_0x185fd2[_0x218c2d(0xed)](_0x218c2d(0xeb)));}_0x2c2d5b=null;}else _0x124eb9[_0x218c2d(0xf7)]&&(_0x2c2d5b=stripHtml(cleanCdata(_0x124eb9[_0x218c2d(0xf7)]))||null,_0x2c2d5b=removePhrases(_0x2c2d5b,phrasesToRemoveFromDescription),_0x2c2d5b=truncateDescription(_0x2c2d5b));!_0x2c2d5b&&_0x124eb9[_0x218c2d(0xfb)]&&(_0x2c2d5b=stripHtml(cleanCdata(_0x124eb9[_0x218c2d(0xfb)]))||null,_0x2c2d5b=removePhrases(_0x2c2d5b,phrasesToRemoveFromDescription),_0x2c2d5b=truncateDescription(_0x2c2d5b));_0x2ebf25[_0x218c2d(0xd9)]===_0x218c2d(0x97)&&_0x124eb9[_0x218c2d(0x91)]&&(_0x2c2d5b=stripHtml(cleanCdata(_0x124eb9[_0x218c2d(0x91)]))||null,_0x2c2d5b=removePhrases(_0x2c2d5b,phrasesToRemoveFromDescription),_0x2c2d5b=truncateDescription(_0x2c2d5b));if(!_0x1e9fdc||!_0x1daa9c)return null;const _0x39c52c=(_0x1e9fdc+'\x20'+(_0x124eb9[_0x218c2d(0xf7)]?stripHtml(_0x124eb9['contentSnippet']):'')+'\x20'+(_0x124eb9['description']?stripHtml(_0x124eb9[_0x218c2d(0x91)]):''))[_0x218c2d(0x95)]();if(bannedKeywords[_0x218c2d(0xb1)](_0x399c82=>_0x39c52c['includes'](_0x399c82[_0x218c2d(0x95)]())))return null;const _0x31e87c=_0x124eb9[_0x218c2d(0xa6)]?new Date(_0x124eb9[_0x218c2d(0xa6)])['toISOString']():new Date()[_0x218c2d(0xb5)]();let _0x32b8a5=_0x124eb9[_0x218c2d(0xbd)]?_0x124eb9[_0x218c2d(0xbd)][_0x218c2d(0xd9)]:null;if(_0x124eb9[_0x218c2d(0x87)]){if(Array[_0x218c2d(0xd5)](_0x124eb9[_0x218c2d(0x87)])){const _0x23b385=_0x124eb9['media:content'][_0x218c2d(0x8c)]((_0x22c243,_0x17f378)=>{const _0x306432=_0x218c2d,_0x2c5648=_0x22c243['$']&&_0x22c243['$'][_0x306432(0x9f)]?parseInt(_0x22c243['$'][_0x306432(0x9f)],0xa):0x0,_0x16ddfa=_0x17f378['$']&&_0x17f378['$']['width']?parseInt(_0x17f378['$']['width'],0xa):0x0;return _0x16ddfa-_0x2c5648;}),_0x4b182a=_0x23b385[0x0];if(_0x4b182a){const _0x41b427=_0x4b182a['$']&&_0x4b182a['$'][_0x218c2d(0x9f)]?parseInt(_0x4b182a['$'][_0x218c2d(0x9f)],0xa):0x0;if(_0x41b427===0x0||_0x41b427>=0x12c){if(_0x4b182a['$']&&_0x4b182a['$'][_0x218c2d(0xd9)])_0x32b8a5=_0x4b182a['$']['url'];else{if(_0x4b182a[_0x218c2d(0xd9)])_0x32b8a5=_0x4b182a[_0x218c2d(0xd9)];}}}}else{const _0x38946f=_0x124eb9[_0x218c2d(0x87)],_0x1be0cb=_0x38946f['$']&&_0x38946f['$']['width']?parseInt(_0x38946f['$']['width'],0xa):_0x38946f['width']?parseInt(_0x38946f['width'],0xa):0x0;if(_0x1be0cb===0x0||_0x1be0cb>=0x12c){if(_0x38946f['$']&&_0x38946f['$'][_0x218c2d(0xd9)])_0x32b8a5=_0x38946f['$'][_0x218c2d(0xd9)];else{if(_0x38946f[_0x218c2d(0xd9)])_0x32b8a5=_0x38946f[_0x218c2d(0xd9)];}}}}if(!_0x32b8a5&&_0x124eb9[_0x218c2d(0xd1)]){if(_0x124eb9[_0x218c2d(0xd1)]['$']&&_0x124eb9[_0x218c2d(0xd1)]['$'][_0x218c2d(0xd9)])_0x32b8a5=_0x124eb9[_0x218c2d(0xd1)]['$'][_0x218c2d(0xd9)];else _0x124eb9['media:thumbnail'][_0x218c2d(0xd9)]&&(_0x32b8a5=_0x124eb9[_0x218c2d(0xd1)]['url']);}_0x32b8a5&&bannedThumbnails[_0x218c2d(0x9a)](_0x32b8a5)&&(_0x32b8a5=null);if(!_0x2c2d5b||!_0x32b8a5||_0x2ebf25['url'][_0x218c2d(0x9a)](_0x218c2d(0xef))||_0x2ebf25[_0x218c2d(0xd9)]==='https://rss.slashdot.org/Slashdot/slashdot'||_0x2ebf25[_0x218c2d(0xd9)]===_0x218c2d(0xe2)){const _0x231e00=await fetchArticleMetadata(_0x1daa9c);!_0x2c2d5b&&(_0x2c2d5b=_0x231e00['description']),!_0x32b8a5&&(_0x32b8a5=_0x231e00[_0x218c2d(0xd3)]);}_0x32b8a5&&bannedThumbnails[_0x218c2d(0x9a)](_0x32b8a5)&&(_0x32b8a5=null);if(_0x32b8a5){const _0x404d1b=await isImageLargeEnough(_0x32b8a5);!_0x404d1b&&(_0x32b8a5=null);}if(!_0x32b8a5)return null;const _0x311f96=_0x1e9fdc[_0x218c2d(0x95)]()[_0x218c2d(0xc4)](/[^a-z0-9\s]/g,'')['trim']()[_0x218c2d(0xc4)](/\s+/g,'-');let _0x3c582a=_0x311f96[_0x218c2d(0xf4)](0x0,0x3c);_0x3c582a[_0x218c2d(0xa0)]('-')&&(_0x3c582a=_0x3c582a[_0x218c2d(0xda)](0x0,-0x1));!_0x3c582a&&(_0x3c582a=_0x218c2d(0xff)+Date[_0x218c2d(0xf1)]());let _0x2de575=_0x2ebf25[_0x218c2d(0xd2)]||_0x218c2d(0xf2);if(_0x2ebf25[_0x218c2d(0xb8)]===_0x218c2d(0xf9)&&_0x1daa9c){if(_0x1daa9c[_0x218c2d(0x9a)](_0x218c2d(0xa8)))_0x2de575=_0x218c2d(0x98);else{if(_0x1daa9c['includes'](_0x218c2d(0xde)))_0x2de575=_0x218c2d(0xa3);else{if(_0x1daa9c[_0x218c2d(0x9a)](_0x218c2d(0xc8)))_0x2de575='tech';else _0x1daa9c['includes'](_0x218c2d(0xfc))&&(_0x2de575=_0x218c2d(0xe9));}}}else{if(_0x2ebf25['url']==='https://rss.slashdot.org/Slashdot/slashdot'&&_0x1daa9c){const _0x25e680=_0x1daa9c['match'](/https:\/\/([a-z]+)\.slashdot\.org/);if(_0x25e680&&_0x25e680[0x1]){const _0x5b98e4=_0x25e680[0x1];switch(_0x5b98e4){case'it':case'tech':case _0x218c2d(0xdd):case _0x218c2d(0xcb):_0x2de575=_0x218c2d(0xe3);break;case _0x218c2d(0x83):_0x2de575=_0x218c2d(0x83);break;case'games':_0x2de575=_0x218c2d(0xad);break;case _0x218c2d(0xf2):case _0x218c2d(0xb7):case _0x218c2d(0xcc):default:_0x2de575=_0x218c2d(0xf2);break;}}else _0x2de575=_0x218c2d(0xf2);}}return{'slug':_0x3c582a,'title':_0x1e9fdc,'description':_0x2c2d5b,'link':_0x1daa9c,'thumbnail_url':_0x32b8a5,'created_at':new Date()['toISOString'](),'topic':_0x2de575};}async function run(){const _0x21960e=a0_0x321585;console[_0x21960e(0xba)](_0x21960e(0x90));const _0x7bd62a=new Date()['toISOString']()['split']('T')[0x0],_0xd38dd0=path[_0x21960e(0xbe)](OUTPUT_DIR,_0x7bd62a+'.json');let _0x261f12=[];if(fs[_0x21960e(0xac)](INDEX_FILE))try{_0x261f12=JSON['parse'](fs[_0x21960e(0x8f)](INDEX_FILE,_0x21960e(0x88)));}catch(_0x13b201){console[_0x21960e(0xaf)](_0x21960e(0x8e));}const _0x3430aa=new Set(_0x261f12);let _0x19ee66=[];if(fs['existsSync'](_0xd38dd0))try{_0x19ee66=JSON['parse'](fs[_0x21960e(0x8f)](_0xd38dd0,_0x21960e(0x88)));}catch(_0x2a2f64){console['error']('Error\x20reading\x20daily\x20file,\x20starting\x20fresh.');}let _0x521dcc=0x0;for(const _0x43f664 of sources_1[_0x21960e(0xce)]){console[_0x21960e(0xba)](_0x21960e(0x89)+_0x43f664['name']);try{const _0x3c303f=await parser['parseURL'](_0x43f664[_0x21960e(0xd9)]),_0x2ff454=_0x3c303f[_0x21960e(0xd7)]['slice'](0x0,_0x43f664[_0x21960e(0xc0)]||_0x3c303f['items'][_0x21960e(0xc5)]);for(const _0x40bd16 of _0x2ff454){try{const _0x43c3d4=await processItem(_0x40bd16,_0x43f664);_0x43c3d4&&_0x43c3d4[_0x21960e(0xae)]&&(!_0x3430aa[_0x21960e(0xdf)](_0x43c3d4[_0x21960e(0xae)])&&(_0x19ee66[_0x21960e(0xfe)](_0x43c3d4),_0x3430aa[_0x21960e(0x93)](_0x43c3d4[_0x21960e(0xae)]),_0x521dcc++));}catch(_0x2e958b){console[_0x21960e(0xaf)](_0x21960e(0xbc)+_0x43f664[_0x21960e(0xb8)]+':',_0x2e958b);}}}catch(_0x3b6114){console['error'](_0x21960e(0x9b)+_0x43f664[_0x21960e(0xb8)]+':',_0x3b6114);}}fs[_0x21960e(0xbb)](_0xd38dd0,JSON[_0x21960e(0xdc)](_0x19ee66,null,0x2)),fs[_0x21960e(0xbb)](INDEX_FILE,JSON['stringify'](Array['from'](_0x3430aa),null,0x2)),console[_0x21960e(0xba)]('Job\x20finished.\x20Added\x20'+_0x521dcc+_0x21960e(0xf5)+_0xd38dd0);}run()[a0_0x321585(0xe0)](console[a0_0x321585(0xaf)]);
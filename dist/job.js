'use strict';const a0_0x30939c=a0_0x123b;(function(_0x3b8514,_0x50af3e){const _0x315a0c=a0_0x123b,_0x2f574b=_0x3b8514();while(!![]){try{const _0x4f4615=-parseInt(_0x315a0c(0x1fb))/0x1+parseInt(_0x315a0c(0x24d))/0x2*(parseInt(_0x315a0c(0x22c))/0x3)+-parseInt(_0x315a0c(0x253))/0x4*(parseInt(_0x315a0c(0x207))/0x5)+-parseInt(_0x315a0c(0x204))/0x6+-parseInt(_0x315a0c(0x203))/0x7+-parseInt(_0x315a0c(0x221))/0x8*(-parseInt(_0x315a0c(0x267))/0x9)+parseInt(_0x315a0c(0x239))/0xa;if(_0x4f4615===_0x50af3e)break;else _0x2f574b['push'](_0x2f574b['shift']());}catch(_0x33d0ed){_0x2f574b['push'](_0x2f574b['shift']());}}}(a0_0x3d96,0x3be06));var __createBinding=this&&this[a0_0x30939c(0x23c)]||(Object[a0_0x30939c(0x25f)]?function(_0x4022eb,_0x236701,_0x4a0919,_0x128cb3){const _0x2d95f1=a0_0x30939c;if(_0x128cb3===undefined)_0x128cb3=_0x4a0919;var _0x4924c7=Object[_0x2d95f1(0x223)](_0x236701,_0x4a0919);(!_0x4924c7||(_0x2d95f1(0x20d)in _0x4924c7?!_0x236701[_0x2d95f1(0x23f)]:_0x4924c7['writable']||_0x4924c7[_0x2d95f1(0x22e)]))&&(_0x4924c7={'enumerable':!![],'get':function(){return _0x236701[_0x4a0919];}}),Object[_0x2d95f1(0x219)](_0x4022eb,_0x128cb3,_0x4924c7);}:function(_0x580f67,_0x1a6afe,_0x9c682e,_0x22a642){if(_0x22a642===undefined)_0x22a642=_0x9c682e;_0x580f67[_0x22a642]=_0x1a6afe[_0x9c682e];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a0_0x30939c(0x25f)]?function(_0x517b0d,_0x219564){const _0x2a4f07=a0_0x30939c;Object[_0x2a4f07(0x219)](_0x517b0d,_0x2a4f07(0x268),{'enumerable':!![],'value':_0x219564});}:function(_0x2740f6,_0x22d464){const _0x252ff5=a0_0x30939c;_0x2740f6[_0x252ff5(0x268)]=_0x22d464;}),__importStar=this&&this[a0_0x30939c(0x22d)]||(function(){var _0x28ba78=function(_0x121996){const _0x1e5fad=a0_0x123b;return _0x28ba78=Object[_0x1e5fad(0x20e)]||function(_0x31aaf6){const _0x31bcc8=_0x1e5fad;var _0x29d97d=[];for(var _0x13682a in _0x31aaf6)if(Object[_0x31bcc8(0x242)][_0x31bcc8(0x1fa)][_0x31bcc8(0x200)](_0x31aaf6,_0x13682a))_0x29d97d[_0x29d97d['length']]=_0x13682a;return _0x29d97d;},_0x28ba78(_0x121996);};return function(_0x1ab1aa){const _0x25719c=a0_0x123b;if(_0x1ab1aa&&_0x1ab1aa['__esModule'])return _0x1ab1aa;var _0x22e272={};if(_0x1ab1aa!=null){for(var _0xf5008e=_0x28ba78(_0x1ab1aa),_0x43c9c7=0x0;_0x43c9c7<_0xf5008e[_0x25719c(0x250)];_0x43c9c7++)if(_0xf5008e[_0x43c9c7]!==_0x25719c(0x268))__createBinding(_0x22e272,_0x1ab1aa,_0xf5008e[_0x43c9c7]);}return __setModuleDefault(_0x22e272,_0x1ab1aa),_0x22e272;};}()),__importDefault=this&&this['__importDefault']||function(_0x122d4a){const _0x514b5f=a0_0x30939c;return _0x122d4a&&_0x122d4a[_0x514b5f(0x23f)]?_0x122d4a:{'default':_0x122d4a};};Object[a0_0x30939c(0x219)](exports,a0_0x30939c(0x23f),{'value':!![]});const fs=__importStar(require('fs')),path=__importStar(require(a0_0x30939c(0x206))),rss_parser_1=__importDefault(require('rss-parser')),node_html_parser_1=require(a0_0x30939c(0x20c)),sources_1=require(a0_0x30939c(0x245)),parser=new rss_parser_1[(a0_0x30939c(0x268))](),OUTPUT_DIR=path[a0_0x30939c(0x216)](__dirname,a0_0x30939c(0x211));!fs['existsSync'](OUTPUT_DIR)&&fs[a0_0x30939c(0x25c)](OUTPUT_DIR,{'recursive':!![]});const INDEX_FILE=path[a0_0x30939c(0x216)](OUTPUT_DIR,'index.json'),bannedKeywords=['Only\x20Fans','porn',a0_0x30939c(0x1f5),a0_0x30939c(0x265),a0_0x30939c(0x249),'Form\x2013G',a0_0x30939c(0x21b),a0_0x30939c(0x244),a0_0x30939c(0x1fc),a0_0x30939c(0x24f),a0_0x30939c(0x230)],bannedThumbnails=['https://s.yimg.com/cv/apiv2/social/images/yahoo_default_logo-1200x1200.png'],phrasesToRemoveFromDescription=[a0_0x30939c(0x1f7),a0_0x30939c(0x208)],phrasesToRemoveFromTitle=[a0_0x30939c(0x257),a0_0x30939c(0x232)];function cleanCdata(_0x440848){const _0x4157cd=a0_0x30939c;return _0x440848[_0x4157cd(0x218)](/<!\[CDATA\[|\]\]>/g,'')[_0x4157cd(0x262)]();}function stripHtml(_0x24d0a2){const _0x159574=a0_0x30939c;return(0x0,node_html_parser_1[_0x159574(0x215)])(_0x24d0a2)['textContent']||'';}function a0_0x3d96(){const _0x55489a=['call','has','enclosure','1811075yCRKZl','342294zDhfxo','name','path','5SvuwLc','Read\x20more\x20of\x20this\x20story\x20at\x20Slashdot.','getAttribute','endsWith','hardware','node-html-parser','get','getOwnPropertyNames','existsSync','...','../output','from','test','sort','parse','join','includes','replace','defineProperty','meta[name=\x22twitter:description\x22]','Form\x20144','https://www.investing.com/rss/news.rss','auto','error','add','substring','2312owYeLk','querySelector','getOwnPropertyDescriptor','log','meta[name=\x22description\x22]','toLowerCase','readFileSync','url','HEAD','p\x20a','tech.yahoo.com','39MvMwIo','__importStar','configurable','lastIndexOf','best','content','Show\x20HN:','contentSnippet','meta[name=\x22twitter:image\x22]','autos.yahoo.com','items','games','.json','4789530dGMfIv','width','toISOString','__createBinding','content:encoded','status','__esModule','max_items','utf-8','prototype','title','deals','./sources','link','media:thumbnail','media:content','Form\x2013F','catch','writeFileSync','some','34328XojtIf','news','discount','length','stringify','developers','109068kCZCBl','science','split','href','Tell\x20HN:','health','finance.yahoo.com','Error\x20reading\x20index\x20file,\x20starting\x20fresh.','text','mkdirSync','https://rss.slashdot.org/Slashdot/slashdot','Job\x20finished.\x20Added\x20','create','content-length','sourcesData','trim','description','Error\x20fetching\x20source\x20','gambling','now','6732rCQkFV','default','hnrss.org','Yahoo\x20News','post-','meta[property=\x22og:description\x22]','pubDate','topic','timeout','meta[property=\x22og:image\x22]','sex','slice','(Source:\x20Bloomberg)','headers','\x20new\x20items.\x20Saved\x20to\x20','hasOwnProperty','329962arvLys','black\x20friday','Starting\x20job...','tech','thumbnail_url'];a0_0x3d96=function(){return _0x55489a;};return a0_0x3d96();}function removePhrases(_0x588a2f,_0x129d4b){const _0x1eff30=a0_0x30939c;if(!_0x588a2f)return null;let _0x3c54a0=_0x588a2f;for(const _0x36e48e of _0x129d4b){_0x3c54a0=_0x3c54a0[_0x1eff30(0x218)](_0x36e48e,'')[_0x1eff30(0x262)]();}return _0x3c54a0;}function truncateDescription(_0x491c4d){const _0x238930=a0_0x30939c;if(!_0x491c4d)return null;const _0x57ee04=_0x491c4d['split'](/\n\s*\n/);let _0x486652=_0x57ee04[0x0]||'';const _0x2fecd0=_0x486652['match'](/[^.!?]+[.!?]+|[^.!?]+$/g)||[];_0x2fecd0[_0x238930(0x250)]>0x5?_0x486652=_0x2fecd0['slice'](0x0,0x5)[_0x238930(0x216)]('')['trim']():_0x486652=_0x2fecd0[_0x238930(0x216)]('')[_0x238930(0x262)]();if(_0x486652['length']<_0x491c4d[_0x238930(0x250)]&&!/[.!?]$/[_0x238930(0x213)](_0x486652)){const _0x18c762=_0x486652[_0x238930(0x22f)]('\x20');_0x18c762>-0x1?_0x486652=_0x486652[_0x238930(0x220)](0x0,_0x18c762)+_0x238930(0x210):_0x486652=_0x486652+'...';}return _0x486652[_0x238930(0x250)]>0x0?_0x486652:null;}async function isImageLargeEnough(_0x395346){const _0x560366=a0_0x30939c;try{const _0x3083da=await fetch(_0x395346,{'method':_0x560366(0x229),'signal':AbortSignal[_0x560366(0x1f3)](0x7d0)});if(!_0x3083da['ok']){if(_0x3083da[_0x560366(0x23e)]===0x194)return![];return!![];}const _0x51cd0a=_0x3083da[_0x560366(0x1f8)][_0x560366(0x20d)](_0x560366(0x260));if(_0x51cd0a){const _0x1fc852=parseInt(_0x51cd0a,0xa);if(_0x1fc852<0x3a98)return![];}return!![];}catch(_0x35a7fc){return!![];}}function a0_0x123b(_0x2ab17a,_0x22cdef){const _0x3d9671=a0_0x3d96();return a0_0x123b=function(_0x123b86,_0xf7b9c8){_0x123b86=_0x123b86-0x1f1;let _0x473bca=_0x3d9671[_0x123b86];return _0x473bca;},a0_0x123b(_0x2ab17a,_0x22cdef);}async function fetchArticleMetadata(_0x1aa547){const _0x5d6299=a0_0x30939c;try{const _0x128399=await fetch(_0x1aa547,{'signal':AbortSignal[_0x5d6299(0x1f3)](0x3a98)});if(!_0x128399['ok'])throw new Error('HTTP\x20error!\x20status:\x20'+_0x128399[_0x5d6299(0x23e)]);const _0x208f5f=await _0x128399[_0x5d6299(0x25b)](),_0xea68bc=(0x0,node_html_parser_1['parse'])(_0x208f5f);let _0xa9f466=null;const _0x3a6a28=[_0x5d6299(0x26c),_0x5d6299(0x21a),_0x5d6299(0x225)];for(const _0x57e34a of _0x3a6a28){const _0x4d57e1=_0xea68bc[_0x5d6299(0x222)](_0x57e34a);if(_0x4d57e1&&_0x4d57e1['getAttribute'](_0x5d6299(0x231))){_0xa9f466=stripHtml(_0x4d57e1['getAttribute'](_0x5d6299(0x231)))||null,_0xa9f466=removePhrases(_0xa9f466,phrasesToRemoveFromDescription),_0xa9f466=truncateDescription(_0xa9f466);break;}}let _0x373077=null;const _0x582d8b=[_0x5d6299(0x1f4),_0x5d6299(0x234)];for(const _0xfc7b9f of _0x582d8b){const _0x3a32a7=_0xea68bc[_0x5d6299(0x222)](_0xfc7b9f);if(_0x3a32a7&&_0x3a32a7[_0x5d6299(0x209)](_0x5d6299(0x231))){_0x373077=_0x3a32a7[_0x5d6299(0x209)](_0x5d6299(0x231));break;}}return{'description':_0xa9f466,'thumbnail_url':_0x373077};}catch(_0x2165ad){return{'description':null,'thumbnail_url':null};}}async function processItem(_0xe23f0b,_0x4b3609){const _0x3d8291=a0_0x30939c;let _0xb9592c=_0xe23f0b[_0x3d8291(0x243)]?stripHtml(cleanCdata(_0xe23f0b[_0x3d8291(0x243)])):null;_0xb9592c=removePhrases(_0xb9592c,phrasesToRemoveFromTitle);let _0x3c7373=_0xe23f0b[_0x3d8291(0x246)],_0x131960=null;if(_0x4b3609['url'][_0x3d8291(0x217)](_0x3d8291(0x269))){if(_0xe23f0b['content']){const _0x42439a=(0x0,node_html_parser_1[_0x3d8291(0x215)])(_0xe23f0b[_0x3d8291(0x231)]),_0x4a91bc=_0x42439a['querySelector'](_0x3d8291(0x22a));_0x4a91bc&&_0x4a91bc[_0x3d8291(0x25b)]['startsWith']('Article\x20URL:')&&(_0x3c7373=_0x4a91bc[_0x3d8291(0x209)](_0x3d8291(0x256)));}_0x131960=null;}else _0xe23f0b[_0x3d8291(0x233)]&&(_0x131960=stripHtml(cleanCdata(_0xe23f0b[_0x3d8291(0x233)]))||null,_0x131960=removePhrases(_0x131960,phrasesToRemoveFromDescription),_0x131960=truncateDescription(_0x131960));!_0x131960&&_0xe23f0b[_0x3d8291(0x23d)]&&(_0x131960=stripHtml(cleanCdata(_0xe23f0b['content:encoded']))||null,_0x131960=removePhrases(_0x131960,phrasesToRemoveFromDescription),_0x131960=truncateDescription(_0x131960));_0x4b3609[_0x3d8291(0x228)]===_0x3d8291(0x25d)&&_0xe23f0b[_0x3d8291(0x263)]&&(_0x131960=stripHtml(cleanCdata(_0xe23f0b[_0x3d8291(0x263)]))||null,_0x131960=removePhrases(_0x131960,phrasesToRemoveFromDescription),_0x131960=truncateDescription(_0x131960));if(!_0xb9592c||!_0x3c7373)return null;const _0x42b140=(_0xb9592c+'\x20'+(_0xe23f0b[_0x3d8291(0x233)]?stripHtml(_0xe23f0b[_0x3d8291(0x233)]):'')+'\x20'+(_0xe23f0b[_0x3d8291(0x263)]?stripHtml(_0xe23f0b['description']):''))[_0x3d8291(0x226)]();if(bannedKeywords[_0x3d8291(0x24c)](_0x1974ef=>_0x42b140['includes'](_0x1974ef[_0x3d8291(0x226)]())))return null;const _0x1915ce=_0xe23f0b[_0x3d8291(0x1f1)]?new Date(_0xe23f0b[_0x3d8291(0x1f1)])[_0x3d8291(0x23b)]():new Date()[_0x3d8291(0x23b)]();let _0x2dd1b2=_0xe23f0b[_0x3d8291(0x202)]?_0xe23f0b['enclosure'][_0x3d8291(0x228)]:null;if(_0xe23f0b[_0x3d8291(0x248)]){if(Array['isArray'](_0xe23f0b[_0x3d8291(0x248)])){const _0x2cda9f=_0xe23f0b['media:content'][_0x3d8291(0x214)]((_0x2deded,_0x243cfd)=>{const _0x17d683=_0x3d8291,_0x4c9d14=_0x2deded['$']&&_0x2deded['$'][_0x17d683(0x23a)]?parseInt(_0x2deded['$'][_0x17d683(0x23a)],0xa):0x0,_0x3f9e7c=_0x243cfd['$']&&_0x243cfd['$'][_0x17d683(0x23a)]?parseInt(_0x243cfd['$'][_0x17d683(0x23a)],0xa):0x0;return _0x3f9e7c-_0x4c9d14;}),_0x33959c=_0x2cda9f[0x0];if(_0x33959c){const _0xbdba60=_0x33959c['$']&&_0x33959c['$'][_0x3d8291(0x23a)]?parseInt(_0x33959c['$'][_0x3d8291(0x23a)],0xa):0x0;if(_0xbdba60===0x0||_0xbdba60>=0x12c){if(_0x33959c['$']&&_0x33959c['$'][_0x3d8291(0x228)])_0x2dd1b2=_0x33959c['$']['url'];else{if(_0x33959c[_0x3d8291(0x228)])_0x2dd1b2=_0x33959c['url'];}}}}else{const _0xbff0f2=_0xe23f0b['media:content'],_0x3bb772=_0xbff0f2['$']&&_0xbff0f2['$'][_0x3d8291(0x23a)]?parseInt(_0xbff0f2['$'][_0x3d8291(0x23a)],0xa):_0xbff0f2[_0x3d8291(0x23a)]?parseInt(_0xbff0f2[_0x3d8291(0x23a)],0xa):0x0;if(_0x3bb772===0x0||_0x3bb772>=0x12c){if(_0xbff0f2['$']&&_0xbff0f2['$'][_0x3d8291(0x228)])_0x2dd1b2=_0xbff0f2['$'][_0x3d8291(0x228)];else{if(_0xbff0f2[_0x3d8291(0x228)])_0x2dd1b2=_0xbff0f2['url'];}}}}if(!_0x2dd1b2&&_0xe23f0b['media:thumbnail']){if(_0xe23f0b['media:thumbnail']['$']&&_0xe23f0b[_0x3d8291(0x247)]['$'][_0x3d8291(0x228)])_0x2dd1b2=_0xe23f0b[_0x3d8291(0x247)]['$']['url'];else _0xe23f0b[_0x3d8291(0x247)][_0x3d8291(0x228)]&&(_0x2dd1b2=_0xe23f0b['media:thumbnail']['url']);}_0x2dd1b2&&bannedThumbnails[_0x3d8291(0x217)](_0x2dd1b2)&&(_0x2dd1b2=null);if(!_0x131960||!_0x2dd1b2||_0x4b3609[_0x3d8291(0x228)][_0x3d8291(0x217)](_0x3d8291(0x269))||_0x4b3609[_0x3d8291(0x228)]==='https://rss.slashdot.org/Slashdot/slashdot'||_0x4b3609['url']===_0x3d8291(0x21c)){const _0x582105=await fetchArticleMetadata(_0x3c7373);!_0x131960&&(_0x131960=_0x582105[_0x3d8291(0x263)]),!_0x2dd1b2&&(_0x2dd1b2=_0x582105[_0x3d8291(0x1ff)]);}_0x2dd1b2&&bannedThumbnails[_0x3d8291(0x217)](_0x2dd1b2)&&(_0x2dd1b2=null);if(_0x2dd1b2){const _0x10581c=await isImageLargeEnough(_0x2dd1b2);!_0x10581c&&(_0x2dd1b2=null);}if(!_0x2dd1b2)return null;const _0x32676c=_0xb9592c[_0x3d8291(0x226)]()[_0x3d8291(0x218)](/[^a-z0-9\s]/g,'')[_0x3d8291(0x262)]()[_0x3d8291(0x218)](/\s+/g,'-');let _0x3ff6bd=_0x32676c[_0x3d8291(0x220)](0x0,0x3c);_0x3ff6bd[_0x3d8291(0x20a)]('-')&&(_0x3ff6bd=_0x3ff6bd[_0x3d8291(0x1f6)](0x0,-0x1));!_0x3ff6bd&&(_0x3ff6bd=_0x3d8291(0x26b)+Date[_0x3d8291(0x266)]());let _0x40999d=_0x4b3609[_0x3d8291(0x1f2)]||_0x3d8291(0x24e);if(_0x4b3609[_0x3d8291(0x205)]===_0x3d8291(0x26a)&&_0x3c7373){if(_0x3c7373[_0x3d8291(0x217)](_0x3d8291(0x259)))_0x40999d='finance';else{if(_0x3c7373[_0x3d8291(0x217)](_0x3d8291(0x235)))_0x40999d=_0x3d8291(0x21d);else{if(_0x3c7373['includes'](_0x3d8291(0x22b)))_0x40999d=_0x3d8291(0x1fe);else _0x3c7373['includes']('health.yahoo.com')&&(_0x40999d=_0x3d8291(0x258));}}}else{if(_0x4b3609[_0x3d8291(0x228)]===_0x3d8291(0x25d)&&_0x3c7373){const _0x25eb91=_0x3c7373['match'](/https:\/\/([a-z]+)\.slashdot\.org/);if(_0x25eb91&&_0x25eb91[0x1]){const _0x1a7ea8=_0x25eb91[0x1];switch(_0x1a7ea8){case'it':case _0x3d8291(0x1fe):case _0x3d8291(0x20b):case _0x3d8291(0x252):_0x40999d=_0x3d8291(0x1fe);break;case _0x3d8291(0x254):_0x40999d='science';break;case _0x3d8291(0x237):_0x40999d='gaming';break;case _0x3d8291(0x24e):case'yro':case'books':default:_0x40999d=_0x3d8291(0x24e);break;}}else _0x40999d=_0x3d8291(0x24e);}}return{'slug':_0x3ff6bd,'title':_0xb9592c,'description':_0x131960,'link':_0x3c7373,'thumbnail_url':_0x2dd1b2,'created_at':new Date()['toISOString'](),'topic':_0x40999d};}async function run(){const _0x6942b7=a0_0x30939c;console[_0x6942b7(0x224)](_0x6942b7(0x1fd));const _0x4a5b4f=new Date()[_0x6942b7(0x23b)]()[_0x6942b7(0x255)]('T')[0x0],_0x3dd113=path['join'](OUTPUT_DIR,_0x4a5b4f+_0x6942b7(0x238));let _0x156cba=[];if(fs['existsSync'](INDEX_FILE))try{_0x156cba=JSON[_0x6942b7(0x215)](fs[_0x6942b7(0x227)](INDEX_FILE,_0x6942b7(0x241)));}catch(_0x2fdf73){console['error'](_0x6942b7(0x25a));}const _0x134b7a=new Set(_0x156cba);let _0x1e7953=[];if(fs[_0x6942b7(0x20f)](_0x3dd113))try{_0x1e7953=JSON[_0x6942b7(0x215)](fs[_0x6942b7(0x227)](_0x3dd113,'utf-8'));}catch(_0x107d4c){console[_0x6942b7(0x21e)]('Error\x20reading\x20daily\x20file,\x20starting\x20fresh.');}let _0x4f1a55=0x0;for(const _0x354abe of sources_1[_0x6942b7(0x261)]){console['log']('Processing\x20source:\x20'+_0x354abe[_0x6942b7(0x205)]);try{const _0x426711=await parser['parseURL'](_0x354abe['url']),_0x33bc00=_0x426711[_0x6942b7(0x236)][_0x6942b7(0x1f6)](0x0,_0x354abe[_0x6942b7(0x240)]||_0x426711[_0x6942b7(0x236)][_0x6942b7(0x250)]);for(const _0x188f14 of _0x33bc00){try{const _0x3cfeb6=await processItem(_0x188f14,_0x354abe);_0x3cfeb6&&_0x3cfeb6['link']&&(!_0x134b7a[_0x6942b7(0x201)](_0x3cfeb6[_0x6942b7(0x246)])&&(_0x1e7953['push'](_0x3cfeb6),_0x134b7a[_0x6942b7(0x21f)](_0x3cfeb6[_0x6942b7(0x246)]),_0x4f1a55++));}catch(_0x386226){console[_0x6942b7(0x21e)]('Error\x20processing\x20item\x20from\x20'+_0x354abe[_0x6942b7(0x205)]+':',_0x386226);}}}catch(_0x5cbbf7){console[_0x6942b7(0x21e)](_0x6942b7(0x264)+_0x354abe[_0x6942b7(0x205)]+':',_0x5cbbf7);}}fs[_0x6942b7(0x24b)](_0x3dd113,JSON['stringify'](_0x1e7953,null,0x2),_0x6942b7(0x241)),fs[_0x6942b7(0x24b)](INDEX_FILE,JSON[_0x6942b7(0x251)](Array[_0x6942b7(0x212)](_0x134b7a),null,0x2),_0x6942b7(0x241)),console[_0x6942b7(0x224)](_0x6942b7(0x25e)+_0x4f1a55+_0x6942b7(0x1f9)+_0x3dd113);}run()[a0_0x30939c(0x24a)](console['error']);
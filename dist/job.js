'use strict';const a0_0x4ce6ff=a0_0x4a37;(function(_0x5eefd0,_0x18d445){const _0x1d0c84=a0_0x4a37,_0x94f9d8=_0x5eefd0();while(!![]){try{const _0x3c8bdc=-parseInt(_0x1d0c84(0x163))/0x1*(parseInt(_0x1d0c84(0x182))/0x2)+parseInt(_0x1d0c84(0x16a))/0x3+-parseInt(_0x1d0c84(0x18d))/0x4+parseInt(_0x1d0c84(0x17d))/0x5+-parseInt(_0x1d0c84(0x171))/0x6*(parseInt(_0x1d0c84(0x1b7))/0x7)+parseInt(_0x1d0c84(0x1ad))/0x8*(parseInt(_0x1d0c84(0x187))/0x9)+-parseInt(_0x1d0c84(0x153))/0xa*(-parseInt(_0x1d0c84(0x1a7))/0xb);if(_0x3c8bdc===_0x18d445)break;else _0x94f9d8['push'](_0x94f9d8['shift']());}catch(_0x607a31){_0x94f9d8['push'](_0x94f9d8['shift']());}}}(a0_0xdc81,0xf2a97));function a0_0xdc81(){const _0x435a41=['has','lastIndexOf','media:content','match','autos.yahoo.com','games','__awaiter','Job\x20finished.\x20Added\x20','porn','textContent','6535065yzNSeB','Error\x20fetching\x20source\x20','then','next','gambling','3563422brJRzo','__esModule','HTTP\x20error!\x20status:\x20','Starting\x20job...','science','18702LDIkEU','replace','description','Read\x20more\x20of\x20this\x20story\x20at\x20Slashdot.','readFileSync','Error\x20reading\x20daily\x20file,\x20starting\x20fresh.','4755428KrXtdv','timeout','startsWith','path','catch','length','split','meta[name=\x22twitter:description\x22]','error','books','Error\x20reading\x20index\x20file,\x20starting\x20fresh.','__setModuleDefault','includes','mkdirSync','Only\x20Fans','link','getAttribute','Form\x2013F','post-','title','../output','log','throw','utf-8','default','querySelector','2497SNyajh','yro','tech','index.json','parseURL','\x20new\x20items.\x20Saved\x20to\x20','4984YefStO','substring','writeFileSync','meta[property=\x22og:image\x22]','trim','getOwnPropertyNames','existsSync','sourcesData','gaming','sex','491218pszXUh','tech.yahoo.com','content','items','toISOString','prototype','https://rss.slashdot.org/Slashdot/slashdot','slice','join','getOwnPropertyDescriptor','text','url','test','done','(Source:\x20Bloomberg)','topic','news','href','Processing\x20source:\x20','63490IgEMXu','Error\x20processing\x20item\x20from\x20','Tell\x20HN:','node-html-parser','endsWith','hasOwnProperty','meta[name=\x22description\x22]','apply','pubDate','__importDefault','defineProperty','rss-parser','stringify','toLowerCase','finance.yahoo.com','__importStar','1lSMMvV','contentSnippet','auto','health.yahoo.com','https://www.investing.com/rss/news.rss','name','enclosure','1238697kuUjoX','meta[name=\x22twitter:image\x22]','parse','Show\x20HN:','value','hardware','call','42aaiylT','create'];a0_0xdc81=function(){return _0x435a41;};return a0_0xdc81();}var __createBinding=this&&this['__createBinding']||(Object[a0_0x4ce6ff(0x172)]?function(_0x190ef9,_0x16f3ce,_0x1047f4,_0x30a787){const _0x16c13d=a0_0x4ce6ff;if(_0x30a787===undefined)_0x30a787=_0x1047f4;var _0x2c6340=Object[_0x16c13d(0x149)](_0x16f3ce,_0x1047f4);(!_0x2c6340||('get'in _0x2c6340?!_0x16f3ce['__esModule']:_0x2c6340['writable']||_0x2c6340['configurable']))&&(_0x2c6340={'enumerable':!![],'get':function(){return _0x16f3ce[_0x1047f4];}}),Object[_0x16c13d(0x15d)](_0x190ef9,_0x30a787,_0x2c6340);}:function(_0x1fa843,_0x129f13,_0x411e24,_0x48f9db){if(_0x48f9db===undefined)_0x48f9db=_0x411e24;_0x1fa843[_0x48f9db]=_0x129f13[_0x411e24];}),__setModuleDefault=this&&this[a0_0x4ce6ff(0x198)]||(Object['create']?function(_0x32787e,_0x349a9d){const _0x2ed620=a0_0x4ce6ff;Object[_0x2ed620(0x15d)](_0x32787e,_0x2ed620(0x1a5),{'enumerable':!![],'value':_0x349a9d});}:function(_0x3eff76,_0x3a3709){const _0xf2eda1=a0_0x4ce6ff;_0x3eff76[_0xf2eda1(0x1a5)]=_0x3a3709;}),__importStar=this&&this[a0_0x4ce6ff(0x162)]||(function(){var _0x44b706=function(_0x59249f){const _0x3da226=a0_0x4a37;return _0x44b706=Object[_0x3da226(0x1b2)]||function(_0x20aa5c){const _0x2f4245=_0x3da226;var _0x3d6ef0=[];for(var _0x1fadad in _0x20aa5c)if(Object[_0x2f4245(0x1bc)][_0x2f4245(0x158)][_0x2f4245(0x170)](_0x20aa5c,_0x1fadad))_0x3d6ef0[_0x3d6ef0['length']]=_0x1fadad;return _0x3d6ef0;},_0x44b706(_0x59249f);};return function(_0x2eb64f){const _0x2d4f87=a0_0x4a37;if(_0x2eb64f&&_0x2eb64f[_0x2d4f87(0x183)])return _0x2eb64f;var _0x32dd18={};if(_0x2eb64f!=null){for(var _0x2428a1=_0x44b706(_0x2eb64f),_0x92beee=0x0;_0x92beee<_0x2428a1[_0x2d4f87(0x192)];_0x92beee++)if(_0x2428a1[_0x92beee]!==_0x2d4f87(0x1a5))__createBinding(_0x32dd18,_0x2eb64f,_0x2428a1[_0x92beee]);}return __setModuleDefault(_0x32dd18,_0x2eb64f),_0x32dd18;};}()),__awaiter=this&&this[a0_0x4ce6ff(0x179)]||function(_0x3b35bb,_0x4e7cb9,_0x3195db,_0x29f90e){function _0x1f7a94(_0x11942f){return _0x11942f instanceof _0x3195db?_0x11942f:new _0x3195db(function(_0x341387){_0x341387(_0x11942f);});}return new(_0x3195db||(_0x3195db=Promise))(function(_0x26b57e,_0x1d4f8c){const _0x34ccfd=a0_0x4a37;function _0x4c164f(_0x4b8f3d){const _0x1ac1da=a0_0x4a37;try{_0x2adb6e(_0x29f90e[_0x1ac1da(0x180)](_0x4b8f3d));}catch(_0x55cc9c){_0x1d4f8c(_0x55cc9c);}}function _0x564d4d(_0x55ccaa){const _0x51928e=a0_0x4a37;try{_0x2adb6e(_0x29f90e[_0x51928e(0x1a3)](_0x55ccaa));}catch(_0x24b66c){_0x1d4f8c(_0x24b66c);}}function _0x2adb6e(_0xa568bc){const _0x49ab66=a0_0x4a37;_0xa568bc[_0x49ab66(0x14d)]?_0x26b57e(_0xa568bc[_0x49ab66(0x16e)]):_0x1f7a94(_0xa568bc[_0x49ab66(0x16e)])[_0x49ab66(0x17f)](_0x4c164f,_0x564d4d);}_0x2adb6e((_0x29f90e=_0x29f90e[_0x34ccfd(0x15a)](_0x3b35bb,_0x4e7cb9||[]))[_0x34ccfd(0x180)]());});},__importDefault=this&&this[a0_0x4ce6ff(0x15c)]||function(_0x1418d0){const _0x9ed9f5=a0_0x4ce6ff;return _0x1418d0&&_0x1418d0[_0x9ed9f5(0x183)]?_0x1418d0:{'default':_0x1418d0};};Object[a0_0x4ce6ff(0x15d)](exports,a0_0x4ce6ff(0x183),{'value':!![]});const fs=__importStar(require('fs')),path=__importStar(require(a0_0x4ce6ff(0x190))),rss_parser_1=__importDefault(require(a0_0x4ce6ff(0x15e))),node_html_parser_1=require(a0_0x4ce6ff(0x156)),sources_1=require('./sources'),parser=new rss_parser_1[(a0_0x4ce6ff(0x1a5))](),OUTPUT_DIR=path[a0_0x4ce6ff(0x1bf)](__dirname,a0_0x4ce6ff(0x1a1));!fs[a0_0x4ce6ff(0x1b3)](OUTPUT_DIR)&&fs[a0_0x4ce6ff(0x19a)](OUTPUT_DIR,{'recursive':!![]});const INDEX_FILE=path[a0_0x4ce6ff(0x1bf)](OUTPUT_DIR,a0_0x4ce6ff(0x1aa)),bannedKeywords=[a0_0x4ce6ff(0x19b),a0_0x4ce6ff(0x17b),a0_0x4ce6ff(0x1b6),a0_0x4ce6ff(0x181),a0_0x4ce6ff(0x19e),'Form\x2013G','Form\x20144'],phrasesToRemoveFromDescription=[a0_0x4ce6ff(0x14e),a0_0x4ce6ff(0x18a)],phrasesToRemoveFromTitle=[a0_0x4ce6ff(0x155),a0_0x4ce6ff(0x16d)];function cleanCdata(_0x32e59b){const _0x32c5eb=a0_0x4ce6ff;return _0x32e59b[_0x32c5eb(0x188)](/<!\[CDATA\[|\]\]>/g,'')[_0x32c5eb(0x1b1)]();}function a0_0x4a37(_0x232db2,_0x27152d){const _0xdc81f5=a0_0xdc81();return a0_0x4a37=function(_0x4a37fa,_0x45a10d){_0x4a37fa=_0x4a37fa-0x149;let _0x88db26=_0xdc81f5[_0x4a37fa];return _0x88db26;},a0_0x4a37(_0x232db2,_0x27152d);}function stripHtml(_0x56e663){const _0x232d94=a0_0x4ce6ff;return(0x0,node_html_parser_1[_0x232d94(0x16c)])(_0x56e663)[_0x232d94(0x17c)]||'';}function removePhrases(_0x89c0a2,_0x2a57fe){const _0x5f2c4f=a0_0x4ce6ff;if(!_0x89c0a2)return null;let _0x3c674f=_0x89c0a2;for(const _0x19c854 of _0x2a57fe){_0x3c674f=_0x3c674f[_0x5f2c4f(0x188)](_0x19c854,'')[_0x5f2c4f(0x1b1)]();}return _0x3c674f;}function truncateDescription(_0x32b649){const _0x433984=a0_0x4ce6ff;if(!_0x32b649)return null;const _0x802efa=_0x32b649[_0x433984(0x193)](/\n\s*\n/);let _0x18f9b6=_0x802efa[0x0]||'';const _0x5e8975=_0x18f9b6['match'](/[^.!?]+[.!?]+|[^.!?]+$/g)||[];_0x5e8975[_0x433984(0x192)]>0x5?_0x18f9b6=_0x5e8975['slice'](0x0,0x5)[_0x433984(0x1bf)]('')[_0x433984(0x1b1)]():_0x18f9b6=_0x5e8975[_0x433984(0x1bf)]('')['trim']();if(_0x18f9b6[_0x433984(0x192)]<_0x32b649[_0x433984(0x192)]&&!/[.!?]$/[_0x433984(0x14c)](_0x18f9b6)){const _0x45ad20=_0x18f9b6[_0x433984(0x174)]('\x20');_0x45ad20>-0x1?_0x18f9b6=_0x18f9b6[_0x433984(0x1ae)](0x0,_0x45ad20)+'...':_0x18f9b6=_0x18f9b6+'...';}return _0x18f9b6[_0x433984(0x192)]>0x0?_0x18f9b6:null;}function fetchArticleMetadata(_0x5f2e0e){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xdbeb1c=a0_0x4a37;try{const _0x550c09=yield fetch(_0x5f2e0e,{'signal':AbortSignal[_0xdbeb1c(0x18e)](0x3a98)});if(!_0x550c09['ok'])throw new Error(_0xdbeb1c(0x184)+_0x550c09['status']);const _0x22df0f=yield _0x550c09[_0xdbeb1c(0x14a)](),_0x281c89=(0x0,node_html_parser_1['parse'])(_0x22df0f);let _0x23c3b4=null;const _0x3557b4=['meta[property=\x22og:description\x22]',_0xdbeb1c(0x194),_0xdbeb1c(0x159)];for(const _0x214026 of _0x3557b4){const _0x2a2346=_0x281c89['querySelector'](_0x214026);if(_0x2a2346&&_0x2a2346['getAttribute'](_0xdbeb1c(0x1b9))){_0x23c3b4=stripHtml(_0x2a2346[_0xdbeb1c(0x19d)]('content'))||null,_0x23c3b4=removePhrases(_0x23c3b4,phrasesToRemoveFromDescription),_0x23c3b4=truncateDescription(_0x23c3b4);break;}}let _0xf9ed4b=null;const _0x356e0a=[_0xdbeb1c(0x1b0),_0xdbeb1c(0x16b)];for(const _0x13b656 of _0x356e0a){const _0x46c3c1=_0x281c89[_0xdbeb1c(0x1a6)](_0x13b656);if(_0x46c3c1&&_0x46c3c1[_0xdbeb1c(0x19d)](_0xdbeb1c(0x1b9))){_0xf9ed4b=_0x46c3c1[_0xdbeb1c(0x19d)](_0xdbeb1c(0x1b9));break;}}return{'description':_0x23c3b4,'thumbnail_url':_0xf9ed4b};}catch(_0x24147d){return{'description':null,'thumbnail_url':null};}});}function processItem(_0x40a0b4,_0xe48bd9){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2a9598=a0_0x4a37;let _0x17f21d=_0x40a0b4['title']?cleanCdata(_0x40a0b4[_0x2a9598(0x1a0)]):null;_0x17f21d=removePhrases(_0x17f21d,phrasesToRemoveFromTitle);let _0x4b12c8=_0x40a0b4[_0x2a9598(0x19c)],_0x3c8208=null;if(_0xe48bd9[_0x2a9598(0x14b)]==='https://hnrss.org/frontpage.atom'){if(_0x40a0b4[_0x2a9598(0x1b9)]){const _0x1c89c6=(0x0,node_html_parser_1[_0x2a9598(0x16c)])(_0x40a0b4[_0x2a9598(0x1b9)]),_0x23cbbd=_0x1c89c6[_0x2a9598(0x1a6)]('p\x20a');_0x23cbbd&&_0x23cbbd['text'][_0x2a9598(0x18f)]('Article\x20URL:')&&(_0x4b12c8=_0x23cbbd['getAttribute'](_0x2a9598(0x151)));}_0x3c8208=null;}else _0x40a0b4[_0x2a9598(0x164)]&&(_0x3c8208=stripHtml(cleanCdata(_0x40a0b4[_0x2a9598(0x164)]))||null,_0x3c8208=removePhrases(_0x3c8208,phrasesToRemoveFromDescription),_0x3c8208=truncateDescription(_0x3c8208));_0xe48bd9[_0x2a9598(0x14b)]===_0x2a9598(0x1bd)&&_0x40a0b4[_0x2a9598(0x189)]&&(_0x3c8208=stripHtml(cleanCdata(_0x40a0b4[_0x2a9598(0x189)]))||null,_0x3c8208=removePhrases(_0x3c8208,phrasesToRemoveFromDescription),_0x3c8208=truncateDescription(_0x3c8208));if(!_0x17f21d||!_0x4b12c8)return null;const _0x1ccb81=(_0x17f21d+'\x20'+(_0x40a0b4[_0x2a9598(0x164)]?stripHtml(_0x40a0b4[_0x2a9598(0x164)]):'')+'\x20'+(_0x40a0b4['description']?stripHtml(_0x40a0b4['description']):''))['toLowerCase']();if(bannedKeywords['some'](_0x1bdf90=>_0x1ccb81[_0x2a9598(0x199)](_0x1bdf90[_0x2a9598(0x160)]())))return null;const _0x512126=_0x40a0b4[_0x2a9598(0x15b)]?new Date(_0x40a0b4[_0x2a9598(0x15b)])[_0x2a9598(0x1bb)]():new Date()[_0x2a9598(0x1bb)]();let _0x4a6076=_0x40a0b4[_0x2a9598(0x169)]?_0x40a0b4[_0x2a9598(0x169)][_0x2a9598(0x14b)]:null;_0x40a0b4[_0x2a9598(0x175)]&&_0x40a0b4[_0x2a9598(0x175)]['$']&&_0x40a0b4['media:content']['$']['url']&&(_0x4a6076=_0x40a0b4[_0x2a9598(0x175)]['$']['url']);if(!_0x3c8208||!_0x4a6076||_0xe48bd9['url']==='https://hnrss.org/frontpage.atom'||_0xe48bd9[_0x2a9598(0x14b)]==='https://rss.slashdot.org/Slashdot/slashdot'||_0xe48bd9[_0x2a9598(0x14b)]===_0x2a9598(0x167)){const _0x1d9605=yield fetchArticleMetadata(_0x4b12c8);!_0x3c8208&&(_0x3c8208=_0x1d9605['description']),!_0x4a6076&&(_0x4a6076=_0x1d9605['thumbnail_url']);}const _0x2a8b20=_0x17f21d[_0x2a9598(0x160)]()['replace'](/[^a-z0-9\s]/g,'')['trim']()[_0x2a9598(0x188)](/\s+/g,'-');let _0x1643f6=_0x2a8b20[_0x2a9598(0x1ae)](0x0,0x3c);_0x1643f6[_0x2a9598(0x157)]('-')&&(_0x1643f6=_0x1643f6['slice'](0x0,-0x1));!_0x1643f6&&(_0x1643f6=_0x2a9598(0x19f)+Date['now']());let _0x432f3e=_0xe48bd9[_0x2a9598(0x14f)]||'news';if(_0xe48bd9['name']==='Yahoo\x20News'&&_0x4b12c8){if(_0x4b12c8[_0x2a9598(0x199)](_0x2a9598(0x161)))_0x432f3e='finance';else{if(_0x4b12c8[_0x2a9598(0x199)](_0x2a9598(0x177)))_0x432f3e=_0x2a9598(0x165);else{if(_0x4b12c8[_0x2a9598(0x199)](_0x2a9598(0x1b8)))_0x432f3e='tech';else _0x4b12c8['includes'](_0x2a9598(0x166))&&(_0x432f3e='health');}}}else{if(_0xe48bd9[_0x2a9598(0x14b)]===_0x2a9598(0x1bd)&&_0x4b12c8){const _0x375096=_0x4b12c8[_0x2a9598(0x176)](/https:\/\/([a-z]+)\.slashdot\.org/);if(_0x375096&&_0x375096[0x1]){const _0x16041c=_0x375096[0x1];switch(_0x16041c){case'it':case'tech':case _0x2a9598(0x16f):case'developers':_0x432f3e=_0x2a9598(0x1a9);break;case _0x2a9598(0x186):_0x432f3e='science';break;case _0x2a9598(0x178):_0x432f3e=_0x2a9598(0x1b5);break;case _0x2a9598(0x150):case _0x2a9598(0x1a8):case _0x2a9598(0x196):default:_0x432f3e=_0x2a9598(0x150);break;}}else _0x432f3e=_0x2a9598(0x150);}}return{'slug':_0x1643f6,'title':_0x17f21d,'description':_0x3c8208,'link':_0x4b12c8,'thumbnail_url':_0x4a6076,'created_at':new Date()['toISOString'](),'topic':_0x432f3e};});}function run(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5b7c6a=a0_0x4a37;console[_0x5b7c6a(0x1a2)](_0x5b7c6a(0x185));const _0x1d7cb9=new Date()[_0x5b7c6a(0x1bb)]()['split']('T')[0x0],_0x3fbb9e=path['join'](OUTPUT_DIR,_0x1d7cb9+'.json');let _0x580592=[];if(fs[_0x5b7c6a(0x1b3)](INDEX_FILE))try{_0x580592=JSON[_0x5b7c6a(0x16c)](fs[_0x5b7c6a(0x18b)](INDEX_FILE,_0x5b7c6a(0x1a4)));}catch(_0x310d7a){console[_0x5b7c6a(0x195)](_0x5b7c6a(0x197));}const _0x1a5093=new Set(_0x580592);let _0x4eb800=[];if(fs[_0x5b7c6a(0x1b3)](_0x3fbb9e))try{_0x4eb800=JSON[_0x5b7c6a(0x16c)](fs[_0x5b7c6a(0x18b)](_0x3fbb9e,_0x5b7c6a(0x1a4)));}catch(_0x2d1555){console[_0x5b7c6a(0x195)](_0x5b7c6a(0x18c));}let _0x183069=0x0;for(const _0x33298c of sources_1[_0x5b7c6a(0x1b4)]){console[_0x5b7c6a(0x1a2)](_0x5b7c6a(0x152)+_0x33298c[_0x5b7c6a(0x168)]);try{const _0x5ccdeb=yield parser[_0x5b7c6a(0x1ab)](_0x33298c[_0x5b7c6a(0x14b)]),_0x53a824=_0x5ccdeb[_0x5b7c6a(0x1ba)][_0x5b7c6a(0x1be)](0x0,_0x33298c['max_items']||_0x5ccdeb[_0x5b7c6a(0x1ba)][_0x5b7c6a(0x192)]);for(const _0x2d0afd of _0x53a824){try{const _0x393a8b=yield processItem(_0x2d0afd,_0x33298c);_0x393a8b&&_0x393a8b['link']&&(!_0x1a5093[_0x5b7c6a(0x173)](_0x393a8b[_0x5b7c6a(0x19c)])&&(_0x4eb800['push'](_0x393a8b),_0x1a5093['add'](_0x393a8b[_0x5b7c6a(0x19c)]),_0x183069++));}catch(_0xc0a7ce){console[_0x5b7c6a(0x195)](_0x5b7c6a(0x154)+_0x33298c[_0x5b7c6a(0x168)]+':',_0xc0a7ce);}}}catch(_0x2aa54e){console[_0x5b7c6a(0x195)](_0x5b7c6a(0x17e)+_0x33298c[_0x5b7c6a(0x168)]+':',_0x2aa54e);}}fs[_0x5b7c6a(0x1af)](_0x3fbb9e,JSON[_0x5b7c6a(0x15f)](_0x4eb800,null,0x2)),fs[_0x5b7c6a(0x1af)](INDEX_FILE,JSON[_0x5b7c6a(0x15f)](Array['from'](_0x1a5093),null,0x2)),console[_0x5b7c6a(0x1a2)](_0x5b7c6a(0x17a)+_0x183069+_0x5b7c6a(0x1ac)+_0x3fbb9e);});}run()[a0_0x4ce6ff(0x191)](console[a0_0x4ce6ff(0x195)]);
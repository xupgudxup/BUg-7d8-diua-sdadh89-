'use strict';const a4_0x2a2c8d=a4_0x518a;(function(_0x2d9919,_0x59e4ce){const _0x1d5300=a4_0x518a,_0x371ea9=_0x2d9919();while(!![]){try{const _0x4c7b9a=parseInt(_0x1d5300(0x206))/0x1*(-parseInt(_0x1d5300(0x1f2))/0x2)+parseInt(_0x1d5300(0x1f3))/0x3*(-parseInt(_0x1d5300(0x211))/0x4)+-parseInt(_0x1d5300(0x222))/0x5+parseInt(_0x1d5300(0x23f))/0x6+parseInt(_0x1d5300(0x251))/0x7+parseInt(_0x1d5300(0x202))/0x8*(-parseInt(_0x1d5300(0x24a))/0x9)+-parseInt(_0x1d5300(0x22d))/0xa*(-parseInt(_0x1d5300(0x237))/0xb);if(_0x4c7b9a===_0x59e4ce)break;else _0x371ea9['push'](_0x371ea9['shift']());}catch(_0x53e489){_0x371ea9['push'](_0x371ea9['shift']());}}}(a4_0x4d58,0x46020));function a4_0x4d58(){const _0x43aa19=['Form\x2013F','sourcesData','writeFileSync','__esModule','./article-extractor','__createBinding','add','182948BmJSZy','‚ö†Ô∏è\x20RUNNING\x20IN\x20TEST\x20MODE:\x20Limiting\x20to\x201\x20source\x20and\x2010\x20items.','games','--total-batches=','tech.yahoo.com','HTTP\x20error!\x20status:\x20','index.json','gambling','\x20batches\x20required\x20for\x20','\x20of\x20','status','content:encoded','trim','health','Fetch\x20failed','href','items','2404790kFFiWo','test','Form\x20144','...','meta[name=\x22twitter:description\x22]','thumbnail_url','Feed\x20fetch\x20failed','Tell\x20HN:','endsWith','Only\x20Fans','p\x20a','10geQoOX','utf-8','prototype','(Source:\x20Bloomberg)','url','length','pubDate','writable','\x20posts.','toLowerCase','13963653MTpfFJ','title','Running\x20batch\x20','slice','fullText','‚è≠Ô∏è\x20Batch\x20','startsWith','./classifier','1778952WSOrUO','ceil','sex','meta[property=\x22og:image\x22]','name','sort','getDate','Article\x20URL:','news','path','content-length','666lblsez','hnrss.org','textContent','push','replace','node-html-parser','parse','7413KYiEWp','https://rss.slashdot.org/Slashdot/slashdot','keywords','qualityScore','has','now','Starting\x20Aggregation\x20&\x20Classification...','description','contentSnippet','getOwnPropertyNames','stringify','\x20new\x20|\x20','isoDate','link','min','error','media:thumbnail','lastIndexOf','existsSync','all','log','meta[name=\x22twitter:image\x22]','substring','HEAD','mkdirSync','content','match','\x20sources).\x20Skipping.','message','querySelector','\x20\x20Skipped\x20duplicate:\x20','auto','catch','getOwnPropertyDescriptor','science','__setModuleDefault','media:content','argv','Error\x20fetching\x20source\x20','meta[name=\x22description\x22]','\x20|\x20Processing\x20sources\x20','porn','../output','enclosure','create','classify','from','toFixed','get','error-log.json','üîÑ\x20Batch\x20','Mozilla/5.0\x20(compatible;\x20NewsBot/1.0)','call','finance','filter','toISOString','Show\x20HN:','getFullYear','hardware','default','fulfilled','init','html','width','\x20old\x20(filtered)','tech','text','readFileSync','getAttribute','./sources','join','Job\x20Complete\x20in\x20','includes','split','__importStar','map','BucketManager','Processing\x20source:\x20','\x20cached\x20|\x20','finance.yahoo.com','https://s.yimg.com/cv/apiv2/social/images/yahoo_default_logo-1200x1200.png','extractArticle','62LYqLXT','12NTpJCM','health.yahoo.com','Error\x20reading\x20index\x20file,\x20starting\x20fresh.','Form\x2013G','setDate','then','text/html,application/xhtml+xml','headers','allSettled','__importDefault','https://www.investing.com/rss/news.rss','hasOwnProperty','deals','addPost','max','40200mtdbUr','Scrape\x20finished.\x20Added\x20','value','./bucket-manager','7886ltdxHp','best','defineProperty','autos.yahoo.com'];a4_0x4d58=function(){return _0x43aa19;};return a4_0x4d58();}var __createBinding=this&&this[a4_0x2a2c8d(0x20f)]||(Object[a4_0x2a2c8d(0x1cc)]?function(_0x16a878,_0x278332,_0x196887,_0x215c38){const _0x5f43f5=a4_0x2a2c8d;if(_0x215c38===undefined)_0x215c38=_0x196887;var _0x294e1c=Object[_0x5f43f5(0x1c1)](_0x278332,_0x196887);(!_0x294e1c||('get'in _0x294e1c?!_0x278332[_0x5f43f5(0x20d)]:_0x294e1c[_0x5f43f5(0x234)]||_0x294e1c['configurable']))&&(_0x294e1c={'enumerable':!![],'get':function(){return _0x278332[_0x196887];}}),Object[_0x5f43f5(0x208)](_0x16a878,_0x215c38,_0x294e1c);}:function(_0x5bb96a,_0x5de92d,_0x56888b,_0x52d901){if(_0x52d901===undefined)_0x52d901=_0x56888b;_0x5bb96a[_0x52d901]=_0x5de92d[_0x56888b];}),__setModuleDefault=this&&this[a4_0x2a2c8d(0x1c3)]||(Object[a4_0x2a2c8d(0x1cc)]?function(_0x5b8012,_0x2ab0b1){Object['defineProperty'](_0x5b8012,'default',{'enumerable':!![],'value':_0x2ab0b1});}:function(_0x49a962,_0x44912b){const _0x5c19a0=a4_0x2a2c8d;_0x49a962[_0x5c19a0(0x1db)]=_0x44912b;}),__importStar=this&&this[a4_0x2a2c8d(0x1ea)]||(function(){var _0x2e2872=function(_0x2fdad1){const _0x21a84a=a4_0x518a;return _0x2e2872=Object[_0x21a84a(0x1a9)]||function(_0x5e390a){const _0x443904=_0x21a84a;var _0x209ecb=[];for(var _0x11559f in _0x5e390a)if(Object[_0x443904(0x22f)][_0x443904(0x1fe)][_0x443904(0x1d4)](_0x5e390a,_0x11559f))_0x209ecb[_0x209ecb['length']]=_0x11559f;return _0x209ecb;},_0x2e2872(_0x2fdad1);};return function(_0x890b03){const _0x1d7d9a=a4_0x518a;if(_0x890b03&&_0x890b03[_0x1d7d9a(0x20d)])return _0x890b03;var _0x15cf29={};if(_0x890b03!=null){for(var _0x3c0347=_0x2e2872(_0x890b03),_0x4b7017=0x0;_0x4b7017<_0x3c0347[_0x1d7d9a(0x232)];_0x4b7017++)if(_0x3c0347[_0x4b7017]!==_0x1d7d9a(0x1db))__createBinding(_0x15cf29,_0x890b03,_0x3c0347[_0x4b7017]);}return __setModuleDefault(_0x15cf29,_0x890b03),_0x15cf29;};}()),__importDefault=this&&this[a4_0x2a2c8d(0x1fc)]||function(_0xb73db0){const _0x124ee8=a4_0x2a2c8d;return _0xb73db0&&_0xb73db0[_0x124ee8(0x20d)]?_0xb73db0:{'default':_0xb73db0};};Object[a4_0x2a2c8d(0x208)](exports,a4_0x2a2c8d(0x20d),{'value':!![]});const fs=__importStar(require('fs')),path=__importStar(require(a4_0x2a2c8d(0x248))),rss_parser_1=__importDefault(require('rss-parser')),node_html_parser_1=require(a4_0x2a2c8d(0x24f)),sources_1=require(a4_0x2a2c8d(0x1e5)),article_extractor_1=require(a4_0x2a2c8d(0x20e)),classifier_1=require(a4_0x2a2c8d(0x23e)),bucket_manager_1=require(a4_0x2a2c8d(0x205)),parser=new rss_parser_1['default'](),OUTPUT_DIR=path[a4_0x2a2c8d(0x1e6)](__dirname,a4_0x2a2c8d(0x1ca));!fs[a4_0x2a2c8d(0x1b2)](OUTPUT_DIR)&&fs[a4_0x2a2c8d(0x1b8)](OUTPUT_DIR,{'recursive':!![]});const INDEX_FILE=path[a4_0x2a2c8d(0x1e6)](OUTPUT_DIR,a4_0x2a2c8d(0x217)),ERROR_LOG_FILE=path['join'](OUTPUT_DIR,a4_0x2a2c8d(0x1d1)),bannedKeywords=[a4_0x2a2c8d(0x22b),a4_0x2a2c8d(0x1c9),a4_0x2a2c8d(0x241),a4_0x2a2c8d(0x218),a4_0x2a2c8d(0x20a),a4_0x2a2c8d(0x1f6),a4_0x2a2c8d(0x224),a4_0x2a2c8d(0x1ff),'black\x20friday','discount',a4_0x2a2c8d(0x207)],bannedThumbnails=[a4_0x2a2c8d(0x1f0)],phrasesToRemoveFromDescription=[a4_0x2a2c8d(0x230),'Read\x20more\x20of\x20this\x20story\x20at\x20Slashdot.'],phrasesToRemoveFromTitle=[a4_0x2a2c8d(0x229),a4_0x2a2c8d(0x1d8)],MAX_CONCURRENT_FETCHES=0x5,MAX_ITEMS_PER_SOURCE=0x64;function isRecentItem(_0x3effde){const _0x421259=a4_0x2a2c8d;if(!_0x3effde['pubDate']&&!_0x3effde[_0x421259(0x1ac)])return!![];try{const _0xdac94b=new Date(_0x3effde[_0x421259(0x233)]||_0x3effde['isoDate']),_0x1e2956=new Date(),_0x503ec9=new Date(_0x1e2956[_0x421259(0x1d9)](),_0x1e2956['getMonth'](),_0x1e2956[_0x421259(0x245)]()),_0x1e6caf=new Date(_0x503ec9);return _0x1e6caf[_0x421259(0x1f7)](_0x1e6caf[_0x421259(0x245)]()-0x1),_0xdac94b>=_0x1e6caf;}catch{return!![];}}function parseArgs(){const _0xceaf44=a4_0x2a2c8d,_0x58f3be=process[_0xceaf44(0x1c5)][_0xceaf44(0x23a)](0x2);let _0x531282=null,_0x447cf8=null,_0x322219=![];for(const _0x3bfdcf of _0x58f3be){if(_0x3bfdcf[_0xceaf44(0x23d)]('--batch='))_0x531282=parseInt(_0x3bfdcf[_0xceaf44(0x1e9)]('=')[0x1],0xa);else{if(_0x3bfdcf['startsWith'](_0xceaf44(0x214)))_0x447cf8=parseInt(_0x3bfdcf[_0xceaf44(0x1e9)]('=')[0x1],0xa);else _0x3bfdcf==='--test'&&(_0x322219=!![]);}}return{'batch':_0x531282,'totalBatches':_0x447cf8,'test':_0x322219};}function cleanCdata(_0x4b55f1){const _0x4dab25=a4_0x2a2c8d;return _0x4b55f1['replace'](/<!\[CDATA\[|\]\]>/g,'')[_0x4dab25(0x21d)]();}function stripHtml(_0x230552){const _0xbbee53=a4_0x2a2c8d;return(0x0,node_html_parser_1[_0xbbee53(0x250)])(_0x230552)[_0xbbee53(0x24c)]||'';}function removePhrases(_0x313407,_0x17daa6){const _0x1f80dd=a4_0x2a2c8d;if(!_0x313407)return null;let _0x1f26d1=_0x313407;for(const _0x43d88b of _0x17daa6){_0x1f26d1=_0x1f26d1['replace'](_0x43d88b,'')[_0x1f80dd(0x21d)]();}return _0x1f26d1;}function a4_0x518a(_0xd52030,_0xb3512f){const _0x4d5817=a4_0x4d58();return a4_0x518a=function(_0x518aca,_0xf6f994){_0x518aca=_0x518aca-0x1a1;let _0x3602c3=_0x4d5817[_0x518aca];return _0x3602c3;},a4_0x518a(_0xd52030,_0xb3512f);}function truncateDescription(_0x17ca99){const _0x31cc08=a4_0x2a2c8d;if(!_0x17ca99)return null;const _0x3847b5=_0x17ca99[_0x31cc08(0x1e9)](/\n\s*\n/);let _0x14bac5=_0x3847b5[0x0]||'';const _0x58f9f1=_0x14bac5[_0x31cc08(0x1ba)](/[^.!?]+[.!?]+|[^.!?]+$/g)||[];_0x58f9f1[_0x31cc08(0x232)]>0x5?_0x14bac5=_0x58f9f1['slice'](0x0,0x5)[_0x31cc08(0x1e6)]('')[_0x31cc08(0x21d)]():_0x14bac5=_0x58f9f1[_0x31cc08(0x1e6)]('')[_0x31cc08(0x21d)]();if(_0x14bac5['length']<_0x17ca99[_0x31cc08(0x232)]&&!/[.!?]$/[_0x31cc08(0x223)](_0x14bac5)){const _0x4ce0ce=_0x14bac5[_0x31cc08(0x1b1)]('\x20');_0x4ce0ce>-0x1?_0x14bac5=_0x14bac5[_0x31cc08(0x1b6)](0x0,_0x4ce0ce)+'...':_0x14bac5=_0x14bac5+_0x31cc08(0x225);}return _0x14bac5['length']>0x0?_0x14bac5:null;}async function isImageLargeEnough(_0x1aef96){const _0x58d717=a4_0x2a2c8d;try{const _0x399e43=await fetch(_0x1aef96,{'method':_0x58d717(0x1b7),'signal':AbortSignal['timeout'](0x7d0)});if(!_0x399e43['ok']){if(_0x399e43[_0x58d717(0x21b)]===0x194)return![];return!![];}const _0x860514=_0x399e43[_0x58d717(0x1fa)][_0x58d717(0x1d0)](_0x58d717(0x249));if(_0x860514){const _0x1bea8b=parseInt(_0x860514,0xa);if(_0x1bea8b<0x3a98)return![];}return!![];}catch{return!![];}}async function fetchArticleMetadata(_0x51c16a){const _0x4b0520=a4_0x2a2c8d;try{const _0xbd9779=await fetch(_0x51c16a,{'signal':AbortSignal['timeout'](0x3a98),'headers':{'User-Agent':_0x4b0520(0x1d3),'Accept':_0x4b0520(0x1f9)}});if(!_0xbd9779['ok'])throw new Error(_0x4b0520(0x216)+_0xbd9779['status']);const _0x37f09d=await _0xbd9779[_0x4b0520(0x1e2)](),_0x2b9e9c=(0x0,node_html_parser_1[_0x4b0520(0x250)])(_0x37f09d);let _0x226ad7=null;const _0x14c354=['meta[property=\x22og:description\x22]',_0x4b0520(0x226),_0x4b0520(0x1c7)];for(const _0x5e8cce of _0x14c354){const _0x2c7e1e=_0x2b9e9c[_0x4b0520(0x1bd)](_0x5e8cce);if(_0x2c7e1e&&_0x2c7e1e[_0x4b0520(0x1e4)](_0x4b0520(0x1b9))){_0x226ad7=stripHtml(_0x2c7e1e['getAttribute'](_0x4b0520(0x1b9)))||null,_0x226ad7=removePhrases(_0x226ad7,phrasesToRemoveFromDescription),_0x226ad7=truncateDescription(_0x226ad7);break;}}let _0x3ff4dc=null;const _0x8fe47=[_0x4b0520(0x242),_0x4b0520(0x1b5)];for(const _0x3d9796 of _0x8fe47){const _0x453f8f=_0x2b9e9c[_0x4b0520(0x1bd)](_0x3d9796);if(_0x453f8f&&_0x453f8f[_0x4b0520(0x1e4)](_0x4b0520(0x1b9))){_0x3ff4dc=_0x453f8f['getAttribute'](_0x4b0520(0x1b9));break;}}return{'description':_0x226ad7,'thumbnail_url':_0x3ff4dc,'html':_0x37f09d};}catch{return{'description':null,'thumbnail_url':null,'html':null};}}let errorLog=[];function logError(_0x29df18,_0x7eaa3a,_0x53cd29){const _0x4a7ab3=a4_0x2a2c8d;errorLog['push']({'source':_0x29df18,'url':_0x7eaa3a,'error':_0x53cd29,'timestamp':new Date()[_0x4a7ab3(0x1d7)]()});}function saveErrorLog(){const _0xcc01e7=a4_0x2a2c8d;if(errorLog['length']===0x0)return;let _0x59c934=[];if(fs[_0xcc01e7(0x1b2)](ERROR_LOG_FILE))try{_0x59c934=JSON[_0xcc01e7(0x250)](fs['readFileSync'](ERROR_LOG_FILE,_0xcc01e7(0x22e)));}catch{}const _0x2aebfb=[..._0x59c934,...errorLog][_0xcc01e7(0x23a)](-0x64);fs[_0xcc01e7(0x20c)](ERROR_LOG_FILE,JSON[_0xcc01e7(0x1aa)](_0x2aebfb,null,0x2),_0xcc01e7(0x22e));}async function processItem(_0x1faca5,_0x58618a){const _0x1ce0d7=a4_0x2a2c8d;let _0x1480e2=_0x1faca5['title']?stripHtml(cleanCdata(_0x1faca5[_0x1ce0d7(0x238)])):null;_0x1480e2=removePhrases(_0x1480e2,phrasesToRemoveFromTitle);let _0x4578d5=_0x1faca5[_0x1ce0d7(0x1ad)],_0x187ddb=null;if(_0x58618a[_0x1ce0d7(0x231)][_0x1ce0d7(0x1e8)](_0x1ce0d7(0x24b))){if(_0x1faca5[_0x1ce0d7(0x1b9)]){const _0x21ed6c=(0x0,node_html_parser_1[_0x1ce0d7(0x250)])(_0x1faca5[_0x1ce0d7(0x1b9)]),_0x4e5e4f=_0x21ed6c[_0x1ce0d7(0x1bd)](_0x1ce0d7(0x22c));_0x4e5e4f&&_0x4e5e4f[_0x1ce0d7(0x1e2)][_0x1ce0d7(0x23d)](_0x1ce0d7(0x246))&&(_0x4578d5=_0x4e5e4f['getAttribute'](_0x1ce0d7(0x220)));}_0x187ddb=null;}else _0x1faca5[_0x1ce0d7(0x1a8)]&&(_0x187ddb=stripHtml(cleanCdata(_0x1faca5['contentSnippet']))||null,_0x187ddb=removePhrases(_0x187ddb,phrasesToRemoveFromDescription),_0x187ddb=truncateDescription(_0x187ddb));!_0x187ddb&&_0x1faca5[_0x1ce0d7(0x21c)]&&(_0x187ddb=stripHtml(cleanCdata(_0x1faca5[_0x1ce0d7(0x21c)]))||null,_0x187ddb=removePhrases(_0x187ddb,phrasesToRemoveFromDescription),_0x187ddb=truncateDescription(_0x187ddb));_0x58618a[_0x1ce0d7(0x231)]===_0x1ce0d7(0x1a1)&&_0x1faca5[_0x1ce0d7(0x1a7)]&&(_0x187ddb=stripHtml(cleanCdata(_0x1faca5[_0x1ce0d7(0x1a7)]))||null,_0x187ddb=removePhrases(_0x187ddb,phrasesToRemoveFromDescription),_0x187ddb=truncateDescription(_0x187ddb));if(!_0x1480e2||!_0x4578d5)return null;const _0xa2117c=(_0x1480e2+'\x20'+(_0x1faca5[_0x1ce0d7(0x1a8)]?stripHtml(_0x1faca5[_0x1ce0d7(0x1a8)]):'')+'\x20'+(_0x1faca5[_0x1ce0d7(0x1a7)]?stripHtml(_0x1faca5[_0x1ce0d7(0x1a7)]):''))[_0x1ce0d7(0x236)]();if(bannedKeywords['some'](_0x19892e=>_0xa2117c[_0x1ce0d7(0x1e8)](_0x19892e[_0x1ce0d7(0x236)]())))return null;let _0x3ecd60=_0x1faca5[_0x1ce0d7(0x1cb)]?_0x1faca5['enclosure']['url']:null;if(_0x1faca5[_0x1ce0d7(0x1c4)]){if(Array['isArray'](_0x1faca5[_0x1ce0d7(0x1c4)])){const _0x8257fd=_0x1faca5[_0x1ce0d7(0x1c4)][_0x1ce0d7(0x244)]((_0x5bac27,_0x5f4f2f)=>{const _0x299437=_0x1ce0d7,_0x31bcbe=_0x5bac27['$']&&_0x5bac27['$']['width']?parseInt(_0x5bac27['$'][_0x299437(0x1df)],0xa):0x0,_0x526e02=_0x5f4f2f['$']&&_0x5f4f2f['$'][_0x299437(0x1df)]?parseInt(_0x5f4f2f['$'][_0x299437(0x1df)],0xa):0x0;return _0x526e02-_0x31bcbe;}),_0x5c2434=_0x8257fd[0x0];if(_0x5c2434){const _0x52acae=_0x5c2434['$']&&_0x5c2434['$']['width']?parseInt(_0x5c2434['$'][_0x1ce0d7(0x1df)],0xa):0x0;if(_0x52acae===0x0||_0x52acae>=0x12c){if(_0x5c2434['$']&&_0x5c2434['$']['url'])_0x3ecd60=_0x5c2434['$']['url'];else{if(_0x5c2434[_0x1ce0d7(0x231)])_0x3ecd60=_0x5c2434[_0x1ce0d7(0x231)];}}}}else{const _0x7201aa=_0x1faca5[_0x1ce0d7(0x1c4)],_0x80b0c1=_0x7201aa['$']&&_0x7201aa['$']['width']?parseInt(_0x7201aa['$'][_0x1ce0d7(0x1df)],0xa):_0x7201aa['width']?parseInt(_0x7201aa['width'],0xa):0x0;if(_0x80b0c1===0x0||_0x80b0c1>=0x12c){if(_0x7201aa['$']&&_0x7201aa['$'][_0x1ce0d7(0x231)])_0x3ecd60=_0x7201aa['$']['url'];else{if(_0x7201aa[_0x1ce0d7(0x231)])_0x3ecd60=_0x7201aa[_0x1ce0d7(0x231)];}}}}if(!_0x3ecd60&&_0x1faca5[_0x1ce0d7(0x1b0)]){if(_0x1faca5[_0x1ce0d7(0x1b0)]['$']&&_0x1faca5['media:thumbnail']['$']['url'])_0x3ecd60=_0x1faca5[_0x1ce0d7(0x1b0)]['$'][_0x1ce0d7(0x231)];else _0x1faca5[_0x1ce0d7(0x1b0)][_0x1ce0d7(0x231)]&&(_0x3ecd60=_0x1faca5[_0x1ce0d7(0x1b0)][_0x1ce0d7(0x231)]);}_0x3ecd60&&bannedThumbnails[_0x1ce0d7(0x1e8)](_0x3ecd60)&&(_0x3ecd60=null);let _0x4efb34=null,_0x3cd619={'fullText':null,'readingTime':0x0,'keywords':[],'qualityScore':0x0};const _0x162aa4=!_0x187ddb||!_0x3ecd60||_0x58618a[_0x1ce0d7(0x231)][_0x1ce0d7(0x1e8)]('hnrss.org')||_0x58618a[_0x1ce0d7(0x231)]===_0x1ce0d7(0x1a1)||_0x58618a[_0x1ce0d7(0x231)]===_0x1ce0d7(0x1fd);try{const _0x25031e=await fetchArticleMetadata(_0x4578d5);_0x4efb34=_0x25031e[_0x1ce0d7(0x1de)],!_0x187ddb&&(_0x187ddb=_0x25031e['description']),!_0x3ecd60&&(_0x3ecd60=_0x25031e[_0x1ce0d7(0x227)]);}catch(_0xba5723){logError(_0x58618a['name'],_0x4578d5,_0xba5723[_0x1ce0d7(0x1bc)]||_0x1ce0d7(0x21f));}_0x4efb34&&(_0x3cd619=(0x0,article_extractor_1[_0x1ce0d7(0x1f1)])(_0x4efb34,_0x4578d5));_0x3ecd60&&bannedThumbnails[_0x1ce0d7(0x1e8)](_0x3ecd60)&&(_0x3ecd60=null);if(_0x3ecd60){const _0x6bbf37=await isImageLargeEnough(_0x3ecd60);!_0x6bbf37&&(_0x3ecd60=null);}if(!_0x3ecd60)return null;const _0x3fe1d7=_0x1480e2[_0x1ce0d7(0x236)]()[_0x1ce0d7(0x24e)](/[^a-z0-9\s]/g,'')['trim']()['replace'](/\s+/g,'-');let _0x39dcf2=_0x3fe1d7[_0x1ce0d7(0x1b6)](0x0,0x3c);_0x39dcf2[_0x1ce0d7(0x22a)]('-')&&(_0x39dcf2=_0x39dcf2[_0x1ce0d7(0x23a)](0x0,-0x1));!_0x39dcf2&&(_0x39dcf2='post-'+Date[_0x1ce0d7(0x1a5)]());let _0x3560a1=_0x58618a['topic']||'news';if(_0x58618a[_0x1ce0d7(0x243)]==='Yahoo\x20News'&&_0x4578d5){if(_0x4578d5['includes'](_0x1ce0d7(0x1ef)))_0x3560a1=_0x1ce0d7(0x1d5);else{if(_0x4578d5[_0x1ce0d7(0x1e8)](_0x1ce0d7(0x209)))_0x3560a1=_0x1ce0d7(0x1bf);else{if(_0x4578d5[_0x1ce0d7(0x1e8)](_0x1ce0d7(0x215)))_0x3560a1=_0x1ce0d7(0x1e1);else{if(_0x4578d5[_0x1ce0d7(0x1e8)](_0x1ce0d7(0x1f4)))_0x3560a1=_0x1ce0d7(0x21e);}}}}else{if(_0x58618a[_0x1ce0d7(0x231)]===_0x1ce0d7(0x1a1)&&_0x4578d5){const _0x3e6734=_0x4578d5['match'](/https:\/\/([a-z]+)\.slashdot\.org/);if(_0x3e6734&&_0x3e6734[0x1]){const _0x4569a1=_0x3e6734[0x1];switch(_0x4569a1){case'it':case _0x1ce0d7(0x1e1):case _0x1ce0d7(0x1da):case'developers':_0x3560a1=_0x1ce0d7(0x1e1);break;case _0x1ce0d7(0x1c2):_0x3560a1=_0x1ce0d7(0x1c2);break;case _0x1ce0d7(0x213):_0x3560a1='gaming';break;default:_0x3560a1=_0x1ce0d7(0x247);break;}}}}return{'slug':_0x39dcf2,'title':_0x1480e2,'description':_0x187ddb,'fullText':_0x3cd619[_0x1ce0d7(0x23b)],'readingTime':_0x3cd619['readingTime'],'keywords':_0x3cd619[_0x1ce0d7(0x1a2)],'qualityScore':_0x3cd619[_0x1ce0d7(0x1a3)],'link':_0x4578d5,'thumbnail_url':_0x3ecd60,'created_at':new Date()['toISOString'](),'topic':_0x3560a1};}async function processInParallel(_0x2b9e12,_0x539cce,_0x2b4c5f){const _0x41dbbf=a4_0x2a2c8d,_0x4f52d5=[],_0x50bfb7=[];for(const _0xf9004 of _0x2b9e12){const _0x5e360f=_0x539cce(_0xf9004)[_0x41dbbf(0x1f8)](_0x99bce8=>{const _0x1adb26=_0x41dbbf;_0x4f52d5[_0x1adb26(0x24d)](_0x99bce8);})['catch'](()=>{const _0x1e8573=_0x41dbbf;_0x4f52d5[_0x1e8573(0x24d)](null);});_0x50bfb7[_0x41dbbf(0x24d)](_0x5e360f);if(_0x50bfb7[_0x41dbbf(0x232)]>=_0x2b4c5f){await Promise['race'](_0x50bfb7);const _0x3c281e=_0x50bfb7[_0x41dbbf(0x1d6)](_0x578202=>{const _0x337137=_0x41dbbf;let _0xde679=![];return _0x578202[_0x337137(0x1f8)](()=>{_0xde679=!![];})[_0x337137(0x1c0)](()=>{_0xde679=!![];}),!_0xde679;});_0x50bfb7['length']=0x0,_0x50bfb7[_0x41dbbf(0x24d)](..._0x3c281e);}}return await Promise[_0x41dbbf(0x1b3)](_0x50bfb7),_0x4f52d5;}async function processBatch(_0xba02ce,_0x461064,_0x3918d7=MAX_CONCURRENT_FETCHES){const _0xa7d5d7=a4_0x2a2c8d,_0xa8aa36=[];for(let _0x5aaa48=0x0;_0x5aaa48<_0xba02ce[_0xa7d5d7(0x232)];_0x5aaa48+=_0x3918d7){const _0x5ae3af=_0xba02ce[_0xa7d5d7(0x23a)](_0x5aaa48,_0x5aaa48+_0x3918d7),_0x34bde2=await Promise[_0xa7d5d7(0x1fb)](_0x5ae3af[_0xa7d5d7(0x1eb)](_0x472923=>_0x461064(_0x472923)));for(const _0x9ec6a3 of _0x34bde2){_0x9ec6a3['status']===_0xa7d5d7(0x1dc)?_0xa8aa36[_0xa7d5d7(0x24d)](_0x9ec6a3[_0xa7d5d7(0x204)]):_0xa8aa36[_0xa7d5d7(0x24d)](null);}}return _0xa8aa36;}async function run(){const _0x1a8c97=a4_0x2a2c8d,{batch:_0x7025c4,totalBatches:_0x5b8f8b,test:_0x332d9d}=parseArgs();console['log']('Starting\x20job...');_0x7025c4!==null&&_0x5b8f8b!==null&&console[_0x1a8c97(0x1b4)](_0x1a8c97(0x239)+(_0x7025c4+0x1)+_0x1a8c97(0x21a)+_0x5b8f8b);const _0x5aad92=Date[_0x1a8c97(0x1a5)](),_0x35dc4a=new Date()[_0x1a8c97(0x1d7)]()[_0x1a8c97(0x1e9)]('T')[0x0],_0x106ca8=path[_0x1a8c97(0x1e6)](OUTPUT_DIR,_0x35dc4a+'.json');let _0xc388ea=[];if(fs['existsSync'](INDEX_FILE))try{_0xc388ea=JSON[_0x1a8c97(0x250)](fs[_0x1a8c97(0x1e3)](INDEX_FILE,_0x1a8c97(0x22e)));}catch{console[_0x1a8c97(0x1af)](_0x1a8c97(0x1f5));}const _0xf19963=new Set(_0xc388ea),_0x5dae06=new Set();let _0x572937=[];if(fs[_0x1a8c97(0x1b2)](_0x106ca8))try{_0x572937=JSON[_0x1a8c97(0x250)](fs['readFileSync'](_0x106ca8,_0x1a8c97(0x22e)));for(const _0x1542a9 of _0x572937){_0x1542a9[_0x1a8c97(0x23b)]&&_0x5dae06[_0x1a8c97(0x210)](_0x1542a9[_0x1a8c97(0x23b)][_0x1a8c97(0x1b6)](0x0,0x64));}}catch{console[_0x1a8c97(0x1af)]('Error\x20reading\x20daily\x20file,\x20starting\x20fresh.');}let _0x37406e=[...sources_1[_0x1a8c97(0x20b)]],_0x343d7b=null;if(_0x332d9d)console['log'](_0x1a8c97(0x212)),_0x37406e=sources_1[_0x1a8c97(0x20b)][_0x1a8c97(0x23a)](0x0,0x1),_0x343d7b=0xa;else{if(_0x7025c4!==null&&_0x5b8f8b!==null){const _0x3708f5=0x5,_0x2b8432=Math['min'](_0x5b8f8b,Math[_0x1a8c97(0x201)](0x1,Math[_0x1a8c97(0x240)](sources_1[_0x1a8c97(0x20b)][_0x1a8c97(0x232)]/_0x3708f5)));if(_0x7025c4>=_0x2b8432){console['log'](_0x1a8c97(0x23c)+(_0x7025c4+0x1)+'\x20not\x20needed\x20(only\x20'+_0x2b8432+_0x1a8c97(0x219)+sources_1[_0x1a8c97(0x20b)][_0x1a8c97(0x232)]+_0x1a8c97(0x1bb));return;}const _0x3f85d5=Math[_0x1a8c97(0x240)](sources_1['sourcesData']['length']/_0x2b8432),_0x1378e7=_0x7025c4*_0x3f85d5,_0x58718a=Math[_0x1a8c97(0x1ae)](_0x1378e7+_0x3f85d5,sources_1[_0x1a8c97(0x20b)]['length']);_0x37406e=sources_1['sourcesData']['slice'](_0x1378e7,_0x58718a),console['log'](_0x1a8c97(0x1d2)+(_0x7025c4+0x1)+'/'+_0x2b8432+_0x1a8c97(0x1c8)+(_0x1378e7+0x1)+'-'+_0x58718a+'\x20of\x20'+sources_1[_0x1a8c97(0x20b)][_0x1a8c97(0x232)]);}}let _0x12168b=0x0;for(const _0x10fdf0 of _0x37406e){console[_0x1a8c97(0x1b4)](_0x1a8c97(0x1ed)+_0x10fdf0[_0x1a8c97(0x243)]);try{const _0x1c032e=await parser['parseURL'](_0x10fdf0[_0x1a8c97(0x231)]),_0x9d074a=_0x343d7b||MAX_ITEMS_PER_SOURCE,_0x142e76=_0x1c032e[_0x1a8c97(0x221)][_0x1a8c97(0x1d6)](isRecentItem)['slice'](0x0,_0x9d074a),_0xf0a68c=_0x1c032e[_0x1a8c97(0x221)][_0x1a8c97(0x232)]-_0x142e76[_0x1a8c97(0x232)]-(_0x1c032e[_0x1a8c97(0x221)]['length']>_0x9d074a?_0x1c032e[_0x1a8c97(0x221)][_0x1a8c97(0x232)]-_0x9d074a:0x0),_0xf6907a=_0x142e76['filter'](_0x1d53c0=>{const _0x2619d7=_0x1a8c97,_0x2ec30f=_0x1d53c0[_0x2619d7(0x1ad)];return _0x2ec30f&&!_0xf19963[_0x2619d7(0x1a4)](_0x2ec30f);}),_0x447fda=_0x142e76['length']-_0xf6907a[_0x1a8c97(0x232)];console[_0x1a8c97(0x1b4)]('\x20\x20'+_0xf6907a[_0x1a8c97(0x232)]+_0x1a8c97(0x1ab)+_0x447fda+_0x1a8c97(0x1ee)+_0xf0a68c+_0x1a8c97(0x1e0));const _0x390d14=await processBatch(_0xf6907a,_0x821ab4=>processItem(_0x821ab4,_0x10fdf0),MAX_CONCURRENT_FETCHES);for(const _0x300c98 of _0x390d14){if(_0x300c98&&_0x300c98['link']){if(_0x300c98[_0x1a8c97(0x23b)]){const _0x24e04e=_0x300c98[_0x1a8c97(0x23b)][_0x1a8c97(0x1b6)](0x0,0x64);if(_0x5dae06[_0x1a8c97(0x1a4)](_0x24e04e)){console[_0x1a8c97(0x1b4)](_0x1a8c97(0x1be)+_0x300c98['title']['substring'](0x0,0x28)+_0x1a8c97(0x225));continue;}_0x5dae06[_0x1a8c97(0x210)](_0x24e04e);}_0x572937[_0x1a8c97(0x24d)](_0x300c98),_0xf19963[_0x1a8c97(0x210)](_0x300c98['link']),_0x12168b++;}}}catch(_0x3703a2){console[_0x1a8c97(0x1af)](_0x1a8c97(0x1c6)+_0x10fdf0[_0x1a8c97(0x243)]+':',_0x3703a2[_0x1a8c97(0x1bc)]),logError(_0x10fdf0[_0x1a8c97(0x243)],_0x10fdf0[_0x1a8c97(0x231)],_0x3703a2[_0x1a8c97(0x1bc)]||_0x1a8c97(0x228));}}fs[_0x1a8c97(0x20c)](_0x106ca8,JSON['stringify'](_0x572937,null,0x2),_0x1a8c97(0x22e)),fs[_0x1a8c97(0x20c)](INDEX_FILE,JSON[_0x1a8c97(0x1aa)](Array[_0x1a8c97(0x1ce)](_0xf19963),null,0x2),_0x1a8c97(0x22e)),saveErrorLog(),console[_0x1a8c97(0x1b4)](_0x1a8c97(0x203)+_0x12168b+'\x20items.'),console['log'](_0x1a8c97(0x1a6));const _0x35863f=new classifier_1['Classifier'](),_0xaccadc=new bucket_manager_1[(_0x1a8c97(0x1ec))](OUTPUT_DIR);await _0xaccadc[_0x1a8c97(0x1dd)]();let _0x28913e=0x0;for(const _0x527ceb of _0x572937){const _0x5b7ca0=_0x35863f[_0x1a8c97(0x1cd)](_0x527ceb[_0x1a8c97(0x238)],_0x527ceb[_0x1a8c97(0x1a7)]);if(_0x5b7ca0[_0x1a8c97(0x232)]>0x0){for(const _0x4bdec5 of _0x5b7ca0){_0xaccadc[_0x1a8c97(0x200)](_0x527ceb,_0x4bdec5);}_0x28913e++;}}await _0xaccadc['flush']();const _0x56a3cc=Date['now']();console[_0x1a8c97(0x1b4)](_0x1a8c97(0x1e7)+((_0x56a3cc-_0x5aad92)/0x3e8)[_0x1a8c97(0x1cf)](0x2)+'s.\x20Classified\x20'+_0x28913e+_0x1a8c97(0x235));}run()[a4_0x2a2c8d(0x1c0)](console[a4_0x2a2c8d(0x1af)]);
'use strict';function a1_0x1c66(_0x548982,_0x175495){const _0x5c5508=a1_0x5c55();return a1_0x1c66=function(_0x1c6684,_0x36b1bf){_0x1c6684=_0x1c6684-0x16f;let _0xae40ab=_0x5c5508[_0x1c6684];return _0xae40ab;},a1_0x1c66(_0x548982,_0x175495);}const a1_0x542bcd=a1_0x1c66;(function(_0x1f3ba8,_0x4577ae){const _0x5038fe=a1_0x1c66,_0x57b8eb=_0x1f3ba8();while(!![]){try{const _0x518849=-parseInt(_0x5038fe(0x16f))/0x1*(parseInt(_0x5038fe(0x1b4))/0x2)+parseInt(_0x5038fe(0x185))/0x3+parseInt(_0x5038fe(0x1ae))/0x4+-parseInt(_0x5038fe(0x1a6))/0x5*(-parseInt(_0x5038fe(0x1ab))/0x6)+parseInt(_0x5038fe(0x192))/0x7+-parseInt(_0x5038fe(0x1b1))/0x8+parseInt(_0x5038fe(0x182))/0x9*(parseInt(_0x5038fe(0x174))/0xa);if(_0x518849===_0x4577ae)break;else _0x57b8eb['push'](_0x57b8eb['shift']());}catch(_0x9280b8){_0x57b8eb['push'](_0x57b8eb['shift']());}}}(a1_0x5c55,0x7a39e));var __createBinding=this&&this[a1_0x542bcd(0x1aa)]||(Object[a1_0x542bcd(0x1a1)]?function(_0x5cd73d,_0xfe3765,_0xdf07dd,_0x481218){const _0x597a2e=a1_0x542bcd;if(_0x481218===undefined)_0x481218=_0xdf07dd;var _0x25f216=Object[_0x597a2e(0x195)](_0xfe3765,_0xdf07dd);(!_0x25f216||('get'in _0x25f216?!_0xfe3765['__esModule']:_0x25f216['writable']||_0x25f216[_0x597a2e(0x184)]))&&(_0x25f216={'enumerable':!![],'get':function(){return _0xfe3765[_0xdf07dd];}}),Object[_0x597a2e(0x17b)](_0x5cd73d,_0x481218,_0x25f216);}:function(_0x397642,_0x44abab,_0x11b17d,_0xeffa94){if(_0xeffa94===undefined)_0xeffa94=_0x11b17d;_0x397642[_0xeffa94]=_0x44abab[_0x11b17d];}),__setModuleDefault=this&&this[a1_0x542bcd(0x18e)]||(Object[a1_0x542bcd(0x1a1)]?function(_0x48aa56,_0x3fe150){const _0x364e71=a1_0x542bcd;Object[_0x364e71(0x17b)](_0x48aa56,_0x364e71(0x1b0),{'enumerable':!![],'value':_0x3fe150});}:function(_0x53f7d6,_0x5d3520){const _0x382d9c=a1_0x542bcd;_0x53f7d6[_0x382d9c(0x1b0)]=_0x5d3520;}),__importStar=this&&this['__importStar']||(function(){var _0x2c1d00=function(_0x53cfd0){return _0x2c1d00=Object['getOwnPropertyNames']||function(_0x4fc53e){const _0x493612=a1_0x1c66;var _0x3cc94f=[];for(var _0x204384 in _0x4fc53e)if(Object[_0x493612(0x178)][_0x493612(0x181)][_0x493612(0x180)](_0x4fc53e,_0x204384))_0x3cc94f[_0x3cc94f[_0x493612(0x198)]]=_0x204384;return _0x3cc94f;},_0x2c1d00(_0x53cfd0);};return function(_0x5361cb){const _0x4935e3=a1_0x1c66;if(_0x5361cb&&_0x5361cb['__esModule'])return _0x5361cb;var _0x9269f2={};if(_0x5361cb!=null){for(var _0x25b28d=_0x2c1d00(_0x5361cb),_0x157045=0x0;_0x157045<_0x25b28d[_0x4935e3(0x198)];_0x157045++)if(_0x25b28d[_0x157045]!=='default')__createBinding(_0x9269f2,_0x5361cb,_0x25b28d[_0x157045]);}return __setModuleDefault(_0x9269f2,_0x5361cb),_0x9269f2;};}());Object['defineProperty'](exports,a1_0x542bcd(0x19d),{'value':!![]}),exports['BucketManager']=void 0x0;const fs=__importStar(require('fs')),path=__importStar(require(a1_0x542bcd(0x191)));function a1_0x5c55(){const _0x259263=['entries','existsSync','lastUpdated','__setModuleDefault','baseUrl','created_at','path','660037kzyuFx','some','/sitemaps/','getOwnPropertyDescriptor','params','<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22?>\x0a<sitemapindex\x20xmlns=\x22http://www.sitemaps.org/schemas/sitemap/0.9\x22>\x0a','length','category','toISOString','dataDir','values','__esModule','data','push','set','create','slug','sort','slice','\x0a</urlset>','5sAqJzb','buckets','parse','sitemapsDir','__createBinding','4112154UPISLz','map','readFileSync','688840ZJRKRs','sitemaps','default','2434040pTZftA','generateSitemap','<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22?>\x0a<urlset\x20xmlns=\x22http://www.sitemaps.org/schemas/sitemap/0.9\x22>\x0a','2cdTiGA','</lastmod>\x0a\x20\x20</sitemap>','799821slhIUA','join','split','addPost','stringify','10XHNLjj','manifestsDir','manifests','.json','prototype','link','flush','defineProperty','init','generateSitemapIndex','Flushing\x20buckets...','mkdirSync','call','hasOwnProperty','1875348tCnMVI','has','configurable','1333446pwzQRM','getTime','.xml','</lastmod>\x0a\x20\x20\x20\x20<changefreq>daily</changefreq>\x0a\x20\x20</url>','outputDir','writeFileSync'];a1_0x5c55=function(){return _0x259263;};return a1_0x5c55();}class BucketManager{constructor(_0x54b6d3){const _0x335493=a1_0x542bcd;this[_0x335493(0x1a7)]=new Map(),this['manifest']=[],this[_0x335493(0x18f)]='https://headlined.app',this[_0x335493(0x189)]=_0x54b6d3,this[_0x335493(0x19b)]=path[_0x335493(0x170)](_0x54b6d3,_0x335493(0x19e)),this[_0x335493(0x175)]=path[_0x335493(0x170)](_0x54b6d3,_0x335493(0x176)),this[_0x335493(0x1a9)]=path[_0x335493(0x170)](_0x54b6d3,_0x335493(0x1af));}async[a1_0x542bcd(0x17c)](){const _0x4fadf9=a1_0x542bcd;if(!fs[_0x4fadf9(0x18c)](this['dataDir']))fs[_0x4fadf9(0x17f)](this[_0x4fadf9(0x19b)],{'recursive':!![]});if(!fs[_0x4fadf9(0x18c)](this[_0x4fadf9(0x175)]))fs[_0x4fadf9(0x17f)](this[_0x4fadf9(0x175)],{'recursive':!![]});if(!fs['existsSync'](this[_0x4fadf9(0x1a9)]))fs[_0x4fadf9(0x17f)](this[_0x4fadf9(0x1a9)],{'recursive':!![]});}[a1_0x542bcd(0x172)](_0x23878e,_0x4682cd){const _0x587554=a1_0x542bcd,_0x4da38e=_0x4682cd[_0x587554(0x199)]+'/'+_0x4682cd[_0x587554(0x1a2)];if(!this[_0x587554(0x1a7)][_0x587554(0x183)](_0x4da38e)){const _0x3b0b05=path[_0x587554(0x170)](this[_0x587554(0x19b)],_0x4682cd[_0x587554(0x199)],_0x4682cd['slug']+_0x587554(0x177));if(fs['existsSync'](_0x3b0b05))try{const _0x2bb3ac=JSON[_0x587554(0x1a8)](fs[_0x587554(0x1ad)](_0x3b0b05,'utf-8'));this[_0x587554(0x1a7)]['set'](_0x4da38e,_0x2bb3ac);}catch(_0x4dc14d){this[_0x587554(0x1a7)][_0x587554(0x1a0)](_0x4da38e,[]);}else this[_0x587554(0x1a7)]['set'](_0x4da38e,[]);}const _0x508336=this['buckets']['get'](_0x4da38e);!_0x508336[_0x587554(0x193)](_0x5991cb=>_0x5991cb[_0x587554(0x179)]===_0x23878e[_0x587554(0x179)])&&_0x508336['push'](_0x23878e);}async[a1_0x542bcd(0x17a)](){const _0x4a3f8c=a1_0x542bcd;console['log'](_0x4a3f8c(0x17e));const _0x5512a4=[],_0xb13f9f={};for(const [_0x14fb8f,_0x4cfce2]of this[_0x4a3f8c(0x1a7)][_0x4a3f8c(0x18b)]()){const [_0x5ce14e,_0x50d9d3]=_0x14fb8f[_0x4a3f8c(0x171)]('/');_0x4cfce2[_0x4a3f8c(0x1a3)]((_0x1aba97,_0x116426)=>new Date(_0x116426[_0x4a3f8c(0x190)])[_0x4a3f8c(0x186)]()-new Date(_0x1aba97[_0x4a3f8c(0x190)])[_0x4a3f8c(0x186)]());if(_0x4cfce2[_0x4a3f8c(0x198)]<0x3)continue;const _0x4003dc=new Date(_0x4cfce2[0x0][_0x4a3f8c(0x190)]),_0x547a01=(Date['now']()-_0x4003dc['getTime']())/(0x3e8*0x3c*0x3c*0x18);if(_0x547a01>0x3c)continue;const _0x407dcc=path['join'](this[_0x4a3f8c(0x19b)],_0x5ce14e);if(!fs[_0x4a3f8c(0x18c)](_0x407dcc))fs[_0x4a3f8c(0x17f)](_0x407dcc,{'recursive':!![]});const _0x4fda9e=_0x4cfce2[_0x4a3f8c(0x1a4)](0x0,0x64);fs[_0x4a3f8c(0x18a)](path[_0x4a3f8c(0x170)](_0x407dcc,_0x50d9d3+_0x4a3f8c(0x177)),JSON['stringify'](_0x4fda9e,null,0x2));const _0x5eaba9={'params':{'category':_0x5ce14e,'slug':_0x50d9d3},'lastUpdated':new Date()[_0x4a3f8c(0x19a)](),'count':_0x4cfce2[_0x4a3f8c(0x198)]};if(!_0xb13f9f[_0x5ce14e])_0xb13f9f[_0x5ce14e]=[];_0xb13f9f[_0x5ce14e]['push'](_0x5eaba9),_0x5512a4[_0x4a3f8c(0x19f)]({'category':_0x5ce14e,'slug':_0x50d9d3});}for(const _0x3d7f3b in _0xb13f9f){fs[_0x4a3f8c(0x18a)](path[_0x4a3f8c(0x170)](this[_0x4a3f8c(0x175)],_0x3d7f3b+_0x4a3f8c(0x177)),JSON[_0x4a3f8c(0x173)](_0xb13f9f[_0x3d7f3b],null,0x2)),this[_0x4a3f8c(0x1b2)](_0x3d7f3b,_0xb13f9f[_0x3d7f3b]);}this['generateSitemapIndex'](Object['keys'](_0xb13f9f));const _0x20cf19=Object[_0x4a3f8c(0x19c)](_0xb13f9f)['flat']();fs[_0x4a3f8c(0x18a)](path[_0x4a3f8c(0x170)](this[_0x4a3f8c(0x189)],'manifest.json'),JSON[_0x4a3f8c(0x173)](_0x20cf19,null,0x2));}['generateSitemap'](_0x2cecc6,_0xc17a36){const _0x2353ad=a1_0x542bcd,_0x3d2718=_0x2353ad(0x1b3)+_0xc17a36[_0x2353ad(0x1ac)](_0x4f2f04=>'\x20\x20<url>\x0a\x20\x20\x20\x20<loc>'+this['baseUrl']+'/'+_0x4f2f04[_0x2353ad(0x196)][_0x2353ad(0x199)]+'/'+_0x4f2f04[_0x2353ad(0x196)][_0x2353ad(0x1a2)]+'</loc>\x0a\x20\x20\x20\x20<lastmod>'+_0x4f2f04[_0x2353ad(0x18d)]['split']('T')[0x0]+_0x2353ad(0x188))[_0x2353ad(0x170)]('\x0a')+_0x2353ad(0x1a5);fs[_0x2353ad(0x18a)](path[_0x2353ad(0x170)](this['sitemapsDir'],_0x2cecc6+_0x2353ad(0x187)),_0x3d2718);}[a1_0x542bcd(0x17d)](_0x34a90e){const _0x4655f5=a1_0x542bcd,_0x589cc9=_0x4655f5(0x197)+_0x34a90e[_0x4655f5(0x1ac)](_0x381c2a=>'\x20\x20<sitemap>\x0a\x20\x20\x20\x20<loc>'+this[_0x4655f5(0x18f)]+_0x4655f5(0x194)+_0x381c2a+'.xml</loc>\x0a\x20\x20\x20\x20<lastmod>'+new Date()[_0x4655f5(0x19a)]()[_0x4655f5(0x171)]('T')[0x0]+_0x4655f5(0x1b5))[_0x4655f5(0x170)]('\x0a')+'\x0a</sitemapindex>';fs['writeFileSync'](path[_0x4655f5(0x170)](this[_0x4655f5(0x189)],'sitemap-index.xml'),_0x589cc9);}}exports['BucketManager']=BucketManager;